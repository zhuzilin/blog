{"componentChunkName":"component---src-templates-blog-post-js","path":"/About-python-relative-importing/","webpackCompilationHash":"09b93770b50e348782f7","result":{"data":{"markdownRemark":{"html":"<h2>Relative importing is painful</h2>\n<p>The relative importing has always been painful in python. For example, we are writing a web app using Flask. The file structure is like following:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">\\root\n\trun.py\n\t\\views\n\t\tblueprint.py</code></pre></div>\n<p>To use websocket, we have chosen the flask-socketio. In the run.py and our blueprint file, we all need the socketio variable. It is natural for one to write the following code:</p>\n<p>In run.py</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span> <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n<span class=\"token keyword\">from</span> flask<span class=\"token operator\">-</span>socketio <span class=\"token keyword\">import</span> SocketIO\n<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span> <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\nsocketio <span class=\"token operator\">=</span> SocketIO<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">def</span> <span class=\"token function\">register_blueprint</span><span class=\"token punctuation\">(</span>app<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span> <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n    \napp <span class=\"token operator\">=</span> Flask<span class=\"token punctuation\">(</span>__name__<span class=\"token punctuation\">)</span>\nregister_blueprint<span class=\"token punctuation\">(</span>app<span class=\"token punctuation\">)</span>\n\nsocketio<span class=\"token punctuation\">.</span>init_app<span class=\"token punctuation\">(</span>app<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span> <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span></code></pre></div>\n<p>And in blueprint.py</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">from ..run import socketio\n\n... ...\n@socket.on(&#39;message&#39;):\n\t... ...</code></pre></div>\n<p>But this would trigger: </p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">Error: attempted relative <span class=\"token function\">import</span> beyond top-level package</code></pre></div>\n<h2>Decent solution</h2>\n<p>We need to move the variable socketio to __ init__.py. Now the file structure is:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">\\root\n\trun.py\n\t\\views\n\t\t__init__.py\n\t\tblueprint.py</code></pre></div>\n<p>In __ init__.py:</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">socketio <span class=\"token operator\">=</span> SocketIO<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>In run.py</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> views <span class=\"token keyword\">import</span> socketio</code></pre></div>\n<p>In blueprint.py</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> <span class=\"token punctuation\">.</span> <span class=\"token keyword\">import</span> socketio</code></pre></div>\n<p>Problem solved!</p>","frontmatter":{"title":"About python relative importing","date":"2018-07-05T15:06:13.000Z","tags":["python"]}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/About-python-relative-importing/"}}}