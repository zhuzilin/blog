{"componentChunkName":"component---src-templates-blog-post-js","path":"/Configure-aws-sdk-in-win10/","result":{"data":{"markdownRemark":{"html":"<h2>Install for powershell</h2>\n<p>First we need to run the powershell as administrator.</p>\n<p>With PowerShell 5.0 or higher, the installation can be done with only one line:</p>\n<div class=\"gatsby-highlight\" data-language=\"powershell\"><pre class=\"language-powershell\"><code class=\"language-powershell\"><span class=\"token function\">Install-Module</span> <span class=\"token operator\">-</span>Name AWSPowerShell</code></pre></div>\n<h2>Set credential</h2>\n<p>To use aws cli in powershell, we need to run:</p>\n<div class=\"gatsby-highlight\" data-language=\"powershell\"><pre class=\"language-powershell\"><code class=\"language-powershell\"><span class=\"token function\">Set-ExecutionPolicy</span> RemoteSigned</code></pre></div>\n<p>to allow aws cli to run.</p>\n<p>Then we can set the config file with</p>\n<div class=\"gatsby-highlight\" data-language=\"powershell\"><pre class=\"language-powershell\"><code class=\"language-powershell\"><span class=\"token function\">Set-AWSCredential</span> <span class=\"token operator\">-</span>AccessKey xxx <span class=\"token operator\">-</span>SecretKey xxx <span class=\"token operator\">-</span>StoreAs MyProfileName</code></pre></div>\n<p>The access<em>key and secret</em>key can be found from IAM in aws console.</p>\n<p>And then for windows, we need to add a credential file at C:\\Users\\zhuzilin\\.aws\\credentials</p>\n<p>The content of the file could be:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">[default]\naws_access_key_id={YOUR_ACCESS_KEY_ID}\naws_secret_access_key={YOUR_SECRET_ACCESS_KEY}\n\n[profile2]\naws_access_key_id={YOUR_ACCESS_KEY_ID}\naws_secret_access_key={YOUR_SECRET_ACCESS_KEY}</code></pre></div>\n<h2>Use aws-sdk in node</h2>\n<p>Here is an example of using dynamodb</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">let</span> <span class=\"token constant\">AWS</span> <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'aws-sdk'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> doc <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'dynamodb-doc'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Load the AWS API Key from my local, private configuration file.</span>\n<span class=\"token keyword\">let</span> credentials <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">AWS<span class=\"token punctuation\">.</span>SharedIniFileCredentials</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// Set the credential.</span>\n<span class=\"token constant\">AWS</span><span class=\"token punctuation\">.</span>config<span class=\"token punctuation\">.</span>credentials <span class=\"token operator\">=</span> credentials<span class=\"token punctuation\">;</span>\n\n<span class=\"token constant\">AWS</span><span class=\"token punctuation\">.</span>config<span class=\"token punctuation\">.</span><span class=\"token function\">update</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token literal-property property\">region</span><span class=\"token operator\">:</span> <span class=\"token string\">'us-east-1'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> awsClient <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">AWS<span class=\"token punctuation\">.</span>DynamoDB</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> dynamo <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">doc<span class=\"token punctuation\">.</span>DynamoDB</span><span class=\"token punctuation\">(</span>awsClient<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Here the SharedIniFileCredentials() is using the default credentials.</p>\n<h2>Reference</h2>\n<ul>\n<li><a href=\"https://docs.aws.amazon.com/zh_cn/sdk-for-java/v1/developer-guide/credentials.html\">https://docs.aws.amazon.com/zh_cn/sdk-for-java/v1/developer-guide/credentials.html</a></li>\n<li><a href=\"https://docs.aws.amazon.com/zh_cn/powershell/latest/userguide/pstools-getting-set-up-windows.html\">https://docs.aws.amazon.com/zh_cn/powershell/latest/userguide/pstools-getting-set-up-windows.html</a></li>\n</ul>","frontmatter":{"title":"Configure aws-sdk in win10","date":"2018-11-18T12:28:02.000Z","tags":["aws","powershell"]}}},"pageContext":{"slug":"/Configure-aws-sdk-in-win10/"}},"staticQueryHashes":["3159585216"]}