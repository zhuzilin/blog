{"data":{"markdownRemark":{"html":"<h2>Relative importing is painful</h2>\n<p>The relative importing has always been painful in python. For example, we are writing a web app using Flask. The file structure is like following:</p>\n\n    <div class=\"gatsby-highlight\" data-language=\"null\">\n      <pre class=\" cm-s-default\"\n      ><code><span>\\root\n\trun.py\n\t\\views\n\t\tblueprint.py</span></code></pre>\n    </div>\n<p>To use websocket, we have chosen the flask-socketio. In the run.py and our blueprint file, we all need the socketio variable. It is natural for one to write the following code:</p>\n<p>In run.py</p>\n\n    <div class=\"gatsby-highlight\" data-language=\"python\">\n      <pre class=\" cm-s-default\"\n      ><code><span>... ...</span><span>\n</span><span class=\"cm-property\">from</span><span> </span><span class=\"cm-variable\">flask</span><span class=\"cm-operator\">-</span><span class=\"cm-variable\">socketio</span><span> </span><span class=\"cm-keyword\">import</span><span> </span><span class=\"cm-variable\">SocketIO</span><span>\n</span><span>... ...</span><span>\n</span><span class=\"cm-property\">socketio</span><span> </span><span class=\"cm-operator\">=</span><span> </span><span class=\"cm-variable\">SocketIO</span><span>()</span><span>\n\n</span><span class=\"cm-keyword\">def</span><span> </span><span class=\"cm-def\">register_blueprint</span><span>(</span><span class=\"cm-variable\">app</span><span>):</span><span>\n</span><span>    ... ...</span><span>\n</span><span>    </span><span>\n</span><span class=\"cm-property\">app</span><span> </span><span class=\"cm-operator\">=</span><span> </span><span class=\"cm-variable\">Flask</span><span>(</span><span class=\"cm-variable\">__name__</span><span>)</span><span>\n</span><span class=\"cm-variable\">register_blueprint</span><span>(</span><span class=\"cm-variable\">app</span><span>)</span><span>\n\n</span><span class=\"cm-variable\">socketio</span><span>.</span><span class=\"cm-property\">init_app</span><span>(</span><span class=\"cm-variable\">app</span><span>)</span><span>\n</span><span>... ...</span></code></pre>\n    </div>\n<p>And in blueprint.py</p>\n\n    <div class=\"gatsby-highlight\" data-language=\"null\">\n      <pre class=\" cm-s-default\"\n      ><code><span>from ..run import socketio\n\n... ...\n@socket.on('message'):\n\t... ...</span></code></pre>\n    </div>\n<p>But this would trigger: </p>\n\n    <div class=\"gatsby-highlight\" data-language=\"bash\">\n      <pre class=\" cm-s-default\"\n      ><code><span>Error: attempted relative import beyond top-level package</span></code></pre>\n    </div>\n<h2>Decent solution</h2>\n<p>We need to move the variable socketio to __ init__.py. Now the file structure is:</p>\n\n    <div class=\"gatsby-highlight\" data-language=\"null\">\n      <pre class=\" cm-s-default\"\n      ><code><span>\\root\n\trun.py\n\t\\views\n\t\t__init__.py\n\t\tblueprint.py</span></code></pre>\n    </div>\n<p>In __ init__.py:</p>\n\n    <div class=\"gatsby-highlight\" data-language=\"python\">\n      <pre class=\" cm-s-default\"\n      ><code><span class=\"cm-variable\">socketio</span><span> </span><span class=\"cm-operator\">=</span><span> </span><span class=\"cm-variable\">SocketIO</span><span>()</span></code></pre>\n    </div>\n<p>In run.py</p>\n\n    <div class=\"gatsby-highlight\" data-language=\"python\">\n      <pre class=\" cm-s-default\"\n      ><code><span class=\"cm-keyword\">from</span><span> </span><span class=\"cm-variable\">views</span><span> </span><span class=\"cm-keyword\">import</span><span> </span><span class=\"cm-variable\">socketio</span></code></pre>\n    </div>\n<p>In blueprint.py</p>\n\n    <div class=\"gatsby-highlight\" data-language=\"python\">\n      <pre class=\" cm-s-default\"\n      ><code><span class=\"cm-keyword\">from</span><span> . </span><span class=\"cm-property\">import</span><span> </span><span class=\"cm-variable\">socketio</span></code></pre>\n    </div>\n<p>Problem solved!</p>","frontmatter":{"title":"About python relative importing"}}},"pageContext":{"slug":"/About-python-relative-importing/"}}