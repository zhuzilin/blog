{"data":{"markdownRemark":{"html":"<h2>Install for powershell</h2>\n<p>First we need to run the powershell as administrator.</p>\n<p>With PowerShell 5.0 or higher, the installation can be done with only one line:</p>\n\n    <div class=\"gatsby-highlight\" data-language=\"powershell\">\n      <pre class=\" cm-s-default\"\n      ><code><span>Install-Module -Name AWSPowerShell</span></code></pre>\n    </div>\n<h2>Set credential</h2>\n<p>To use aws cli in powershell, we need to run:</p>\n\n    <div class=\"gatsby-highlight\" data-language=\"powershell\">\n      <pre class=\" cm-s-default\"\n      ><code><span>Set-ExecutionPolicy RemoteSigned</span></code></pre>\n    </div>\n<p>to allow aws cli to run.</p>\n<p>Then we can set the config file with</p>\n\n    <div class=\"gatsby-highlight\" data-language=\"powershell\">\n      <pre class=\" cm-s-default\"\n      ><code><span>Set-AWSCredential -AccessKey xxx -SecretKey xxx -StoreAs MyProfileName</span></code></pre>\n    </div>\n<p>The access<em>key and secret</em>key can be found from IAM in aws console.</p>\n<p>And then for windows, we need to add a credential file at C:\\Users\\zhuzilin\\.aws\\credentials</p>\n<p>The content of the file could be:</p>\n\n    <div class=\"gatsby-highlight\" data-language=\"null\">\n      <pre class=\" cm-s-default\"\n      ><code><span>[default]\naws_access_key_id={YOUR_ACCESS_KEY_ID}\naws_secret_access_key={YOUR_SECRET_ACCESS_KEY}\n\n[profile2]\naws_access_key_id={YOUR_ACCESS_KEY_ID}\naws_secret_access_key={YOUR_SECRET_ACCESS_KEY}</span></code></pre>\n    </div>\n<h2>Use aws-sdk in node</h2>\n<p>Here is an example of using dynamodb</p>\n\n    <div class=\"gatsby-highlight\" data-language=\"javascript\">\n      <pre class=\" cm-s-default\"\n      ><code><span class=\"cm-keyword\">let</span><span> </span><span class=\"cm-def\">AWS</span><span> </span><span class=\"cm-operator\">=</span><span> </span><span class=\"cm-variable\">require</span><span>(</span><span class=\"cm-string\">'aws-sdk'</span><span>);\n</span><span class=\"cm-keyword\">let</span><span> </span><span class=\"cm-def\">doc</span><span> </span><span class=\"cm-operator\">=</span><span> </span><span class=\"cm-variable\">require</span><span>(</span><span class=\"cm-string\">'dynamodb-doc'</span><span>);\n\n</span><span class=\"cm-comment\">// Load the AWS API Key from my local, private configuration file.</span><span>\n</span><span class=\"cm-keyword\">let</span><span> </span><span class=\"cm-def\">credentials</span><span> </span><span class=\"cm-operator\">=</span><span> </span><span class=\"cm-keyword\">new</span><span> </span><span class=\"cm-variable\">AWS</span><span>.</span><span class=\"cm-property\">SharedIniFileCredentials</span><span>();\n</span><span class=\"cm-comment\">// Set the credential.</span><span>\n</span><span class=\"cm-variable\">AWS</span><span>.</span><span class=\"cm-property\">config</span><span>.</span><span class=\"cm-property\">credentials</span><span> </span><span class=\"cm-operator\">=</span><span> </span><span class=\"cm-variable\">credentials</span><span>;\n\n</span><span class=\"cm-variable\">AWS</span><span>.</span><span class=\"cm-property\">config</span><span>.</span><span class=\"cm-property\">update</span><span>({</span><span class=\"cm-property\">region</span><span>:</span><span> </span><span class=\"cm-string\">'us-east-1'</span><span>});\n</span><span class=\"cm-keyword\">let</span><span> </span><span class=\"cm-def\">awsClient</span><span> </span><span class=\"cm-operator\">=</span><span> </span><span class=\"cm-keyword\">new</span><span> </span><span class=\"cm-variable\">AWS</span><span>.</span><span class=\"cm-property\">DynamoDB</span><span>();\n</span><span class=\"cm-keyword\">let</span><span> </span><span class=\"cm-def\">dynamo</span><span> </span><span class=\"cm-operator\">=</span><span> </span><span class=\"cm-keyword\">new</span><span> </span><span class=\"cm-variable\">doc</span><span>.</span><span class=\"cm-property\">DynamoDB</span><span>(</span><span class=\"cm-variable\">awsClient</span><span>);</span></code></pre>\n    </div>\n<p>Here the SharedIniFileCredentials() is using the default credentials.</p>\n<h2>Reference</h2>\n<ul>\n<li><a href=\"https://docs.aws.amazon.com/zh_cn/sdk-for-java/v1/developer-guide/credentials.html\">https://docs.aws.amazon.com/zh_cn/sdk-for-java/v1/developer-guide/credentials.html</a></li>\n<li><a href=\"https://docs.aws.amazon.com/zh_cn/powershell/latest/userguide/pstools-getting-set-up-windows.html\">https://docs.aws.amazon.com/zh_cn/powershell/latest/userguide/pstools-getting-set-up-windows.html</a></li>\n</ul>","frontmatter":{"title":"Configure aws-sdk in win10"}}},"pageContext":{"slug":"/Configure-aws-sdk-in-win10/"}}