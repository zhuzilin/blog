{"expireTime":9007200818315813000,"key":"transformer-remark-markdown-html-ast-50d33b308fe5c7cd56fcfe6d8c6900cb-gatsby-remark-katexgatsby-remark-prismjs-","val":{"type":"root","children":[{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"这里会记录阅读6.828课程lecture note的我的个人笔记。可能会中英混杂，不是很适合外人阅读，也请见谅。","position":{"start":{"line":2,"column":1,"offset":1},"end":{"line":2,"column":58,"offset":58}}}],"position":{"start":{"line":2,"column":1,"offset":1},"end":{"line":2,"column":58,"offset":58}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"Lecture 1: O/S overview","position":{"start":{"line":4,"column":4,"offset":63},"end":{"line":4,"column":27,"offset":86}}}],"position":{"start":{"line":4,"column":1,"offset":60},"end":{"line":4,"column":27,"offset":86}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"操作系统的主要目的是：","position":{"start":{"line":6,"column":1,"offset":88},"end":{"line":6,"column":12,"offset":99}}}],"position":{"start":{"line":6,"column":1,"offset":88},"end":{"line":6,"column":12,"offset":99}}},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"支持应用","position":{"start":{"line":8,"column":3,"offset":103},"end":{"line":8,"column":7,"offset":107}}}],"position":{"start":{"line":8,"column":1,"offset":101},"end":{"line":8,"column":7,"offset":107}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"为了便捷对硬件进行抽象","position":{"start":{"line":9,"column":3,"offset":110},"end":{"line":9,"column":14,"offset":121}}}],"position":{"start":{"line":9,"column":1,"offset":108},"end":{"line":9,"column":14,"offset":121}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"为多种应用multiplexing the hardware","position":{"start":{"line":10,"column":3,"offset":124},"end":{"line":10,"column":33,"offset":154}}}],"position":{"start":{"line":10,"column":1,"offset":122},"end":{"line":10,"column":33,"offset":154}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"为避免bug对各个应用进行隔离","position":{"start":{"line":11,"column":3,"offset":157},"end":{"line":11,"column":18,"offset":172}}}],"position":{"start":{"line":11,"column":1,"offset":155},"end":{"line":11,"column":18,"offset":172}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"提供高性能","position":{"start":{"line":12,"column":3,"offset":175},"end":{"line":12,"column":8,"offset":180}}}],"position":{"start":{"line":12,"column":1,"offset":173},"end":{"line":12,"column":8,"offset":180}}},{"type":"text","value":"\n"}],"position":{"start":{"line":8,"column":1,"offset":101},"end":{"line":12,"column":8,"offset":180}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"设计方式是：","position":{"start":{"line":14,"column":1,"offset":182},"end":{"line":14,"column":7,"offset":188}}}],"position":{"start":{"line":14,"column":1,"offset":182},"end":{"line":14,"column":7,"offset":188}}},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"微观看，一个管理硬件的library","position":{"start":{"line":16,"column":3,"offset":192},"end":{"line":16,"column":21,"offset":210}}}],"position":{"start":{"line":16,"column":1,"offset":190},"end":{"line":16,"column":21,"offset":210}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"宏观看，将物理机虚拟为一个有着更好性质的虚拟机","position":{"start":{"line":17,"column":3,"offset":213},"end":{"line":17,"column":26,"offset":236}}}],"position":{"start":{"line":17,"column":1,"offset":211},"end":{"line":17,"column":26,"offset":236}}},{"type":"text","value":"\n"}],"position":{"start":{"line":16,"column":1,"offset":190},"end":{"line":17,"column":26,"offset":236}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"整体组织，层状结构：硬件 -> kernel -> 用户应用","position":{"start":{"line":19,"column":1,"offset":238},"end":{"line":19,"column":31,"offset":268}}}],"position":{"start":{"line":19,"column":1,"offset":238},"end":{"line":19,"column":31,"offset":268}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"OS提供的主要服务：","position":{"start":{"line":21,"column":1,"offset":270},"end":{"line":21,"column":11,"offset":280}}}],"position":{"start":{"line":21,"column":1,"offset":270},"end":{"line":21,"column":11,"offset":280}}},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"process","position":{"start":{"line":23,"column":3,"offset":284},"end":{"line":23,"column":10,"offset":291}}}],"position":{"start":{"line":23,"column":1,"offset":282},"end":{"line":23,"column":10,"offset":291}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"memory allocation","position":{"start":{"line":24,"column":3,"offset":294},"end":{"line":24,"column":20,"offset":311}}}],"position":{"start":{"line":24,"column":1,"offset":292},"end":{"line":24,"column":20,"offset":311}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"file contents","position":{"start":{"line":25,"column":3,"offset":314},"end":{"line":25,"column":16,"offset":327}}}],"position":{"start":{"line":25,"column":1,"offset":312},"end":{"line":25,"column":16,"offset":327}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"directories and file names","position":{"start":{"line":26,"column":3,"offset":330},"end":{"line":26,"column":29,"offset":356}}}],"position":{"start":{"line":26,"column":1,"offset":328},"end":{"line":26,"column":29,"offset":356}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"security","position":{"start":{"line":27,"column":3,"offset":359},"end":{"line":27,"column":11,"offset":367}}}],"position":{"start":{"line":27,"column":1,"offset":357},"end":{"line":27,"column":11,"offset":367}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"many others: users, IPC, network, time, terminal...","position":{"start":{"line":28,"column":3,"offset":370},"end":{"line":28,"column":54,"offset":421}}}],"position":{"start":{"line":28,"column":1,"offset":368},"end":{"line":28,"column":54,"offset":421}}},{"type":"text","value":"\n"}],"position":{"start":{"line":23,"column":1,"offset":282},"end":{"line":28,"column":54,"offset":421}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"所谓抽象，即为应用只能通过system call来使用某种功能。","position":{"start":{"line":30,"column":1,"offset":423},"end":{"line":30,"column":33,"offset":455}}}],"position":{"start":{"line":30,"column":1,"offset":423},"end":{"line":30,"column":33,"offset":455}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{},"children":[{"type":"text","value":"Introduction to system calls","position":{"start":{"line":32,"column":5,"offset":461},"end":{"line":32,"column":33,"offset":489}}}],"position":{"start":{"line":32,"column":1,"offset":457},"end":{"line":32,"column":33,"offset":489}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"6.828 is largely about design and implementation of system call interface.","position":{"start":{"line":34,"column":1,"offset":491},"end":{"line":34,"column":75,"offset":565}}}],"position":{"start":{"line":34,"column":1,"offset":491},"end":{"line":34,"column":75,"offset":565}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"对于ls，我们可以使用如下命令来看它使用了哪些命令：","position":{"start":{"line":36,"column":1,"offset":567},"end":{"line":36,"column":27,"offset":593}}}],"position":{"start":{"line":36,"column":1,"offset":567},"end":{"line":36,"column":27,"offset":593}}},{"type":"text","value":"\n"},{"type":"raw","value":"<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">strace /bin/ls</code></pre></div>","position":{"start":{"line":38,"column":1,"offset":595},"end":{"line":40,"column":4,"offset":617}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"会显示其一步一步都调用了哪些system call。","position":{"start":{"line":42,"column":1,"offset":619},"end":{"line":42,"column":27,"offset":645}}}],"position":{"start":{"line":42,"column":1,"offset":619},"end":{"line":42,"column":27,"offset":645}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"example ","position":{"start":{"line":44,"column":1,"offset":647},"end":{"line":44,"column":9,"offset":655}}},{"type":"raw","value":"<code class=\"language-text\">copy.c</code>","position":{"start":{"line":44,"column":9,"offset":655},"end":{"line":44,"column":17,"offset":663}}}],"position":{"start":{"line":44,"column":1,"offset":647},"end":{"line":44,"column":17,"offset":663}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"没有找到代码，所以只好自己写了一个：","position":{"start":{"line":46,"column":1,"offset":665},"end":{"line":46,"column":19,"offset":683}}}],"position":{"start":{"line":46,"column":1,"offset":665},"end":{"line":46,"column":19,"offset":683}}},{"type":"text","value":"\n"},{"type":"raw","value":"<div class=\"gatsby-highlight\" data-language=\"c\"><pre class=\"language-c\"><code class=\"language-c\"><span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;unistd.h></span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;sys/types.h></span></span>\n\n<span class=\"token keyword\">int</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">char</span> buf<span class=\"token punctuation\">[</span><span class=\"token number\">128</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  size_t len <span class=\"token operator\">=</span> <span class=\"token function\">read</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> buf<span class=\"token punctuation\">,</span> <span class=\"token keyword\">sizeof</span><span class=\"token punctuation\">(</span>buf<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">write</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> buf<span class=\"token punctuation\">,</span> len<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>","position":{"start":{"line":48,"column":1,"offset":685},"end":{"line":57,"column":4,"offset":833}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"运行的结果为：","position":{"start":{"line":59,"column":1,"offset":835},"end":{"line":59,"column":8,"offset":842}}}],"position":{"start":{"line":59,"column":1,"offset":835},"end":{"line":59,"column":8,"offset":842}}},{"type":"text","value":"\n"},{"type":"raw","value":"<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">strace</span> ./copy\n<span class=\"token punctuation\">..</span>.\nread<span class=\"token punctuation\">(</span>0, <span class=\"token string\">\"123\\n\"</span>, 128<span class=\"token punctuation\">)</span>                   <span class=\"token operator\">=</span> 4\nwrite<span class=\"token punctuation\">(</span>1, <span class=\"token string\">\"123\\n\"</span>, 4<span class=\"token punctuation\">)</span>                    <span class=\"token operator\">=</span> 4\n<span class=\"token punctuation\">..</span>.</code></pre></div>","position":{"start":{"line":61,"column":1,"offset":844},"end":{"line":67,"column":4,"offset":967}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"注意因为需要输入变量，所以这里是整理过的输出。","position":{"start":{"line":69,"column":1,"offset":969},"end":{"line":69,"column":24,"offset":992}}}],"position":{"start":{"line":69,"column":1,"offset":969},"end":{"line":69,"column":24,"offset":992}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"example: ","position":{"start":{"line":71,"column":1,"offset":994},"end":{"line":71,"column":10,"offset":1003}}},{"type":"raw","value":"<code class=\"language-text\">open.c</code>","position":{"start":{"line":71,"column":10,"offset":1003},"end":{"line":71,"column":18,"offset":1011}}}],"position":{"start":{"line":71,"column":1,"offset":994},"end":{"line":71,"column":18,"offset":1011}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"还是自己写了一个：","position":{"start":{"line":73,"column":1,"offset":1013},"end":{"line":73,"column":10,"offset":1022}}}],"position":{"start":{"line":73,"column":1,"offset":1013},"end":{"line":73,"column":10,"offset":1022}}},{"type":"text","value":"\n"},{"type":"raw","value":"<div class=\"gatsby-highlight\" data-language=\"c\"><pre class=\"language-c\"><code class=\"language-c\"><span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;fcntl.h></span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;unistd.h></span></span>\n\n<span class=\"token keyword\">int</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">int</span> fd<span class=\"token punctuation\">;</span>\n  mode_t mode <span class=\"token operator\">=</span> S_IRUSR <span class=\"token operator\">|</span> S_IWUSR <span class=\"token operator\">|</span> S_IRGRP <span class=\"token operator\">|</span> S_IROTH<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">char</span> <span class=\"token operator\">*</span>filename <span class=\"token operator\">=</span> <span class=\"token string\">\"output.txt\"</span><span class=\"token punctuation\">;</span>\n  fd <span class=\"token operator\">=</span> <span class=\"token function\">creat</span><span class=\"token punctuation\">(</span>filename<span class=\"token punctuation\">,</span> mode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// notice, there is no 'e'</span>\n  <span class=\"token keyword\">char</span> buf<span class=\"token punctuation\">[</span><span class=\"token number\">13</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"hello world\\n\"</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">write</span><span class=\"token punctuation\">(</span>fd<span class=\"token punctuation\">,</span> buf<span class=\"token punctuation\">,</span> <span class=\"token keyword\">sizeof</span><span class=\"token punctuation\">(</span>buf<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>","position":{"start":{"line":75,"column":1,"offset":1024},"end":{"line":87,"column":4,"offset":1307}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"运行的结果为：","position":{"start":{"line":89,"column":1,"offset":1309},"end":{"line":89,"column":8,"offset":1316}}}],"position":{"start":{"line":89,"column":1,"offset":1309},"end":{"line":89,"column":8,"offset":1316}}},{"type":"text","value":"\n"},{"type":"raw","value":"<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">strace</span> ./open\n<span class=\"token punctuation\">..</span>.\ncreat<span class=\"token punctuation\">(</span><span class=\"token string\">\"output.txt\"</span>, 0644<span class=\"token punctuation\">)</span>               <span class=\"token operator\">=</span> 3\nwrite<span class=\"token punctuation\">(</span>3, <span class=\"token string\">\"hello world\\n\\0\"</span>, 13<span class=\"token punctuation\">)</span>         <span class=\"token operator\">=</span> 13\n<span class=\"token punctuation\">..</span>.</code></pre></div>","position":{"start":{"line":91,"column":1,"offset":1318},"end":{"line":97,"column":4,"offset":1442}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"注意这里fd就是3","position":{"start":{"line":99,"column":1,"offset":1444},"end":{"line":99,"column":10,"offset":1453}}}],"position":{"start":{"line":99,"column":1,"offset":1444},"end":{"line":99,"column":10,"offset":1453}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"example: ","position":{"start":{"line":101,"column":1,"offset":1455},"end":{"line":101,"column":10,"offset":1464}}},{"type":"raw","value":"<code class=\"language-text\">redirect.c</code>","position":{"start":{"line":101,"column":10,"offset":1464},"end":{"line":101,"column":22,"offset":1476}}}],"position":{"start":{"line":101,"column":1,"offset":1455},"end":{"line":101,"column":22,"offset":1476}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"不知道要写什么样的代码。。。","position":{"start":{"line":103,"column":1,"offset":1478},"end":{"line":103,"column":15,"offset":1492}}}],"position":{"start":{"line":103,"column":1,"offset":1478},"end":{"line":103,"column":15,"offset":1492}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Unix shell","position":{"start":{"line":105,"column":1,"offset":1494},"end":{"line":105,"column":11,"offset":1504}}}],"position":{"start":{"line":105,"column":1,"offset":1494},"end":{"line":105,"column":11,"offset":1504}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"因为","position":{"start":{"line":107,"column":1,"offset":1506},"end":{"line":107,"column":3,"offset":1508}}},{"type":"raw","value":"<code class=\"language-text\">sh.c</code>","position":{"start":{"line":107,"column":3,"offset":1508},"end":{"line":107,"column":9,"offset":1514}}},{"type":"text","value":"在之后的作业里要用，就不在这里细说了。","position":{"start":{"line":107,"column":9,"offset":1514},"end":{"line":107,"column":28,"offset":1533}}}],"position":{"start":{"line":107,"column":1,"offset":1506},"end":{"line":107,"column":28,"offset":1533}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"example: ","position":{"start":{"line":109,"column":1,"offset":1535},"end":{"line":109,"column":10,"offset":1544}}},{"type":"raw","value":"<code class=\"language-text\">pipe1.c</code>","position":{"start":{"line":109,"column":10,"offset":1544},"end":{"line":109,"column":19,"offset":1553}}},{"type":"text","value":", ","position":{"start":{"line":109,"column":19,"offset":1553},"end":{"line":109,"column":21,"offset":1555}}},{"type":"raw","value":"<code class=\"language-text\">pipe2.c</code>","position":{"start":{"line":109,"column":21,"offset":1555},"end":{"line":109,"column":30,"offset":1564}}},{"type":"text","value":" 都不知道是什么样的代码。。。","position":{"start":{"line":109,"column":30,"offset":1564},"end":{"line":109,"column":45,"offset":1579}}}],"position":{"start":{"line":109,"column":1,"offset":1535},"end":{"line":109,"column":45,"offset":1579}}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":110,"column":1,"offset":1580}}}}