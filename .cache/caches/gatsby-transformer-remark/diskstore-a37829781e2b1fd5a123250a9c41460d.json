{"expireTime":9007200818315813000,"key":"transformer-remark-markdown-ast-8ee12aff0512dcd085fee6a8ba13f26e-gatsby-remark-katexgatsby-remark-prismjs-","val":{"type":"root","children":[{"type":"heading","depth":2,"children":[{"type":"text","value":"Boot xv6","position":{"start":{"line":2,"column":4,"offset":4},"end":{"line":2,"column":12,"offset":12},"indent":[]}}],"position":{"start":{"line":2,"column":1,"offset":1},"end":{"line":2,"column":12,"offset":12},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"没什么需要做的，都在配置的那片里面介绍过了。","position":{"start":{"line":4,"column":1,"offset":14},"end":{"line":4,"column":23,"offset":36},"indent":[]}}],"position":{"start":{"line":4,"column":1,"offset":14},"end":{"line":4,"column":23,"offset":36},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Finding and breaking at an address","position":{"start":{"line":6,"column":4,"offset":41},"end":{"line":6,"column":38,"offset":75},"indent":[]}}],"position":{"start":{"line":6,"column":1,"offset":38},"end":{"line":6,"column":38,"offset":75},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"首先按照要求，运行：","position":{"start":{"line":8,"column":1,"offset":77},"end":{"line":8,"column":11,"offset":87},"indent":[]}}],"position":{"start":{"line":8,"column":1,"offset":77},"end":{"line":8,"column":11,"offset":87},"indent":[]}},{"type":"html","lang":"bash","meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ nm kernel <span class=\"token operator\">|</span> <span class=\"token function\">grep</span> _start\n8010a48c D _binary_entryother_start\n8010a460 D _binary_initcode_start\n0010000c T _start</code></pre></div>","position":{"start":{"line":10,"column":1,"offset":89},"end":{"line":15,"column":4,"offset":214},"indent":[1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"查manul可以知道，nm的作用是GNU nm lists the symbols from object files objfile. 所以上面的指令就是找到symbol表中含有","position":{"start":{"line":17,"column":1,"offset":216},"end":{"line":17,"column":91,"offset":306},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">_start</code>","position":{"start":{"line":17,"column":91,"offset":306},"end":{"line":17,"column":99,"offset":314},"indent":[]}},{"type":"text","value":"的地方。对","position":{"start":{"line":17,"column":99,"offset":314},"end":{"line":17,"column":104,"offset":319},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">_start</code>","position":{"start":{"line":17,"column":104,"offset":319},"end":{"line":17,"column":112,"offset":327},"indent":[]}},{"type":"text","value":"处设置断点，并运行到这个位置。注意加了断点之后的状态是还没运行这一行的状态！","position":{"start":{"line":17,"column":112,"offset":327},"end":{"line":17,"column":150,"offset":365},"indent":[]}}],"position":{"start":{"line":17,"column":1,"offset":216},"end":{"line":17,"column":150,"offset":365},"indent":[]}},{"type":"html","lang":"bash","meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token punctuation\">(</span>gdb<span class=\"token punctuation\">)</span> br * 0x0010000c\nBreakpoint 1 at 0x10000c\n<span class=\"token punctuation\">(</span>gdb<span class=\"token punctuation\">)</span> c\nContinuing.\nThe target architecture is assumed to be i386\n<span class=\"token operator\">=</span><span class=\"token operator\">></span> 0x10000c:\tmov    %cr4,%eax</code></pre></div>","position":{"start":{"line":19,"column":1,"offset":367},"end":{"line":26,"column":4,"offset":521},"indent":[1,1,1,1,1,1,1]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"exercise: 栈上都有什么？","position":{"start":{"line":28,"column":3,"offset":525},"end":{"line":28,"column":20,"offset":542},"indent":[]}}],"position":{"start":{"line":28,"column":3,"offset":525},"end":{"line":28,"column":20,"offset":542},"indent":[]}}],"position":{"start":{"line":28,"column":1,"offset":523},"end":{"line":28,"column":20,"offset":542},"indent":[]}}],"position":{"start":{"line":28,"column":1,"offset":523},"end":{"line":28,"column":20,"offset":542},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"如下是寄存器存有的信息：","position":{"start":{"line":30,"column":1,"offset":544},"end":{"line":30,"column":13,"offset":556},"indent":[]}}],"position":{"start":{"line":30,"column":1,"offset":544},"end":{"line":30,"column":13,"offset":556},"indent":[]}},{"type":"html","lang":"assembly","meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"assembly\"><pre class=\"language-assembly\"><code class=\"language-assembly\">(gdb) info reg\neax            0x0      0\necx            0x0      0\nedx            0x1f0    496\nebx            0x10074  65652\nesp            0x7bdc   0x7bdc\nebp            0x7bf8   0x7bf8\nesi            0x10074  65652\nedi            0x0      0\neip            0x10000c 0x10000c\neflags         0x46     [ PF ZF ]\ncs             0x8      8\nss             0x10     16\nds             0x10     16\nes             0x10     16\nfs             0x0      0\ngs             0x0      0</code></pre></div>","position":{"start":{"line":32,"column":1,"offset":558},"end":{"line":50,"column":4,"offset":1042},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"寄存器的信息为：","position":{"start":{"line":52,"column":1,"offset":1044},"end":{"line":52,"column":9,"offset":1052},"indent":[]}}],"position":{"start":{"line":52,"column":1,"offset":1044},"end":{"line":52,"column":9,"offset":1052},"indent":[]}},{"type":"html","lang":"assembly","meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"assembly\"><pre class=\"language-assembly\"><code class=\"language-assembly\">(gdb) x/24x $esp\n0x7bdc: 0x00007d8d      0x00000000      0x00000000      0x00000000\n0x7bec: 0x00000000      0x00000000      0x00000000      0x00000000\n0x7bfc: 0x00007c4d      0x8ec031fa      0x8ec08ed8      0xa864e4d0\n0x7c0c: 0xb0fa7502      0xe464e6d1      0x7502a864      0xe6dfb0fa\n0x7c1c: 0x16010f60      0x200f7c78      0xc88366c0      0xc0220f01\n0x7c2c: 0x087c31ea      0x10b86600      0x8ed88e00      0x66d08ec0</code></pre></div>","position":{"start":{"line":54,"column":1,"offset":1054},"end":{"line":62,"column":4,"offset":1488},"indent":[1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"我们的任务是判断哪些部分是真正的栈，且分别是什么意思。","position":{"start":{"line":64,"column":1,"offset":1490},"end":{"line":64,"column":28,"offset":1517},"indent":[]}}],"position":{"start":{"line":64,"column":1,"offset":1490},"end":{"line":64,"column":28,"offset":1517},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"我们从","position":{"start":{"line":66,"column":1,"offset":1519},"end":{"line":66,"column":4,"offset":1522},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">0x7c00</code>","position":{"start":{"line":66,"column":4,"offset":1522},"end":{"line":66,"column":12,"offset":1530},"indent":[]}},{"type":"text","value":"开始重新运行程序，在最开始的时候，寄存器的信息是：","position":{"start":{"line":66,"column":12,"offset":1530},"end":{"line":66,"column":37,"offset":1555},"indent":[]}}],"position":{"start":{"line":66,"column":1,"offset":1519},"end":{"line":66,"column":37,"offset":1555},"indent":[]}},{"type":"html","lang":"assembly","meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"assembly\"><pre class=\"language-assembly\"><code class=\"language-assembly\">(gdb) info reg\neax            0xaa55   43605\necx            0x0      0\nedx            0x80     128\nebx            0x0      0\nesp            0x6f20   0x6f20\nebp            0x0      0x0\nesi            0x0      0\nedi            0x0      0\neip            0x7c00   0x7c00\neflags         0x202    [ IF ]\ncs             0x0      0\nss             0x0      0\nds             0x0      0\nes             0x0      0\nfs             0x0      0\ngs             0x0      0</code></pre></div>","position":{"start":{"line":68,"column":1,"offset":1557},"end":{"line":86,"column":4,"offset":2026},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"也就是说，最开始的时候esp指向0x6f20。","position":{"start":{"line":88,"column":1,"offset":2028},"end":{"line":88,"column":24,"offset":2051},"indent":[]}}],"position":{"start":{"line":88,"column":1,"offset":2028},"end":{"line":88,"column":24,"offset":2051},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"第一次运行","position":{"start":{"line":90,"column":1,"offset":2053},"end":{"line":90,"column":6,"offset":2058},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">%esp</code>","position":{"start":{"line":90,"column":6,"offset":2058},"end":{"line":90,"column":12,"offset":2064},"indent":[]}},{"type":"text","value":"相关的代码，在","position":{"start":{"line":90,"column":12,"offset":2064},"end":{"line":90,"column":19,"offset":2071},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">bootasm.S</code>","position":{"start":{"line":90,"column":19,"offset":2071},"end":{"line":90,"column":30,"offset":2082},"indent":[]}},{"type":"text","value":"的","position":{"start":{"line":90,"column":30,"offset":2082},"end":{"line":90,"column":31,"offset":2083},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">call bootmain</code>","position":{"start":{"line":90,"column":31,"offset":2083},"end":{"line":90,"column":46,"offset":2098},"indent":[]}},{"type":"text","value":"之上，把","position":{"start":{"line":90,"column":46,"offset":2098},"end":{"line":90,"column":50,"offset":2102},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">$start</code>","position":{"start":{"line":90,"column":50,"offset":2102},"end":{"line":90,"column":58,"offset":2110},"indent":[]}},{"type":"text","value":"(具体值是0x7c00)付给%esp","position":{"start":{"line":90,"column":58,"offset":2110},"end":{"line":90,"column":76,"offset":2128},"indent":[]}}],"position":{"start":{"line":90,"column":1,"offset":2053},"end":{"line":90,"column":76,"offset":2128},"indent":[]}},{"type":"html","lang":"assembly","meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"assembly\"><pre class=\"language-assembly\"><code class=\"language-assembly\">movl    $start, %esp\ncall\tbootmain</code></pre></div>","position":{"start":{"line":92,"column":1,"offset":2130},"end":{"line":95,"column":4,"offset":2180},"indent":[1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"也就是在运行","position":{"start":{"line":97,"column":1,"offset":2182},"end":{"line":97,"column":7,"offset":2188},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">bootmain</code>","position":{"start":{"line":97,"column":7,"offset":2188},"end":{"line":97,"column":17,"offset":2198},"indent":[]}},{"type":"text","value":"之前，","position":{"start":{"line":97,"column":17,"offset":2198},"end":{"line":97,"column":20,"offset":2201},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">%esp</code>","position":{"start":{"line":97,"column":20,"offset":2201},"end":{"line":97,"column":26,"offset":2207},"indent":[]}},{"type":"text","value":"的值为","position":{"start":{"line":97,"column":26,"offset":2207},"end":{"line":97,"column":29,"offset":2210},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">0x7c00</code>","position":{"start":{"line":97,"column":29,"offset":2210},"end":{"line":97,"column":37,"offset":2218},"indent":[]}},{"type":"text","value":"，","position":{"start":{"line":97,"column":37,"offset":2218},"end":{"line":97,"column":38,"offset":2219},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">0x7c00</code>","position":{"start":{"line":97,"column":38,"offset":2219},"end":{"line":97,"column":46,"offset":2227},"indent":[]}},{"type":"text","value":"之后的地址都是无用的，所以实际上上面有用的栈是：","position":{"start":{"line":97,"column":46,"offset":2227},"end":{"line":97,"column":70,"offset":2251},"indent":[]}}],"position":{"start":{"line":97,"column":1,"offset":2182},"end":{"line":97,"column":70,"offset":2251},"indent":[]}},{"type":"html","lang":"assembly","meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"assembly\"><pre class=\"language-assembly\"><code class=\"language-assembly\">0x7bdc: 0x00007d8d      0x00000000      0x00000000      0x00000000\n0x7bec: 0x00000000      0x00000000      0x00000000      0x00000000\n0x7bfc: 0x00007c4d      </code></pre></div>","position":{"start":{"line":99,"column":1,"offset":2253},"end":{"line":103,"column":4,"offset":2427},"indent":[1,1,1,1]}},{"type":"paragraph","children":[{"type":"html","value":"<code class=\"language-text\">call</code>","position":{"start":{"line":105,"column":1,"offset":2429},"end":{"line":105,"column":7,"offset":2435},"indent":[]}},{"type":"text","value":"指令把","position":{"start":{"line":105,"column":7,"offset":2435},"end":{"line":105,"column":10,"offset":2438},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">%eip</code>","position":{"start":{"line":105,"column":10,"offset":2438},"end":{"line":105,"column":16,"offset":2444},"indent":[]}},{"type":"text","value":" push进来了。","position":{"start":{"line":105,"column":16,"offset":2444},"end":{"line":105,"column":25,"offset":2453},"indent":[]}}],"position":{"start":{"line":105,"column":1,"offset":2429},"end":{"line":105,"column":25,"offset":2453},"indent":[]}},{"type":"html","lang":"assembly","meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"assembly\"><pre class=\"language-assembly\"><code class=\"language-assembly\">0x7bfc: 0x00007c4d # bootmain的返回地址</code></pre></div>","position":{"start":{"line":107,"column":1,"offset":2455},"end":{"line":109,"column":4,"offset":2505},"indent":[1,1]}},{"type":"paragraph","children":[{"type":"text","value":"之后进入","position":{"start":{"line":111,"column":1,"offset":2507},"end":{"line":111,"column":5,"offset":2511},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">bootmain</code>","position":{"start":{"line":111,"column":5,"offset":2511},"end":{"line":111,"column":15,"offset":2521},"indent":[]}},{"type":"text","value":"，首先运行function prologue，也就是把main外面环境的的%ebp (frame address)存在%esp中，所以","position":{"start":{"line":111,"column":15,"offset":2521},"end":{"line":111,"column":82,"offset":2588},"indent":[]}}],"position":{"start":{"line":111,"column":1,"offset":2507},"end":{"line":111,"column":82,"offset":2588},"indent":[]}},{"type":"html","lang":"assembly","meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"assembly\"><pre class=\"language-assembly\"><code class=\"language-assembly\">0x7bf8: 0x00000000 # ebp，因为外面没有frame了，是0</code></pre></div>","position":{"start":{"line":113,"column":1,"offset":2590},"end":{"line":115,"column":4,"offset":2646},"indent":[1,1]}},{"type":"paragraph","children":[{"type":"text","value":"以及bootmain的","position":{"start":{"line":117,"column":1,"offset":2648},"end":{"line":117,"column":12,"offset":2659},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">%ebp</code>","position":{"start":{"line":117,"column":12,"offset":2659},"end":{"line":117,"column":18,"offset":2665},"indent":[]}},{"type":"text","value":"为","position":{"start":{"line":117,"column":18,"offset":2665},"end":{"line":117,"column":19,"offset":2666},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">0x7bf8,</code>","position":{"start":{"line":117,"column":19,"offset":2666},"end":{"line":117,"column":29,"offset":2676},"indent":[]}},{"type":"text","value":"info reg`可以证明这点","position":{"start":{"line":117,"column":29,"offset":2676},"end":{"line":117,"column":44,"offset":2691},"indent":[]}}],"position":{"start":{"line":117,"column":1,"offset":2648},"end":{"line":117,"column":44,"offset":2691},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"之后连续进行3个","position":{"start":{"line":119,"column":1,"offset":2693},"end":{"line":119,"column":9,"offset":2701},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">push</code>","position":{"start":{"line":119,"column":9,"offset":2701},"end":{"line":119,"column":15,"offset":2707},"indent":[]}}],"position":{"start":{"line":119,"column":1,"offset":2693},"end":{"line":119,"column":15,"offset":2707},"indent":[]}},{"type":"html","lang":"assembly","meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"assembly\"><pre class=\"language-assembly\"><code class=\"language-assembly\">(gdb) si\n=&gt; 0x7d3e:      push   %edi\n0x00007d3e in ?? ()\n(gdb) si\n=&gt; 0x7d3f:      push   %esi\n0x00007d3f in ?? ()\n(gdb) si\n=&gt; 0x7d40:      push   %ebx\n0x00007d40 in ?? ()\n(gdb) w/4x $esp\nAmbiguous command &quot;w/4x $esp&quot;: .\n(gdb) x/4x $esp\n0x7bf0: 0x00000000      0x00000000      0x00000000      0x00007c4d</code></pre></div>","position":{"start":{"line":121,"column":1,"offset":2709},"end":{"line":135,"column":4,"offset":3027},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"所以：","position":{"start":{"line":137,"column":1,"offset":3029},"end":{"line":137,"column":4,"offset":3032},"indent":[]}}],"position":{"start":{"line":137,"column":1,"offset":3029},"end":{"line":137,"column":4,"offset":3032},"indent":[]}},{"type":"html","lang":"assembly","meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"assembly\"><pre class=\"language-assembly\"><code class=\"language-assembly\">0x7bf4: 0x00000000 # edi\n0x7bf0: 0x00000000 # esi\n0x7bec: 0x00000000 # ebx</code></pre></div>","position":{"start":{"line":139,"column":1,"offset":3034},"end":{"line":143,"column":4,"offset":3124},"indent":[1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"之后","position":{"start":{"line":145,"column":1,"offset":3126},"end":{"line":145,"column":3,"offset":3128},"indent":[]}}],"position":{"start":{"line":145,"column":1,"offset":3126},"end":{"line":145,"column":3,"offset":3128},"indent":[]}},{"type":"html","lang":"assembly","meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"assembly\"><pre class=\"language-assembly\"><code class=\"language-assembly\">(gdb) si\n=&gt; 0x7d41:      sub    $0xc,%esp\n0x00007d41 in ?? ()</code></pre></div>","position":{"start":{"line":147,"column":1,"offset":3130},"end":{"line":151,"column":4,"offset":3207},"indent":[1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"这之后","position":{"start":{"line":153,"column":1,"offset":3209},"end":{"line":153,"column":4,"offset":3212},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">%esp</code>","position":{"start":{"line":153,"column":4,"offset":3212},"end":{"line":153,"column":10,"offset":3218},"indent":[]}},{"type":"text","value":"仅仅缩小了12","position":{"start":{"line":153,"column":10,"offset":3218},"end":{"line":153,"column":17,"offset":3225},"indent":[]}}],"position":{"start":{"line":153,"column":1,"offset":3209},"end":{"line":153,"column":17,"offset":3225},"indent":[]}},{"type":"html","lang":"assembly","meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"assembly\"><pre class=\"language-assembly\"><code class=\"language-assembly\">0x7be8: 0x00000000 # 空的\n0x7be4: 0x00000000 # 空的\n0x7be0: 0x00000000 # 空的</code></pre></div>","position":{"start":{"line":155,"column":1,"offset":3227},"end":{"line":159,"column":4,"offset":3314},"indent":[1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"之后为","position":{"start":{"line":161,"column":1,"offset":3316},"end":{"line":161,"column":4,"offset":3319},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">readseg</code>","position":{"start":{"line":161,"column":4,"offset":3319},"end":{"line":161,"column":13,"offset":3328},"indent":[]}},{"type":"text","value":"做准备，先把3个参数依倒叙传入，进行了三个push","position":{"start":{"line":161,"column":13,"offset":3328},"end":{"line":161,"column":38,"offset":3353},"indent":[]}}],"position":{"start":{"line":161,"column":1,"offset":3316},"end":{"line":161,"column":38,"offset":3353},"indent":[]}},{"type":"html","lang":"assembly","meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"assembly\"><pre class=\"language-assembly\"><code class=\"language-assembly\">(gdb) si\n=&gt; 0x7d44:      push   $0x0\n0x00007d44 in ?? ()\n(gdb) si\n=&gt; 0x7d46:      push   $0x1000\n0x00007d46 in ?? ()\n(gdb) si\n=&gt; 0x7d4b:      push   $0x10000</code></pre></div>","position":{"start":{"line":163,"column":1,"offset":3355},"end":{"line":172,"column":4,"offset":3528},"indent":[1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"这时，","position":{"start":{"line":174,"column":1,"offset":3530},"end":{"line":174,"column":4,"offset":3533},"indent":[]}}],"position":{"start":{"line":174,"column":1,"offset":3530},"end":{"line":174,"column":4,"offset":3533},"indent":[]}},{"type":"html","lang":"assembly","meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"assembly\"><pre class=\"language-assembly\"><code class=\"language-assembly\"># readseg的3个参数\n0x7bdc: 0x00000000 # offset\n0x7bd8: 0x00001000 # count\n0x7bd4: 0x00010000 # pa</code></pre></div>","position":{"start":{"line":176,"column":1,"offset":3535},"end":{"line":181,"column":4,"offset":3644},"indent":[1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"然后","position":{"start":{"line":183,"column":1,"offset":3646},"end":{"line":183,"column":3,"offset":3648},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">call readseg</code>","position":{"start":{"line":183,"column":3,"offset":3648},"end":{"line":183,"column":17,"offset":3662},"indent":[]}}],"position":{"start":{"line":183,"column":1,"offset":3646},"end":{"line":183,"column":17,"offset":3662},"indent":[]}},{"type":"html","lang":"assembly","meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"assembly\"><pre class=\"language-assembly\"><code class=\"language-assembly\">(gdb) si\n=&gt; 0x7d50:      call   0x7cf8</code></pre></div>","position":{"start":{"line":185,"column":1,"offset":3664},"end":{"line":188,"column":4,"offset":3718},"indent":[1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"依然是会把","position":{"start":{"line":190,"column":1,"offset":3720},"end":{"line":190,"column":6,"offset":3725},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">%eip</code>","position":{"start":{"line":190,"column":6,"offset":3725},"end":{"line":190,"column":12,"offset":3731},"indent":[]}},{"type":"text","value":"推进去","position":{"start":{"line":190,"column":12,"offset":3731},"end":{"line":190,"column":15,"offset":3734},"indent":[]}}],"position":{"start":{"line":190,"column":1,"offset":3720},"end":{"line":190,"column":15,"offset":3734},"indent":[]}},{"type":"html","lang":"assembly","meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"assembly\"><pre class=\"language-assembly\"><code class=\"language-assembly\">0x7bd0: 0x00007d55 # readseg的return address</code></pre></div>","position":{"start":{"line":192,"column":1,"offset":3736},"end":{"line":194,"column":4,"offset":3795},"indent":[1,1]}},{"type":"paragraph","children":[{"type":"text","value":"然后运行","position":{"start":{"line":196,"column":1,"offset":3797},"end":{"line":196,"column":5,"offset":3801},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">readseg</code>","position":{"start":{"line":196,"column":5,"offset":3801},"end":{"line":196,"column":14,"offset":3810},"indent":[]}},{"type":"text","value":"的function prologue：","position":{"start":{"line":196,"column":14,"offset":3810},"end":{"line":196,"column":33,"offset":3829},"indent":[]}}],"position":{"start":{"line":196,"column":1,"offset":3797},"end":{"line":196,"column":33,"offset":3829},"indent":[]}},{"type":"html","lang":"assembly","meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"assembly\"><pre class=\"language-assembly\"><code class=\"language-assembly\">(gdb) si\n=&gt; 0x7cf8:      push   %ebp\n0x00007cf8 in ?? ()\n(gdb) si\n=&gt; 0x7cf9:      mov    %esp,%ebp\n0x00007cf9 in ?? ()</code></pre></div>","position":{"start":{"line":198,"column":1,"offset":3831},"end":{"line":205,"column":4,"offset":3965},"indent":[1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"就会有","position":{"start":{"line":207,"column":1,"offset":3967},"end":{"line":207,"column":4,"offset":3970},"indent":[]}}],"position":{"start":{"line":207,"column":1,"offset":3967},"end":{"line":207,"column":4,"offset":3970},"indent":[]}},{"type":"html","lang":"assembly","meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"assembly\"><pre class=\"language-assembly\"><code class=\"language-assembly\">0x7bcc: 0x00007bf8 # bootmain的frame address</code></pre></div>","position":{"start":{"line":209,"column":1,"offset":3972},"end":{"line":211,"column":4,"offset":4031},"indent":[1,1]}},{"type":"paragraph","children":[{"type":"text","value":"同事","position":{"start":{"line":213,"column":1,"offset":4033},"end":{"line":213,"column":3,"offset":4035},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">%ebp</code>","position":{"start":{"line":213,"column":3,"offset":4035},"end":{"line":213,"column":9,"offset":4041},"indent":[]}},{"type":"text","value":"变为","position":{"start":{"line":213,"column":9,"offset":4041},"end":{"line":213,"column":11,"offset":4043},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">0x7bcc</code>","position":{"start":{"line":213,"column":11,"offset":4043},"end":{"line":213,"column":19,"offset":4051},"indent":[]}},{"type":"text","value":"。","position":{"start":{"line":213,"column":19,"offset":4051},"end":{"line":213,"column":20,"offset":4052},"indent":[]}}],"position":{"start":{"line":213,"column":1,"offset":4033},"end":{"line":213,"column":20,"offset":4052},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"之后依然是3个push，","position":{"start":{"line":215,"column":1,"offset":4054},"end":{"line":215,"column":13,"offset":4066},"indent":[]}}],"position":{"start":{"line":215,"column":1,"offset":4054},"end":{"line":215,"column":13,"offset":4066},"indent":[]}},{"type":"html","lang":"assembly","meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"assembly\"><pre class=\"language-assembly\"><code class=\"language-assembly\">(gdb) si\n=&gt; 0x7cfb:      push   %edi\n0x00007cfb in ?? ()\n(gdb) si\n=&gt; 0x7cfc:      push   %esi\n0x00007cfc in ?? ()\n(gdb) si\n=&gt; 0x7cfd:      push   %ebx\n0x00007cfd in ?? ()</code></pre></div>","position":{"start":{"line":217,"column":1,"offset":4068},"end":{"line":227,"column":4,"offset":4254},"indent":[1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"仍然是推进去3个0，","position":{"start":{"line":229,"column":1,"offset":4256},"end":{"line":229,"column":11,"offset":4266},"indent":[]}}],"position":{"start":{"line":229,"column":1,"offset":4256},"end":{"line":229,"column":11,"offset":4266},"indent":[]}},{"type":"html","lang":"assembly","meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"assembly\"><pre class=\"language-assembly\"><code class=\"language-assembly\">0x7bc8: 0x00000000 # edi\n0x7bc4: 0x00000000 # esi\n0x7bc0: 0x00000000 # ebx</code></pre></div>","position":{"start":{"line":231,"column":1,"offset":4268},"end":{"line":235,"column":4,"offset":4358},"indent":[1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"后面就非常类似了，这里叙述的栈的内容已经超过需要的了，之所以会超过是因为之后","position":{"start":{"line":237,"column":1,"offset":4360},"end":{"line":237,"column":39,"offset":4398},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">readseg</code>","position":{"start":{"line":237,"column":39,"offset":4398},"end":{"line":237,"column":48,"offset":4407},"indent":[]}},{"type":"text","value":"函数返回会退出来很多。","position":{"start":{"line":237,"column":48,"offset":4407},"end":{"line":237,"column":59,"offset":4418},"indent":[]}}],"position":{"start":{"line":237,"column":1,"offset":4360},"end":{"line":237,"column":59,"offset":4418},"indent":[]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":239,"column":1,"offset":4420}}}}