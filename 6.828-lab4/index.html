<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/app.56c9a2e0f17d43243a15.css">code[class*=language-],pre[class*=language-]{color:#000;background:none;text-shadow:0 1px #fff;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}code[class*=language-]::selection,code[class*=language-] ::selection,pre[class*=language-]::selection,pre[class*=language-] ::selection{text-shadow:none;background:#b3d4fc}@media print{code[class*=language-],pre[class*=language-]{text-shadow:none}}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#f5f2f0}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#708090}.token.punctuation{color:#999}.namespace{opacity:.7}.token.boolean,.token.constant,.token.deleted,.token.number,.token.property,.token.symbol,.token.tag{color:#905}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#690}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url{color:#9a6e3a;background:hsla(0,0%,100%,.5)}.token.atrule,.token.attr-value,.token.keyword{color:#07a}.token.class-name,.token.function{color:#dd4a68}.token.important,.token.regex,.token.variable{color:#e90}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}blockquote{font-size:inherit!important}</style><style data-href="/8.3c33cec17338a872593f.css">@font-face{font-family:KaTeX_AMS;font-style:normal;font-weight:400;src:url(/static/KaTeX_AMS-Regular-cd28a1d7203aef546e0f7733d98e8ea9.woff2) format("woff2"),url(/static/KaTeX_AMS-Regular-b2d929640f68a1bd67eff3ebd331159a.woff) format("woff"),url(/static/KaTeX_AMS-Regular-dffd527d95ed83d58fc7a8f88e10b2fe.ttf) format("truetype")}@font-face{font-family:KaTeX_Caligraphic;font-style:normal;font-weight:700;src:url(/static/KaTeX_Caligraphic-Bold-42a984df9caeef0f96fa6234a41ff1a3.woff2) format("woff2"),url(/static/KaTeX_Caligraphic-Bold-fe8c221065dcbfe529cd2d201bf6baa6.woff) format("woff"),url(/static/KaTeX_Caligraphic-Bold-c7e386dd35c841d1a8f9e11fd1a11010.ttf) format("truetype")}@font-face{font-family:KaTeX_Caligraphic;font-style:normal;font-weight:400;src:url(/static/KaTeX_Caligraphic-Regular-7f4bec7c908e337d660adcdf9a6abbe7.woff2) format("woff2"),url(/static/KaTeX_Caligraphic-Regular-93a79e01c9abee39413ba14acb3e5d33.woff) format("woff"),url(/static/KaTeX_Caligraphic-Regular-d04d48408d923e5bb6883a514481b7d8.ttf) format("truetype")}@font-face{font-family:KaTeX_Fraktur;font-style:normal;font-weight:700;src:url(/static/KaTeX_Fraktur-Bold-b1a879453aae1660b06d5941c50457c5.woff2) format("woff2"),url(/static/KaTeX_Fraktur-Bold-8c43064fdc3bf45ee62e8a22e856a793.woff) format("woff"),url(/static/KaTeX_Fraktur-Bold-9b1486220b5ca974aaceebbf70e1f087.ttf) format("truetype")}@font-face{font-family:KaTeX_Fraktur;font-style:normal;font-weight:400;src:url(/static/KaTeX_Fraktur-Regular-e21a6db7f372856ebfd6a278b56b8c7d.woff2) format("woff2"),url(/static/KaTeX_Fraktur-Regular-801690bb2f2a87a0e536da498ea4709c.woff) format("woff"),url(/static/KaTeX_Fraktur-Regular-576266ad7ee52fe0285e1f8a76163d65.ttf) format("truetype")}@font-face{font-family:KaTeX_Main;font-style:normal;font-weight:700;src:url(/static/KaTeX_Main-Bold-2057e5cbb505134b0a620e681abc5070.woff2) format("woff2"),url(/static/KaTeX_Main-Bold-0dee09596a43df990fdefbe5ed207b2b.woff) format("woff"),url(/static/KaTeX_Main-Bold-e493181d2a1b6a1f47d1a8d5c28bca9f.ttf) format("truetype")}@font-face{font-family:KaTeX_Main;font-style:italic;font-weight:700;src:url(/static/KaTeX_Main-BoldItalic-2484936f0b130a0d2bb745766058b46d.woff2) format("woff2"),url(/static/KaTeX_Main-BoldItalic-a4ed2b019d879955fa4c53795b385a8f.woff) format("woff"),url(/static/KaTeX_Main-BoldItalic-a879e3a8b3c0431c9861995e7dfe937f.ttf) format("truetype")}@font-face{font-family:KaTeX_Main;font-style:italic;font-weight:400;src:url(/static/KaTeX_Main-Italic-c9d5a32d1fc4b3fa10f87a8e2859a1f3.woff2) format("woff2"),url(/static/KaTeX_Main-Italic-6d2cd8f026ffffcf0a708842a7435a2a.woff) format("woff"),url(/static/KaTeX_Main-Italic-162d57530c14801de233decbf44a77e6.ttf) format("truetype")}@font-face{font-family:KaTeX_Main;font-style:normal;font-weight:400;src:url(/static/KaTeX_Main-Regular-a547140c5430ed97183f87d9fa247890.woff2) format("woff2"),url(/static/KaTeX_Main-Regular-54e5ba96f2f716715619f7b8433f1d36.woff) format("woff"),url(/static/KaTeX_Main-Regular-424335d97ef5548890673af99f4136b4.ttf) format("truetype")}@font-face{font-family:KaTeX_Math;font-style:italic;font-weight:700;src:url(/static/KaTeX_Math-BoldItalic-96b229786edd80e54fa2b68c5f032960.woff2) format("woff2"),url(/static/KaTeX_Math-BoldItalic-6091397cdc326cf8c8f7b648e2341483.woff) format("woff"),url(/static/KaTeX_Math-BoldItalic-d081a42411cc6f54d404ee2de6e63a41.ttf) format("truetype")}@font-face{font-family:KaTeX_Math;font-style:italic;font-weight:400;src:url(/static/KaTeX_Math-Italic-4b3b168e2b5e74b24c10acd7316488d1.woff2) format("woff2"),url(/static/KaTeX_Math-Italic-dc91856176c1350f1ee303851a422277.woff) format("woff"),url(/static/KaTeX_Math-Italic-5d2baf751ed4a4df0ca2dbba04058de8.ttf) format("truetype")}@font-face{font-family:"KaTeX_SansSerif";font-style:normal;font-weight:700;src:url(/static/KaTeX_SansSerif-Bold-91efef29a1be79a5318d77bfb6256213.woff2) format("woff2"),url(/static/KaTeX_SansSerif-Bold-e08eb4331e7db133b6d2e355cd74724a.woff) format("woff"),url(/static/KaTeX_SansSerif-Bold-4c2a414abb99038cdc7d84d9711d06b2.ttf) format("truetype")}@font-face{font-family:"KaTeX_SansSerif";font-style:italic;font-weight:400;src:url(/static/KaTeX_SansSerif-Italic-ff63137930f4ab783837f2eba5cc5f16.woff2) format("woff2"),url(/static/KaTeX_SansSerif-Italic-ada012c291bf50cf9a349ceb98df6659.woff) format("woff"),url(/static/KaTeX_SansSerif-Italic-66bab6babbbcb45ee13301e20516eb6a.ttf) format("truetype")}@font-face{font-family:"KaTeX_SansSerif";font-style:normal;font-weight:400;src:url(/static/KaTeX_SansSerif-Regular-fd6852d4ac7b37575a7fea0708355ce3.woff2) format("woff2"),url(/static/KaTeX_SansSerif-Regular-c789d74a74097a2e9a1bb50f8714b531.woff) format("woff"),url(/static/KaTeX_SansSerif-Regular-066914d0bdc0607d66621bfefcac72bc.ttf) format("truetype")}@font-face{font-family:KaTeX_Script;font-style:normal;font-weight:400;src:url(/static/KaTeX_Script-Regular-ec3e4a5540df883fa3147f8a5e83287b.woff2) format("woff2"),url(/static/KaTeX_Script-Regular-ae1b970213f3e1098abfb03679e22111.woff) format("woff"),url(/static/KaTeX_Script-Regular-85007a59906b95d94b5b06619fde46aa.ttf) format("truetype")}@font-face{font-family:KaTeX_Size1;font-style:normal;font-weight:400;src:url(data:font/woff2;base64,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) format("woff2"),url(data:font/woff;base64,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) format("woff"),url(/static/KaTeX_Size1-Regular-923e515d161a541174ba0f71e1adb54e.ttf) format("truetype")}@font-face{font-family:KaTeX_Size2;font-style:normal;font-weight:400;src:url(data:font/woff2;base64,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) format("woff2"),url(data:font/woff;base64,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) format("woff"),url(/static/KaTeX_Size2-Regular-e3717988fb1ebd63efd10fd2e05568bc.ttf) format("truetype")}@font-face{font-family:KaTeX_Size3;font-style:normal;font-weight:400;src:url(data:font/woff2;base64,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) format("woff2"),url(data:font/woff;base64,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) format("woff"),url(data:font/ttf;base64,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) format("truetype")}@font-face{font-family:KaTeX_Size4;font-style:normal;font-weight:400;src:url(data:font/woff2;base64,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) format("woff2"),url(data:font/woff;base64,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) format("woff"),url(/static/KaTeX_Size4-Regular-b790cf180d62ae91960d6b46cbb3905e.ttf) format("truetype")}@font-face{font-family:KaTeX_Typewriter;font-style:normal;font-weight:400;src:url(/static/KaTeX_Typewriter-Regular-efae4055ace527ee04a22212edd721e5.woff2) format("woff2"),url(/static/KaTeX_Typewriter-Regular-6a862f8ff236e321e04c326a32eb8a49.woff) format("woff"),url(/static/KaTeX_Typewriter-Regular-dbf31d0ed38be8d16e4386e27b18de9d.ttf) format("truetype")}.katex{font:normal 1.21em KaTeX_Main,Times New Roman,serif;line-height:1.2;text-indent:0;text-rendering:auto}.katex *{-ms-high-contrast-adjust:none!important}.katex .katex-mathml{border:0;clip:rect(1px,1px,1px,1px);height:1px;overflow:hidden;padding:0;position:absolute;width:1px}.katex .katex-html>.newline{display:block}.katex .base{position:relative;white-space:nowrap;width:-webkit-min-content;width:-moz-min-content;width:min-content}.katex .base,.katex .strut{display:inline-block}.katex .textbf{font-weight:700}.katex .textit{font-style:italic}.katex .textrm{font-family:KaTeX_Main}.katex .textsf{font-family:KaTeX_SansSerif}.katex .texttt{font-family:KaTeX_Typewriter}.katex .mathdefault{font-family:KaTeX_Math;font-style:italic}.katex .mathit{font-family:KaTeX_Main;font-style:italic}.katex .mathrm{font-style:normal}.katex .mathbf{font-family:KaTeX_Main;font-weight:700}.katex .boldsymbol{font-family:KaTeX_Math;font-style:italic;font-weight:700}.katex .amsrm,.katex .mathbb,.katex .textbb{font-family:KaTeX_AMS}.katex .mathcal{font-family:KaTeX_Caligraphic}.katex .mathfrak,.katex .textfrak{font-family:KaTeX_Fraktur}.katex .mathtt{font-family:KaTeX_Typewriter}.katex .mathscr,.katex .textscr{font-family:KaTeX_Script}.katex .mathsf,.katex .textsf{font-family:KaTeX_SansSerif}.katex .mathboldsf,.katex .textboldsf{font-family:KaTeX_SansSerif;font-weight:700}.katex .mathitsf,.katex .textitsf{font-family:KaTeX_SansSerif;font-style:italic}.katex .mainrm{font-family:KaTeX_Main;font-style:normal}.katex .vlist-t{display:inline-table;table-layout:fixed}.katex .vlist-r{display:table-row}.katex .vlist{display:table-cell;position:relative;vertical-align:bottom}.katex .vlist>span{display:block;height:0;position:relative}.katex .vlist>span>span{display:inline-block}.katex .vlist>span>.pstrut{overflow:hidden;width:0}.katex .vlist-t2{margin-right:-2px}.katex .vlist-s{display:table-cell;font-size:1px;min-width:2px;vertical-align:bottom;width:2px}.katex .msupsub{text-align:left}.katex .mfrac>span>span{text-align:center}.katex .mfrac .frac-line{border-bottom-style:solid;display:inline-block;width:100%}.katex .hdashline,.katex .hline,.katex .mfrac .frac-line,.katex .overline .overline-line,.katex .rule,.katex .underline .underline-line{min-height:1px}.katex .mspace{display:inline-block}.katex .clap,.katex .llap,.katex .rlap{position:relative;width:0}.katex .clap>.inner,.katex .llap>.inner,.katex .rlap>.inner{position:absolute}.katex .clap>.fix,.katex .llap>.fix,.katex .rlap>.fix{display:inline-block}.katex .llap>.inner{right:0}.katex .clap>.inner,.katex .rlap>.inner{left:0}.katex .clap>.inner>span{margin-left:-50%;margin-right:50%}.katex .rule{border:0 solid;display:inline-block;position:relative}.katex .hline,.katex .overline .overline-line,.katex .underline .underline-line{border-bottom-style:solid;display:inline-block;width:100%}.katex .hdashline{border-bottom-style:dashed;display:inline-block;width:100%}.katex .sqrt>.root{margin-left:.27777778em;margin-right:-.55555556em}.katex .fontsize-ensurer,.katex .sizing{display:inline-block}.katex .fontsize-ensurer.reset-size1.size1,.katex .sizing.reset-size1.size1{font-size:1em}.katex .fontsize-ensurer.reset-size1.size2,.katex .sizing.reset-size1.size2{font-size:1.2em}.katex .fontsize-ensurer.reset-size1.size3,.katex .sizing.reset-size1.size3{font-size:1.4em}.katex .fontsize-ensurer.reset-size1.size4,.katex .sizing.reset-size1.size4{font-size:1.6em}.katex .fontsize-ensurer.reset-size1.size5,.katex .sizing.reset-size1.size5{font-size:1.8em}.katex .fontsize-ensurer.reset-size1.size6,.katex .sizing.reset-size1.size6{font-size:2em}.katex .fontsize-ensurer.reset-size1.size7,.katex .sizing.reset-size1.size7{font-size:2.4em}.katex .fontsize-ensurer.reset-size1.size8,.katex .sizing.reset-size1.size8{font-size:2.88em}.katex .fontsize-ensurer.reset-size1.size9,.katex .sizing.reset-size1.size9{font-size:3.456em}.katex .fontsize-ensurer.reset-size1.size10,.katex .sizing.reset-size1.size10{font-size:4.148em}.katex .fontsize-ensurer.reset-size1.size11,.katex .sizing.reset-size1.size11{font-size:4.976em}.katex .fontsize-ensurer.reset-size2.size1,.katex .sizing.reset-size2.size1{font-size:.83333333em}.katex .fontsize-ensurer.reset-size2.size2,.katex .sizing.reset-size2.size2{font-size:1em}.katex .fontsize-ensurer.reset-size2.size3,.katex .sizing.reset-size2.size3{font-size:1.16666667em}.katex .fontsize-ensurer.reset-size2.size4,.katex .sizing.reset-size2.size4{font-size:1.33333333em}.katex .fontsize-ensurer.reset-size2.size5,.katex .sizing.reset-size2.size5{font-size:1.5em}.katex .fontsize-ensurer.reset-size2.size6,.katex .sizing.reset-size2.size6{font-size:1.66666667em}.katex .fontsize-ensurer.reset-size2.size7,.katex .sizing.reset-size2.size7{font-size:2em}.katex .fontsize-ensurer.reset-size2.size8,.katex .sizing.reset-size2.size8{font-size:2.4em}.katex .fontsize-ensurer.reset-size2.size9,.katex .sizing.reset-size2.size9{font-size:2.88em}.katex .fontsize-ensurer.reset-size2.size10,.katex .sizing.reset-size2.size10{font-size:3.45666667em}.katex .fontsize-ensurer.reset-size2.size11,.katex .sizing.reset-size2.size11{font-size:4.14666667em}.katex .fontsize-ensurer.reset-size3.size1,.katex .sizing.reset-size3.size1{font-size:.71428571em}.katex .fontsize-ensurer.reset-size3.size2,.katex .sizing.reset-size3.size2{font-size:.85714286em}.katex .fontsize-ensurer.reset-size3.size3,.katex .sizing.reset-size3.size3{font-size:1em}.katex .fontsize-ensurer.reset-size3.size4,.katex .sizing.reset-size3.size4{font-size:1.14285714em}.katex .fontsize-ensurer.reset-size3.size5,.katex .sizing.reset-size3.size5{font-size:1.28571429em}.katex .fontsize-ensurer.reset-size3.size6,.katex .sizing.reset-size3.size6{font-size:1.42857143em}.katex .fontsize-ensurer.reset-size3.size7,.katex .sizing.reset-size3.size7{font-size:1.71428571em}.katex .fontsize-ensurer.reset-size3.size8,.katex .sizing.reset-size3.size8{font-size:2.05714286em}.katex .fontsize-ensurer.reset-size3.size9,.katex .sizing.reset-size3.size9{font-size:2.46857143em}.katex .fontsize-ensurer.reset-size3.size10,.katex .sizing.reset-size3.size10{font-size:2.96285714em}.katex .fontsize-ensurer.reset-size3.size11,.katex .sizing.reset-size3.size11{font-size:3.55428571em}.katex .fontsize-ensurer.reset-size4.size1,.katex .sizing.reset-size4.size1{font-size:.625em}.katex .fontsize-ensurer.reset-size4.size2,.katex .sizing.reset-size4.size2{font-size:.75em}.katex .fontsize-ensurer.reset-size4.size3,.katex .sizing.reset-size4.size3{font-size:.875em}.katex .fontsize-ensurer.reset-size4.size4,.katex .sizing.reset-size4.size4{font-size:1em}.katex .fontsize-ensurer.reset-size4.size5,.katex .sizing.reset-size4.size5{font-size:1.125em}.katex .fontsize-ensurer.reset-size4.size6,.katex .sizing.reset-size4.size6{font-size:1.25em}.katex .fontsize-ensurer.reset-size4.size7,.katex .sizing.reset-size4.size7{font-size:1.5em}.katex .fontsize-ensurer.reset-size4.size8,.katex .sizing.reset-size4.size8{font-size:1.8em}.katex .fontsize-ensurer.reset-size4.size9,.katex .sizing.reset-size4.size9{font-size:2.16em}.katex .fontsize-ensurer.reset-size4.size10,.katex .sizing.reset-size4.size10{font-size:2.5925em}.katex .fontsize-ensurer.reset-size4.size11,.katex .sizing.reset-size4.size11{font-size:3.11em}.katex .fontsize-ensurer.reset-size5.size1,.katex .sizing.reset-size5.size1{font-size:.55555556em}.katex .fontsize-ensurer.reset-size5.size2,.katex .sizing.reset-size5.size2{font-size:.66666667em}.katex .fontsize-ensurer.reset-size5.size3,.katex .sizing.reset-size5.size3{font-size:.77777778em}.katex .fontsize-ensurer.reset-size5.size4,.katex .sizing.reset-size5.size4{font-size:.88888889em}.katex .fontsize-ensurer.reset-size5.size5,.katex .sizing.reset-size5.size5{font-size:1em}.katex .fontsize-ensurer.reset-size5.size6,.katex .sizing.reset-size5.size6{font-size:1.11111111em}.katex .fontsize-ensurer.reset-size5.size7,.katex .sizing.reset-size5.size7{font-size:1.33333333em}.katex .fontsize-ensurer.reset-size5.size8,.katex .sizing.reset-size5.size8{font-size:1.6em}.katex .fontsize-ensurer.reset-size5.size9,.katex .sizing.reset-size5.size9{font-size:1.92em}.katex .fontsize-ensurer.reset-size5.size10,.katex .sizing.reset-size5.size10{font-size:2.30444444em}.katex .fontsize-ensurer.reset-size5.size11,.katex .sizing.reset-size5.size11{font-size:2.76444444em}.katex .fontsize-ensurer.reset-size6.size1,.katex .sizing.reset-size6.size1{font-size:.5em}.katex .fontsize-ensurer.reset-size6.size2,.katex .sizing.reset-size6.size2{font-size:.6em}.katex .fontsize-ensurer.reset-size6.size3,.katex .sizing.reset-size6.size3{font-size:.7em}.katex .fontsize-ensurer.reset-size6.size4,.katex .sizing.reset-size6.size4{font-size:.8em}.katex .fontsize-ensurer.reset-size6.size5,.katex .sizing.reset-size6.size5{font-size:.9em}.katex .fontsize-ensurer.reset-size6.size6,.katex .sizing.reset-size6.size6{font-size:1em}.katex .fontsize-ensurer.reset-size6.size7,.katex .sizing.reset-size6.size7{font-size:1.2em}.katex .fontsize-ensurer.reset-size6.size8,.katex .sizing.reset-size6.size8{font-size:1.44em}.katex .fontsize-ensurer.reset-size6.size9,.katex .sizing.reset-size6.size9{font-size:1.728em}.katex .fontsize-ensurer.reset-size6.size10,.katex .sizing.reset-size6.size10{font-size:2.074em}.katex .fontsize-ensurer.reset-size6.size11,.katex .sizing.reset-size6.size11{font-size:2.488em}.katex .fontsize-ensurer.reset-size7.size1,.katex .sizing.reset-size7.size1{font-size:.41666667em}.katex .fontsize-ensurer.reset-size7.size2,.katex .sizing.reset-size7.size2{font-size:.5em}.katex .fontsize-ensurer.reset-size7.size3,.katex .sizing.reset-size7.size3{font-size:.58333333em}.katex .fontsize-ensurer.reset-size7.size4,.katex .sizing.reset-size7.size4{font-size:.66666667em}.katex .fontsize-ensurer.reset-size7.size5,.katex .sizing.reset-size7.size5{font-size:.75em}.katex .fontsize-ensurer.reset-size7.size6,.katex .sizing.reset-size7.size6{font-size:.83333333em}.katex .fontsize-ensurer.reset-size7.size7,.katex .sizing.reset-size7.size7{font-size:1em}.katex .fontsize-ensurer.reset-size7.size8,.katex .sizing.reset-size7.size8{font-size:1.2em}.katex .fontsize-ensurer.reset-size7.size9,.katex .sizing.reset-size7.size9{font-size:1.44em}.katex .fontsize-ensurer.reset-size7.size10,.katex .sizing.reset-size7.size10{font-size:1.72833333em}.katex .fontsize-ensurer.reset-size7.size11,.katex .sizing.reset-size7.size11{font-size:2.07333333em}.katex .fontsize-ensurer.reset-size8.size1,.katex .sizing.reset-size8.size1{font-size:.34722222em}.katex .fontsize-ensurer.reset-size8.size2,.katex .sizing.reset-size8.size2{font-size:.41666667em}.katex .fontsize-ensurer.reset-size8.size3,.katex .sizing.reset-size8.size3{font-size:.48611111em}.katex .fontsize-ensurer.reset-size8.size4,.katex .sizing.reset-size8.size4{font-size:.55555556em}.katex .fontsize-ensurer.reset-size8.size5,.katex .sizing.reset-size8.size5{font-size:.625em}.katex .fontsize-ensurer.reset-size8.size6,.katex .sizing.reset-size8.size6{font-size:.69444444em}.katex .fontsize-ensurer.reset-size8.size7,.katex .sizing.reset-size8.size7{font-size:.83333333em}.katex .fontsize-ensurer.reset-size8.size8,.katex .sizing.reset-size8.size8{font-size:1em}.katex .fontsize-ensurer.reset-size8.size9,.katex .sizing.reset-size8.size9{font-size:1.2em}.katex .fontsize-ensurer.reset-size8.size10,.katex .sizing.reset-size8.size10{font-size:1.44027778em}.katex .fontsize-ensurer.reset-size8.size11,.katex .sizing.reset-size8.size11{font-size:1.72777778em}.katex .fontsize-ensurer.reset-size9.size1,.katex .sizing.reset-size9.size1{font-size:.28935185em}.katex .fontsize-ensurer.reset-size9.size2,.katex .sizing.reset-size9.size2{font-size:.34722222em}.katex .fontsize-ensurer.reset-size9.size3,.katex .sizing.reset-size9.size3{font-size:.40509259em}.katex .fontsize-ensurer.reset-size9.size4,.katex .sizing.reset-size9.size4{font-size:.46296296em}.katex .fontsize-ensurer.reset-size9.size5,.katex .sizing.reset-size9.size5{font-size:.52083333em}.katex .fontsize-ensurer.reset-size9.size6,.katex .sizing.reset-size9.size6{font-size:.5787037em}.katex .fontsize-ensurer.reset-size9.size7,.katex .sizing.reset-size9.size7{font-size:.69444444em}.katex .fontsize-ensurer.reset-size9.size8,.katex .sizing.reset-size9.size8{font-size:.83333333em}.katex .fontsize-ensurer.reset-size9.size9,.katex .sizing.reset-size9.size9{font-size:1em}.katex .fontsize-ensurer.reset-size9.size10,.katex .sizing.reset-size9.size10{font-size:1.20023148em}.katex .fontsize-ensurer.reset-size9.size11,.katex .sizing.reset-size9.size11{font-size:1.43981481em}.katex .fontsize-ensurer.reset-size10.size1,.katex .sizing.reset-size10.size1{font-size:.24108004em}.katex .fontsize-ensurer.reset-size10.size2,.katex .sizing.reset-size10.size2{font-size:.28929605em}.katex .fontsize-ensurer.reset-size10.size3,.katex .sizing.reset-size10.size3{font-size:.33751205em}.katex .fontsize-ensurer.reset-size10.size4,.katex .sizing.reset-size10.size4{font-size:.38572806em}.katex .fontsize-ensurer.reset-size10.size5,.katex .sizing.reset-size10.size5{font-size:.43394407em}.katex .fontsize-ensurer.reset-size10.size6,.katex .sizing.reset-size10.size6{font-size:.48216008em}.katex .fontsize-ensurer.reset-size10.size7,.katex .sizing.reset-size10.size7{font-size:.57859209em}.katex .fontsize-ensurer.reset-size10.size8,.katex .sizing.reset-size10.size8{font-size:.69431051em}.katex .fontsize-ensurer.reset-size10.size9,.katex .sizing.reset-size10.size9{font-size:.83317261em}.katex .fontsize-ensurer.reset-size10.size10,.katex .sizing.reset-size10.size10{font-size:1em}.katex .fontsize-ensurer.reset-size10.size11,.katex .sizing.reset-size10.size11{font-size:1.19961427em}.katex .fontsize-ensurer.reset-size11.size1,.katex .sizing.reset-size11.size1{font-size:.20096463em}.katex .fontsize-ensurer.reset-size11.size2,.katex .sizing.reset-size11.size2{font-size:.24115756em}.katex .fontsize-ensurer.reset-size11.size3,.katex .sizing.reset-size11.size3{font-size:.28135048em}.katex .fontsize-ensurer.reset-size11.size4,.katex .sizing.reset-size11.size4{font-size:.32154341em}.katex .fontsize-ensurer.reset-size11.size5,.katex .sizing.reset-size11.size5{font-size:.36173633em}.katex .fontsize-ensurer.reset-size11.size6,.katex .sizing.reset-size11.size6{font-size:.40192926em}.katex .fontsize-ensurer.reset-size11.size7,.katex .sizing.reset-size11.size7{font-size:.48231511em}.katex .fontsize-ensurer.reset-size11.size8,.katex .sizing.reset-size11.size8{font-size:.57877814em}.katex .fontsize-ensurer.reset-size11.size9,.katex .sizing.reset-size11.size9{font-size:.69453376em}.katex .fontsize-ensurer.reset-size11.size10,.katex .sizing.reset-size11.size10{font-size:.83360129em}.katex .fontsize-ensurer.reset-size11.size11,.katex .sizing.reset-size11.size11{font-size:1em}.katex .delimsizing.size1{font-family:KaTeX_Size1}.katex .delimsizing.size2{font-family:KaTeX_Size2}.katex .delimsizing.size3{font-family:KaTeX_Size3}.katex .delimsizing.size4{font-family:KaTeX_Size4}.katex .delimsizing.mult .delim-size1>span{font-family:KaTeX_Size1}.katex .delimsizing.mult .delim-size4>span{font-family:KaTeX_Size4}.katex .nulldelimiter{display:inline-block;width:.12em}.katex .delimcenter,.katex .op-symbol{position:relative}.katex .op-symbol.small-op{font-family:KaTeX_Size1}.katex .op-symbol.large-op{font-family:KaTeX_Size2}.katex .accent>.vlist-t,.katex .op-limits>.vlist-t{text-align:center}.katex .accent .accent-body{position:relative}.katex .accent .accent-body:not(.accent-full){width:0}.katex .overlay{display:block}.katex .mtable .vertical-separator{border-right:.05em solid;display:inline-block;margin:0 -.025em;min-width:1px}.katex .mtable .vs-dashed{border-right:.05em dashed}.katex .mtable .arraycolsep{display:inline-block}.katex .mtable .col-align-c>.vlist-t{text-align:center}.katex .mtable .col-align-l>.vlist-t{text-align:left}.katex .mtable .col-align-r>.vlist-t{text-align:right}.katex .svg-align{text-align:left}.katex svg{display:block;fill:currentColor;fill-opacity:1;fill-rule:nonzero;height:inherit;position:absolute;stroke:currentColor;stroke-dasharray:none;stroke-dashoffset:0;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-width:1;width:100%}.katex svg path{stroke:none}.katex .stretchy{display:block;overflow:hidden;position:relative;width:100%}.katex .stretchy:after,.katex .stretchy:before{content:""}.katex .hide-tail{overflow:hidden;position:relative;width:100%}.katex .halfarrow-left{left:0;overflow:hidden;position:absolute;width:50.2%}.katex .halfarrow-right{overflow:hidden;position:absolute;right:0;width:50.2%}.katex .brace-left{left:0;overflow:hidden;position:absolute;width:25.1%}.katex .brace-center{left:25%;overflow:hidden;position:absolute;width:50%}.katex .brace-right{overflow:hidden;position:absolute;right:0;width:25.1%}.katex .x-arrow-pad{padding:0 .5em}.katex .mover,.katex .munder,.katex .x-arrow{text-align:center}.katex .boxpad{padding:0 .3em}.katex .fbox{border:.04em solid #000;box-sizing:border-box}.katex .fcolorbox{border:.04em solid;box-sizing:border-box}.katex .cancel-pad{padding:0 .2em}.katex .cancel-lap{margin-left:-.2em;margin-right:-.2em}.katex .sout{border-bottom-style:solid;border-bottom-width:.08em}.katex-display{display:block;margin:1em 0;text-align:center}.katex-display>.katex{display:block;text-align:center;white-space:nowrap}.katex-display>.katex>.katex-html{display:block;position:relative}.katex-display>.katex>.katex-html>.tag{position:absolute;right:0}</style><meta name="generator" content="Gatsby 2.0.104"/><style id="typography.js">html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;-webkit-text-decoration-skip:objects}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font:112.5%/1.44 'Fira Sans',sans-serif;box-sizing:border-box;overflow-y:scroll;}*{box-sizing:inherit;}*:before{box-sizing:inherit;}*:after{box-sizing:inherit;}body{color:hsla(0,0%,0%,0.8);font-family:'Fira Sans',sans-serif;font-weight:400;word-wrap:break-word;font-kerning:normal;-moz-font-feature-settings:"kern", "liga", "clig", "calt";-ms-font-feature-settings:"kern", "liga", "clig", "calt";-webkit-font-feature-settings:"kern", "liga", "clig", "calt";font-feature-settings:"kern", "liga", "clig", "calt";}img{max-width:100%;margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.08rem;}h1{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.08rem;color:hsla(0,0%,0%,1);font-family:'Playfair Display',serif;font-weight:700;text-rendering:optimizeLegibility;font-size:2.15rem;line-height:1.1;}h2{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.08rem;color:hsla(0,0%,0%,1);font-family:'Playfair Display',serif;font-weight:700;text-rendering:optimizeLegibility;font-size:1.58293rem;line-height:1.1;}h3{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.08rem;color:hsla(0,0%,0%,1);font-family:'Playfair Display',serif;font-weight:700;text-rendering:optimizeLegibility;font-size:1.35824rem;line-height:1.1;}h4{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.08rem;color:hsla(0,0%,0%,1);font-family:'Playfair Display',serif;font-weight:700;text-rendering:optimizeLegibility;font-size:1rem;line-height:1.1;}h5{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.08rem;color:hsla(0,0%,0%,1);font-family:'Playfair Display',serif;font-weight:700;text-rendering:optimizeLegibility;font-size:0.85805rem;line-height:1.1;}h6{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.08rem;color:hsla(0,0%,0%,1);font-family:'Playfair Display',serif;font-weight:700;text-rendering:optimizeLegibility;font-size:0.79482rem;line-height:1.1;}hgroup{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.08rem;}ul{margin-left:1.44rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.08rem;list-style-position:outside;list-style-image:none;}ol{margin-left:1.44rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.08rem;list-style-position:outside;list-style-image:none;}dl{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.08rem;}dd{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.08rem;}p{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.08rem;}figure{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.08rem;}pre{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.08rem;font-size:0.85rem;line-height:1.44rem;}table{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.08rem;font-size:1rem;line-height:1.44rem;border-collapse:collapse;width:100%;}fieldset{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.08rem;}blockquote{margin-left:0;margin-right:1.44rem;margin-top:0;padding-bottom:0;padding-left:1.17rem;padding-right:0;padding-top:0;margin-bottom:1.08rem;font-size:1.16543rem;line-height:1.44rem;color:hsla(0,0%,0%,0.59);font-style:italic;border-left:0.27rem solid hsla(0,0%,0%,0.2);}form{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.08rem;}noscript{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.08rem;}iframe{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.08rem;}hr{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:calc(1.08rem - 1px);background:hsla(0,0%,0%,0.2);border:none;height:1px;}address{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.08rem;}b{font-weight:700;}strong{font-weight:700;}dt{font-weight:700;}th{font-weight:700;}li{margin-bottom:calc(1.08rem / 2);}ol li{padding-left:0;}ul li{padding-left:0;}li > ol{margin-left:1.44rem;margin-bottom:calc(1.08rem / 2);margin-top:calc(1.08rem / 2);}li > ul{margin-left:1.44rem;margin-bottom:calc(1.08rem / 2);margin-top:calc(1.08rem / 2);}blockquote *:last-child{margin-bottom:0;}li *:last-child{margin-bottom:0;}p *:last-child{margin-bottom:0;}li > p{margin-bottom:calc(1.08rem / 2);}code{font-size:0.85rem;line-height:1.44rem;}kbd{font-size:0.85rem;line-height:1.44rem;}samp{font-size:0.85rem;line-height:1.44rem;}abbr{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}acronym{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}abbr[title]{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;text-decoration:none;}thead{text-align:left;}td,th{text-align:left;border-bottom:1px solid hsla(0,0%,0%,0.12);font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding-left:0.96rem;padding-right:0.96rem;padding-top:0.72rem;padding-bottom:calc(0.72rem - 1px);}th:first-child,td:first-child{padding-left:0;}th:last-child,td:last-child{padding-right:0;}a{color:#9f392b;}blockquote > :last-child{margin-bottom:0;}blockquote cite{font-size:1rem;line-height:1.44rem;color:hsla(0,0%,0%,0.8);font-weight:400;}blockquote cite:before{content:" ";}@media only screen and (max-width:480px){blockquote{margin-left:-1.08rem;margin-right:0;padding-left:0.81rem;}}</style><link href="//fonts.googleapis.com/css?family=Playfair+Display:700|Fira+Sans:400,400i,700,700i" rel="stylesheet" type="text/css"/><link as="script" rel="preload" href="/component---src-templates-blog-post-js-65b797d13e45e636650e.js"/><link as="script" rel="preload" href="/8-6c1aaf91193d336a5639.js"/><link as="script" rel="preload" href="/0-d6413646fc65cc1ae06b.js"/><link as="script" rel="preload" href="/app-17a2b7494f03f49a9dcf.js"/><link as="script" rel="preload" href="/webpack-runtime-def10263602bee66fbcd.js"/><link as="fetch" rel="preload" href="/static/d/877/path---6-828-lab-4-174-a74-02MUZ1PR2ANgvxnYI42vgCvPWg.json" crossOrigin="use-credentials"/></head><body><noscript id="gatsby-noscript">This app works best with JavaScript enabled.</noscript><div id="___gatsby"><div style="outline:none" tabindex="-1" role="group"><style data-emotion-css="8d5zj8">.css-8d5zj8{margin:0 auto;max-width:800px;padding:2.88rem;padding-top:2.16rem;}</style><div class="css-8d5zj8"><a href="/"><style data-emotion-css="i0b9uu">.css-i0b9uu{margin-bottom:2.88rem;display:inline-block;font-style:normal;}</style><h3 class="css-i0b9uu">Zilin&#x27;s Blog</h3></a><style data-emotion-css="146q31f">.css-146q31f{float:right;}</style><a class="css-146q31f" href="/about/">About</a><div><h1>6.828 lab4 Preemptive Multitasking</h1><div><h2>Part A: Multiprocessor Support and Cooperative Multitasking</h2>
<p>JOSsystem calluser-level environmentscooperativeround-robinpart Cpre-emptive</p>
<h3>Multiprocessor Support</h3>
<p>symmetric multiprocessing (SMP)CPUI/OSMPbootCPU</p>
<ul>
<li>the bootstrap processor (BSP): boot</li>
<li>the application processors (APs): BSP</li>
</ul>
<p>CPUBSPBIOSJOSBSP</p>
<p>SMPCPUan accompanying local APIC (LAPIC) unit. LAPICdeliver interruptLAPICCPUunique identifierlabLAPIC unit<code class="language-text">kern/lapic.c</code></p>
<ul>
<li>
<p><code class="language-text">cpunum()</code>LAPICidentifierCPU</p>
<div class="gatsby-highlight" data-language="c"><pre class="language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">define</span> ID      (0x0020/4)   </span><span class="token comment">// ID</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token keyword">int</span>
<span class="token function">cpunum</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>lapic<span class="token punctuation">)</span>
		<span class="token keyword">return</span> lapic<span class="token punctuation">[</span>ID<span class="token punctuation">]</span> <span class="token operator">>></span> <span class="token number">24</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
</li>
<li>
<p><code class="language-text">lapic_startap()</code>BSPAPsSTARTUP interprocessor interrupt (IPI)CPU</p>
<div class="gatsby-highlight" data-language="c"><pre class="language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">define</span> IO_RTC  0x70</span>

<span class="token comment">// Start additional processor running entry code at addr.</span>
<span class="token comment">// See Appendix B of MultiProcessor Specification.</span>
<span class="token keyword">void</span>
<span class="token function">lapic_startap</span><span class="token punctuation">(</span>uint8_t apicid<span class="token punctuation">,</span> uint32_t addr<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token keyword">int</span> i<span class="token punctuation">;</span>
	uint16_t <span class="token operator">*</span>wrv<span class="token punctuation">;</span>

	<span class="token comment">// "The BSP must initialize CMOS shutdown code to 0AH</span>
	<span class="token comment">// and the warm reset vector (DWORD based at 40:67) to point at</span>
	<span class="token comment">// the AP startup code prior to the [universal startup algorithm]."</span>
	<span class="token function">outb</span><span class="token punctuation">(</span>IO_RTC<span class="token punctuation">,</span> <span class="token number">0xF</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// offset 0xF is shutdown code</span>
	<span class="token function">outb</span><span class="token punctuation">(</span>IO_RTC<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0x0A</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	wrv <span class="token operator">=</span> <span class="token punctuation">(</span>uint16_t <span class="token operator">*</span><span class="token punctuation">)</span><span class="token function">KADDR</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">0x40</span> <span class="token operator">&lt;&lt;</span> <span class="token number">4</span> <span class="token operator">|</span> <span class="token number">0x67</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// Warm reset vector</span>
	wrv<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	wrv<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> addr <span class="token operator">>></span> <span class="token number">4</span><span class="token punctuation">;</span>

	<span class="token comment">// "Universal startup algorithm."</span>
	<span class="token comment">// Send INIT (level-triggered) interrupt to reset other CPU.</span>
	<span class="token function">lapicw</span><span class="token punctuation">(</span>ICRHI<span class="token punctuation">,</span> apicid <span class="token operator">&lt;&lt;</span> <span class="token number">24</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">lapicw</span><span class="token punctuation">(</span>ICRLO<span class="token punctuation">,</span> INIT <span class="token operator">|</span> LEVEL <span class="token operator">|</span> ASSERT<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">microdelay</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">lapicw</span><span class="token punctuation">(</span>ICRLO<span class="token punctuation">,</span> INIT <span class="token operator">|</span> LEVEL<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">microdelay</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// should be 10ms, but too slow in Bochs!</span>

	<span class="token comment">// Send startup IPI (twice!) to enter code.</span>
	<span class="token comment">// Regular hardware is supposed to only accept a STARTUP</span>
	<span class="token comment">// when it is in the halted state due to an INIT.  So the second</span>
	<span class="token comment">// should be ignored, but it is part of the official Intel algorithm.</span>
	<span class="token comment">// Bochs complains about the second one.  Too bad for Bochs.</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token function">lapicw</span><span class="token punctuation">(</span>ICRHI<span class="token punctuation">,</span> apicid <span class="token operator">&lt;&lt;</span> <span class="token number">24</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">lapicw</span><span class="token punctuation">(</span>ICRLO<span class="token punctuation">,</span> STARTUP <span class="token operator">|</span> <span class="token punctuation">(</span>addr <span class="token operator">>></span> <span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">microdelay</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
</li>
<li>
<p>PART CLAPICtimertrigger clock interruptpreemptive multitasking<code class="language-text">apic_init()</code></p>
</li>
</ul>
<p>memory-mapping I/O (MMIOnote2)LAPICMMIOhardwiredI/Odevice registers<code class="language-text">0xa0000</code>IO hole(note2layout)VGAbufferLAPICPA<code class="language-text">0xfe000000</code>32MB<code class="language-text">KERNBASE</code><code class="language-text">0xf0000000</code>JOS<code class="language-text">MMIOBASE</code>4MBgapLAPICMMIOdevice memory</p>
<h3>Exercise 1</h3>
<p><code class="language-text">kern/lapic.c</code><code class="language-text">mmio_map_region</code>exercise</p>
<div class="gatsby-highlight" data-language="c"><pre class="language-c"><code class="language-c"><span class="token comment">//</span>
<span class="token comment">// Reserve size bytes in the MMIO region and map [pa,pa+size) at this</span>
<span class="token comment">// location.  Return the base of the reserved region.  size does *not*</span>
<span class="token comment">// have to be multiple of PGSIZE.</span>
<span class="token comment">//</span>
<span class="token keyword">void</span> <span class="token operator">*</span>
<span class="token function">mmio_map_region</span><span class="token punctuation">(</span>physaddr_t pa<span class="token punctuation">,</span> size_t size<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token comment">// Where to start the next region.  Initially, this is the</span>
	<span class="token comment">// beginning of the MMIO region.  Because this is static, its</span>
	<span class="token comment">// value will be preserved between calls to mmio_map_region</span>
	<span class="token comment">// (just like nextfree in boot_alloc).</span>
	<span class="token keyword">static</span> uintptr_t base <span class="token operator">=</span> MMIOBASE<span class="token punctuation">;</span>

	<span class="token comment">// Reserve size bytes of virtual memory starting at base and</span>
	<span class="token comment">// map physical pages [pa,pa+size) to virtual addresses</span>
	<span class="token comment">// [base,base+size).  Since this is device memory and not</span>
	<span class="token comment">// regular DRAM, you'll have to tell the CPU that it isn't</span>
	<span class="token comment">// safe to cache access to this memory.  Luckily, the page</span>
	<span class="token comment">// tables provide bits for this purpose; simply create the</span>
	<span class="token comment">// mapping with PTE_PCD|PTE_PWT (cache-disable and</span>
	<span class="token comment">// write-through) in addition to PTE_W.  (If you're interested</span>
	<span class="token comment">// in more details on this, see section 10.5 of IA32 volume</span>
	<span class="token comment">// 3A.)</span>
	<span class="token comment">//</span>
	<span class="token comment">// Be sure to round size up to a multiple of PGSIZE and to</span>
	<span class="token comment">// handle if this reservation would overflow MMIOLIM (it's</span>
	<span class="token comment">// okay to simply panic if this happens).</span>
	<span class="token comment">//</span>
	<span class="token comment">// Hint: The staff solution uses boot_map_region.</span>
	<span class="token comment">//</span>
	<span class="token comment">// Your code here:</span>
	size <span class="token operator">=</span> <span class="token function">ROUNDUP</span><span class="token punctuation">(</span>size<span class="token punctuation">,</span> PGSIZE<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>base <span class="token operator">+</span> size<span class="token punctuation">)</span> <span class="token operator">></span> MMIOLIM <span class="token operator">||</span> <span class="token punctuation">(</span>base <span class="token operator">+</span> size <span class="token operator">&lt;</span> base<span class="token punctuation">)</span><span class="token punctuation">)</span>
		<span class="token function">panic</span><span class="token punctuation">(</span><span class="token string">"overflow MMIOLIM"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">boot_map_region</span><span class="token punctuation">(</span>kern_pgdir<span class="token punctuation">,</span> base<span class="token punctuation">,</span> size<span class="token punctuation">,</span> pa<span class="token punctuation">,</span> PTE_W <span class="token operator">|</span> PTE_PCD <span class="token operator">|</span> PTE_PWT<span class="token punctuation">)</span><span class="token punctuation">;</span>
	base <span class="token operator">+</span><span class="token operator">=</span> size<span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">(</span>base <span class="token operator">-</span> size<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p><code class="language-text">base + size</code>overflow<code class="language-text">base + size &gt;= base</code></p>
<h3>Application Processor Bootstrap</h3>
<p>APsBSPCPUAPIC IDLAPICMMIO<code class="language-text">kern/mpconfig.c</code><code class="language-text">mp_init()</code>MP configuration tableBIOS' s region of memory</p>
<p><code class="language-text">kern/init.c</code><code class="language-text">boot_aps()</code>AP bootstrap process</p>
<div class="gatsby-highlight" data-language="c"><pre class="language-c"><code class="language-c"><span class="token comment">// Start the non-boot (AP) processors.</span>
<span class="token keyword">static</span> <span class="token keyword">void</span>
<span class="token function">boot_aps</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token keyword">extern</span> <span class="token keyword">unsigned</span> <span class="token keyword">char</span> mpentry_start<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> mpentry_end<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token keyword">void</span> <span class="token operator">*</span>code<span class="token punctuation">;</span>
	<span class="token keyword">struct</span> CpuInfo <span class="token operator">*</span>c<span class="token punctuation">;</span>

	<span class="token comment">// Write entry code to unused memory at MPENTRY_PADDR</span>
	code <span class="token operator">=</span> <span class="token function">KADDR</span><span class="token punctuation">(</span>MPENTRY_PADDR<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">memmove</span><span class="token punctuation">(</span>code<span class="token punctuation">,</span> mpentry_start<span class="token punctuation">,</span> mpentry_end <span class="token operator">-</span> mpentry_start<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// Boot each AP one at a time</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span>c <span class="token operator">=</span> cpus<span class="token punctuation">;</span> c <span class="token operator">&lt;</span> cpus <span class="token operator">+</span> ncpu<span class="token punctuation">;</span> c<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>c <span class="token operator">==</span> cpus <span class="token operator">+</span> <span class="token function">cpunum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment">// We've started already.</span>
			<span class="token keyword">continue</span><span class="token punctuation">;</span>

		<span class="token comment">// Tell mpentry.S what stack to use </span>
		mpentry_kstack <span class="token operator">=</span> percpu_kstacks<span class="token punctuation">[</span>c <span class="token operator">-</span> cpus<span class="token punctuation">]</span> <span class="token operator">+</span> KSTKSIZE<span class="token punctuation">;</span>
		<span class="token comment">// Start the CPU at mpentry_start</span>
		<span class="token function">lapic_startap</span><span class="token punctuation">(</span>c<span class="token operator">-></span>cpu_id<span class="token punctuation">,</span> <span class="token function">PADDR</span><span class="token punctuation">(</span>code<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">// Wait for the CPU to finish some basic setup in mp_main()</span>
		<span class="token keyword">while</span><span class="token punctuation">(</span>c<span class="token operator">-></span>cpu_status <span class="token operator">!=</span> CPU_STARTED<span class="token punctuation">)</span>
			<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p><code class="language-text">boot/boot.S</code><code class="language-text">boot_aps()</code>AP entry code(<code class="language-text">kern/mpentry.S</code>)a memory location that is addressable in the real modebootloaderAPAPentry code <code class="language-text">0x7000</code> (<code class="language-text">MPENTRY_PADDR</code>)640KB</p>
<p><code class="language-text">memmove</code><code class="language-text">boot_aps()</code>STARTUP IPIsLAPIC unitAP<code class="language-text">lapic_startap</code><code class="language-text">CS:IP</code>APentry code<code class="language-text">MPENTRY_PADDR</code></p>
<p>entry code<code class="language-text">kern/mpentry.S</code><code class="language-text">boot/boot.S</code>APprotected mode<code class="language-text">kern/init.c</code><code class="language-text">mp_main()</code><code class="language-text">boot_aps()</code><code class="language-text">c-&gt;cpu_status != CPU_STARTED</code>AP<code class="language-text">boot_aps</code>AP</p>
<div class="gatsby-highlight" data-language="c"><pre class="language-c"><code class="language-c"><span class="token comment">// Setup code for APs</span>
<span class="token keyword">void</span>
<span class="token function">mp_main</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token comment">// We are in high EIP now, safe to switch to kern_pgdir </span>
	<span class="token function">lcr3</span><span class="token punctuation">(</span><span class="token function">PADDR</span><span class="token punctuation">(</span>kern_pgdir<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">cprintf</span><span class="token punctuation">(</span><span class="token string">"SMP: CPU %d starting\n"</span><span class="token punctuation">,</span> <span class="token function">cpunum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token function">lapic_init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">env_init_percpu</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">trap_init_percpu</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">xchg</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>thiscpu<span class="token operator">-></span>cpu_status<span class="token punctuation">,</span> CPU_STARTED<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// tell boot_aps() we're up</span>

	<span class="token comment">// Now that we have finished some basic setup, call sched_yield()</span>
	<span class="token comment">// to start running processes on this CPU.  But make sure that</span>
	<span class="token comment">// only one CPU can enter the scheduler at a time!</span>
	<span class="token comment">//</span>
	<span class="token comment">// Your code here:</span>

	<span class="token comment">// Remove this after you finish Exercise 6</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span><span class="token punctuation">;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<h3>Exercise 2</h3>
<p><code class="language-text">page_init()</code><code class="language-text">MPENTRY_PADDR</code>AP bootstrap code</p>
<div class="gatsby-highlight" data-language="c"><pre class="language-c"><code class="language-c"><span class="token comment">//</span>
<span class="token comment">// Initialize page structure and memory free list.</span>
<span class="token comment">// After this is done, NEVER use boot_alloc again.  ONLY use the page</span>
<span class="token comment">// allocator functions below to allocate and deallocate physical</span>
<span class="token comment">// memory via the page_free_list.</span>
<span class="token comment">//</span>
<span class="token keyword">void</span>
<span class="token function">page_init</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token comment">// LAB 4:</span>
	<span class="token comment">// Change your code to mark the physical page at MPENTRY_PADDR</span>
	<span class="token comment">// as in use</span>
	<span class="token keyword">struct</span> PageInfo <span class="token operator">*</span>mpentry_page <span class="token operator">=</span> <span class="token function">pa2page</span><span class="token punctuation">(</span>MPENTRY_PADDR<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">// The example code here marks all physical pages as free.</span>
	<span class="token comment">// However this is not truly the case.  What memory is free?</span>
	<span class="token comment">//  1) Mark physical page 0 as in use.</span>
	<span class="token comment">//     This way we preserve the real-mode IDT and BIOS structures</span>
	<span class="token comment">//     in case we ever need them.  (Currently we don't, but...)</span>
	<span class="token comment">//  2) The rest of base memory, [PGSIZE, npages_basemem * PGSIZE)</span>
	<span class="token comment">//     is free.</span>
	<span class="token comment">//  3) Then comes the IO hole [IOPHYSMEM, EXTPHYSMEM), which must</span>
	<span class="token comment">//     never be allocated.</span>
	<span class="token comment">//  4) Then extended memory [EXTPHYSMEM, ...).</span>
	<span class="token comment">//     Some of it is in use, some is free. Where is the kernel</span>
	<span class="token comment">//     in physical memory?  Which pages are already in use for</span>
	<span class="token comment">//     page tables and other data structures?</span>
	<span class="token comment">//</span>
	<span class="token comment">// Change the code to reflect this.</span>
	<span class="token comment">// NB: DO NOT actually touch the physical memory corresponding to</span>
	<span class="token comment">// free pages!</span>
	size_t i<span class="token punctuation">;</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> npages_basemem<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>pages <span class="token operator">+</span> i <span class="token operator">==</span> mpentry_page<span class="token punctuation">)</span>
			<span class="token keyword">continue</span><span class="token punctuation">;</span>
		pages<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>pp_ref <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
		pages<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>pp_link <span class="token operator">=</span> page_free_list<span class="token punctuation">;</span>
		page_free_list <span class="token operator">=</span> <span class="token operator">&amp;</span>pages<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
  <span class="token keyword">for</span><span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token function">PADDR</span><span class="token punctuation">(</span><span class="token function">boot_alloc</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">/</span>PGSIZE<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> npages<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    pages<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>pp_ref <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
		pages<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>pp_link <span class="token operator">=</span> page_free_list<span class="token punctuation">;</span>
		page_free_list <span class="token operator">=</span> <span class="token operator">&amp;</span>pages<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p></p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">$ <span class="token function">make</span> qemu-nox
<span class="token punctuation">..</span>.
check_page_free_list<span class="token punctuation">(</span><span class="token punctuation">)</span> succeeded<span class="token operator">!</span>
check_page_alloc<span class="token punctuation">(</span><span class="token punctuation">)</span> succeeded<span class="token operator">!</span>
check_page<span class="token punctuation">(</span><span class="token punctuation">)</span> succeeded<span class="token operator">!</span>
kernel panic on CPU 0 at kern/pmap.c:813: assertion failed: check_va2pa<span class="token punctuation">(</span>pgdir, KERNBASE + i<span class="token punctuation">)</span> <span class="token operator">==</span> i
Welcome to the JOS kernel monitor<span class="token operator">!</span>
Type <span class="token string">'help'</span> <span class="token keyword">for</span> a list of commands.
K<span class="token operator">></span></code></pre></div>
<ul>
<li>
<p><code class="language-text">kern/mpentry.S</code> <code class="language-text">boot/boot.S</code>. <code class="language-text">kern/mpentry.S</code>kernel<code class="language-text">KERNBASE</code><code class="language-text">mpentry.S</code><code class="language-text">MPBOOTPHYS</code>?<code class="language-text">boot.S</code> </p>
<p><code class="language-text">mpentry.S</code></p>
<blockquote>
<p>This code is similar to boot/boot.S except that</p>
<ul>
<li>
<p>it does not need to enable A20</p>
</li>
<li>
<p>it uses MPBOOTPHYS to calculate absolute addresses of its</p>
<p>symbols, rather than relying on the linker to fill them</p>
</li>
</ul>
</blockquote>
<p>bootloaderLMAVMA<code class="language-text">0x7c00</code><code class="language-text">boot.S</code>kernelGDT<code class="language-text">MPBOOTPHYS</code></p>
<div class="gatsby-highlight" data-language="c"><pre class="language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">define</span> MPBOOTPHYS(s) ((s) - mpentry_start + MPENTRY_PADDR)</span></code></pre></div>
<p><code class="language-text">mpentry-start</code><code class="language-text">MPENTRY_PADDR</code>APsstartup code<code class="language-text">gdt</code><code class="language-text">mpentry_start</code><code class="language-text">MPENTRY_PADDR + gdt - mpentry_start</code><code class="language-text">boot.S</code><code class="language-text">gdt</code><code class="language-text">start + gdt - start</code><code class="language-text">start</code><code class="language-text">boot.S</code></p>
</li>
</ul>
<h3>Per-CPU State and Initialization</h3>
<p>OSper-CPU state that is private to each processorglobal state that the whole system shares<code class="language-text">kern/cpu.h</code>per-CPU state<code class="language-text">CpuInfo</code>per-CPU<code class="language-text">cpunum()</code>CPUIDID<code class="language-text">cpus</code>index<code class="language-text">thiscpu</code>CPU<code class="language-text">struct CpuInfo</code></p>
<p>per-CPU state</p>
<ul>
<li>
<p>per-CPU kernel stack</p>
<p>CPUtrapkernelCPUkernel stack<code class="language-text">percpu_kstacks[NCPU][KSTKSIZE]</code></p>
<p>lab2<code class="language-text">bootstack</code>BSPkernel stack<code class="language-text">KSTACKTOP</code></p>
<div class="gatsby-highlight" data-language="c"><pre class="language-c"><code class="language-c">	<span class="token comment">//////////////////////////////////////////////////////////////////////</span>
	<span class="token comment">// Use the physical memory that 'bootstack' refers to as the kernel</span>
	<span class="token comment">// stack.  The kernel stack grows down from virtual address KSTACKTOP.</span>
	<span class="token comment">// We consider the entire range from [KSTACKTOP-PTSIZE, KSTACKTOP)</span>
	<span class="token comment">// to be the kernel stack, but break this into two pieces:</span>
	<span class="token comment">//     * [KSTACKTOP-KSTKSIZE, KSTACKTOP) -- backed by physical memory</span>
	<span class="token comment">//     * [KSTACKTOP-PTSIZE, KSTACKTOP-KSTKSIZE) -- not backed; so if</span>
	<span class="token comment">//       the kernel overflows its stack, it will fault rather than</span>
	<span class="token comment">//       overwrite memory.  Known as a "guard page".</span>
	<span class="token comment">//     Permissions: kernel RW, user NONE</span>
	<span class="token comment">// Your code goes here:</span>
	<span class="token function">boot_map_region</span><span class="token punctuation">(</span>kern_pgdir<span class="token punctuation">,</span> KSTACKTOP<span class="token operator">-</span>KSTKSIZE<span class="token punctuation">,</span> KSTKSIZE<span class="token punctuation">,</span> <span class="token function">PADDR</span><span class="token punctuation">(</span>bootstack<span class="token punctuation">)</span><span class="token punctuation">,</span> 
                  PTE_W <span class="token operator">|</span> PTE_P<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>lab4kernel stackguard pageCPU 0stack<code class="language-text">KSTACKTOP</code>CPU 1CPU 0stack<code class="language-text">KSTGAP</code><code class="language-text">inc/memorylayout.h</code></p>
<div class="gatsby-highlight" data-language="c"><pre class="language-c"><code class="language-c"><span class="token comment">/*
* Virtual memory map:                                Permissions
*                                                    kernel/user
*
*    4 Gig -------->  +------------------------------+
*                     |                              | RW/--
*                     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
*                     :              .               :
*                     :              .               :
*                     :              .               :
*                     |~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~| RW/--
*                     |                              | RW/--
*                     |   Remapped Physical Memory   | RW/--
*                     |                              | RW/--
*    KERNBASE, ---->  +------------------------------+ 0xf0000000      --+
*    KSTACKTOP        |     CPU0's Kernel Stack      | RW/--  KSTKSIZE   |
*                     | - - - - - - - - - - - - - - -|                   |
*                     |      Invalid Memory (*)      | --/--  KSTKGAP    |
*                     +------------------------------+                   |
*                     |     CPU1's Kernel Stack      | RW/--  KSTKSIZE   |
*                     | - - - - - - - - - - - - - - -|                 PTSIZE
*                     |      Invalid Memory (*)      | --/--  KSTKGAP    |
*                     +------------------------------+                   |
*                     :              .               :                   |
*                     :              .               :                   |
*    MMIOLIM ------>  +------------------------------+ 0xefc00000      --+
*                     |       Memory-mapped I/O      | RW/--  PTSIZE
* ULIM, MMIOBASE -->  +------------------------------+ 0xef800000
*                     |  Cur. Page Table (User R-)   | R-/R-  PTSIZE
*    UVPT      ---->  +------------------------------+ 0xef400000
*                     |          RO PAGES            | R-/R-  PTSIZE
*    UPAGES    ---->  +------------------------------+ 0xef000000
*                     |           RO ENVS            | R-/R-  PTSIZE
* UTOP,UENVS ------>  +------------------------------+ 0xeec00000
* UXSTACKTOP -/       |     User Exception Stack     | RW/RW  PGSIZE
*                     +------------------------------+ 0xeebff000
*                     |       Empty Memory (*)       | --/--  PGSIZE
*    USTACKTOP  --->  +------------------------------+ 0xeebfe000
*                     |      Normal User Stack       | RW/RW  PGSIZE
*                     +------------------------------+ 0xeebfd000
*                     |                              |
*                     |                              |
*                     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
*                     .                              .
*                     .                              .
*                     .                              .
*                     |~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~|
*                     |     Program Data &amp; Heap      |
*    UTEXT -------->  +------------------------------+ 0x00800000
*    PFTEMP ------->  |       Empty Memory (*)       |        PTSIZE
*                     |                              |
*    UTEMP -------->  +------------------------------+ 0x00400000      --+
*                     |       Empty Memory (*)       |                   |
*                     | - - - - - - - - - - - - - - -|                   |
*                     |  User STAB Data (optional)   |                 PTSIZE
*    USTABDATA ---->  +------------------------------+ 0x00200000        |
*                     |       Empty Memory (*)       |                   |
*    0 ------------>  +------------------------------+                 --+
*
* (*) Note: The kernel ensures that "Invalid Memory" is *never* mapped.
*     "Empty Memory" is normally unmapped, but user programs may map pages
*     there if desired.  JOS user programs map pages temporarily at UTEMP.
*/</span></code></pre></div>
</li>
<li>
<p>per-CPU TSS and TSS descriptor</p>
<p>TSS:</p>
<blockquote>
<p>The <strong>task state segment</strong> (<strong>TSS</strong>) is a special structure on <a href="https://en.wikipedia.org/wiki/X86">x86</a>-based computers which holds information about a <a href="https://en.wikipedia.org/wiki/Task_(computers)">task</a>. It is used by the <a href="https://en.wikipedia.org/wiki/Operating_system">operating system</a> <a href="https://en.wikipedia.org/wiki/Kernel_(computer_science)">kernel</a> for task management. Specifically, the following information is stored in the TSS:</p>
<ul>
<li><a href="https://en.wikipedia.org/wiki/Processor_register">Processor register</a> state</li>
<li>I/O port permissions</li>
<li>Inner-level stack pointers</li>
<li>Previous TSS link</li>
</ul>
<p>The TSS may reside anywhere in <a href="https://en.wikipedia.org/wiki/Memory">memory</a>. A special segment register called the task register (TR) holds a <a href="https://en.wikipedia.org/wiki/X86_memory_segmentation">segment selector</a> that points to a valid TSS segment descriptor which resides in the <a href="https://en.wikipedia.org/wiki/Global_Descriptor_Table">GDT</a> (a TSS descriptor may not reside in the <a href="https://en.wikipedia.org/wiki/Local_Descriptor_Table">LDT</a>). Therefore, to use a TSS the following must be done by the operating system kernel:</p>
<ol>
<li>Create a TSS descriptor entry in the GDT</li>
<li>Load the TR with the segment selector for that segment</li>
<li>Add information to the TSS in memory as needed</li>
</ol>
<p>For security purposes, the TSS should be placed in memory that is accessible only to the <a href="https://en.wikipedia.org/wiki/Kernel_(computer_science)">kernel</a>.</p>
<p>quote from <a href="https://en.wikipedia.org/wiki/Task_state_segment">https://en.wikipedia.org/wiki/Task_state_segment</a></p>
</blockquote>
<p>TSStask (schedulingthreadprocess)TSS descriptorGDTGDTsegment</p>
<p>CPUstackper-CPU TSSCPU iTSS<code class="language-text">cpus[i].cpu_ts</code>TSS descriptor<code class="language-text">gdt[(GDT_TSS0 &gt;&gt; 3) + i]</code><code class="language-text">kern/trap.c</code><code class="language-text">struct Taskstate ts</code> </p>
</li>
<li>
<p>per-CPU current environment pointer</p>
<p>CPU<code class="language-text">curenv</code><code class="language-text">cpus[cpunum()].cpu_env</code><code class="language-text">thiscpu-&gt;cpu_env</code>CPU</p>
</li>
<li>
<p>per-CPU system register</p>
<p>private to CPU<code class="language-text">lcr3()</code>, <code class="language-text">ltr()</code>, <code class="language-text">lgdt()</code>, <code class="language-text">lidt()</code>CPU</p>
</li>
</ul>
<p>per-CPU stateCPUCPU</p>
<h3>Exercise 3</h3>
<p><code class="language-text">kern.pmap.c</code><code class="language-text">mem_init_mp()</code>CPUstack</p>
<p>stacktop</p>
<div class="gatsby-highlight" data-language="c"><pre class="language-c"><code class="language-c"><span class="token comment">// Modify mappings in kern_pgdir to support SMP</span>
<span class="token comment">//   - Map the per-CPU stacks in the region [KSTACKTOP-PTSIZE, KSTACKTOP)</span>
<span class="token comment">//</span>
<span class="token keyword">static</span> <span class="token keyword">void</span>
<span class="token function">mem_init_mp</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token comment">// Map per-CPU stacks starting at KSTACKTOP, for up to 'NCPU' CPUs.</span>
	<span class="token comment">//</span>
	<span class="token comment">// For CPU i, use the physical memory that 'percpu_kstacks[i]' refers</span>
	<span class="token comment">// to as its kernel stack. CPU i's kernel stack grows down from virtual</span>
	<span class="token comment">// address kstacktop_i = KSTACKTOP - i * (KSTKSIZE + KSTKGAP), and is</span>
	<span class="token comment">// divided into two pieces, just like the single stack you set up in</span>
	<span class="token comment">// mem_init:</span>
	<span class="token comment">//     * [kstacktop_i - KSTKSIZE, kstacktop_i)</span>
	<span class="token comment">//          -- backed by physical memory</span>
	<span class="token comment">//     * [kstacktop_i - (KSTKSIZE + KSTKGAP), kstacktop_i - KSTKSIZE)</span>
	<span class="token comment">//          -- not backed; so if the kernel overflows its stack,</span>
	<span class="token comment">//             it will fault rather than overwrite another CPU's stack.</span>
	<span class="token comment">//             Known as a "guard page".</span>
	<span class="token comment">//     Permissions: kernel RW, user NONE</span>
	<span class="token comment">//</span>
	<span class="token comment">// LAB 4: Your code here:</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>NCPU<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		uintptr_t kstacktop_i <span class="token operator">=</span> KSTACKTOP <span class="token operator">-</span> i <span class="token operator">*</span> <span class="token punctuation">(</span>KSTKSIZE <span class="token operator">+</span> KSTKGAP<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">boot_map_region</span><span class="token punctuation">(</span>kern_pgdir<span class="token punctuation">,</span> kstacktop_i <span class="token operator">-</span> KSTKSIZE<span class="token punctuation">,</span> KSTKSIZE<span class="token punctuation">,</span> 
                        <span class="token function">PADDR</span><span class="token punctuation">(</span>percpu_kstacks<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> PTE_W <span class="token operator">|</span> PTE_P<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p></p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">$ <span class="token function">make</span> qemu-nox
<span class="token punctuation">..</span>.
check_page_free_list<span class="token punctuation">(</span><span class="token punctuation">)</span> succeeded<span class="token operator">!</span>
check_page_alloc<span class="token punctuation">(</span><span class="token punctuation">)</span> succeeded<span class="token operator">!</span>
check_page<span class="token punctuation">(</span><span class="token punctuation">)</span> succeeded<span class="token operator">!</span>
check_kern_pgdir<span class="token punctuation">(</span><span class="token punctuation">)</span> succeeded<span class="token operator">!</span>
check_page_free_list<span class="token punctuation">(</span><span class="token punctuation">)</span> succeeded<span class="token operator">!</span>
check_page_installed_pgdir<span class="token punctuation">(</span><span class="token punctuation">)</span> succeeded<span class="token operator">!</span>
SMP: CPU 0 found 1 CPU<span class="token punctuation">(</span>s<span class="token punctuation">)</span>
enabled interrupts: 1 2
<span class="token punctuation">[</span>00000000<span class="token punctuation">]</span> new <span class="token function">env</span> 00001000
kernel panic on CPU 0 at kern/trap.c:220: page fault <span class="token keyword">in</span> kernel
Welcome to the JOS kernel monitor<span class="token operator">!</span>
Type <span class="token string">'help'</span> <span class="token keyword">for</span> a list of commands.
K<span class="token operator">></span></code></pre></div>
<h3>Exercise 4</h3>
<p><code class="language-text">kern/trap.c</code><code class="language-text">trap_init_percpu()</code>BSPTSSTSS descriptor<code class="language-text">ts</code></p>
<div class="gatsby-highlight" data-language="c"><pre class="language-c"><code class="language-c"><span class="token comment">// Initialize and load the per-CPU TSS and IDT</span>
<span class="token keyword">void</span>
<span class="token function">trap_init_percpu</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token comment">// The example code here sets up the Task State Segment (TSS) and</span>
	<span class="token comment">// the TSS descriptor for CPU 0. But it is incorrect if we are</span>
	<span class="token comment">// running on other CPUs because each CPU has its own kernel stack.</span>
	<span class="token comment">// Fix the code so that it works for all CPUs.</span>
	<span class="token comment">//</span>
	<span class="token comment">// Hints:</span>
	<span class="token comment">//   - The macro "thiscpu" always refers to the current CPU's</span>
	<span class="token comment">//     struct CpuInfo;</span>
	<span class="token comment">//   - The ID of the current CPU is given by cpunum() or</span>
	<span class="token comment">//     thiscpu->cpu_id;</span>
	<span class="token comment">//   - Use "thiscpu->cpu_ts" as the TSS for the current CPU,</span>
	<span class="token comment">//     rather than the global "ts" variable;</span>
	<span class="token comment">//   - Use gdt[(GD_TSS0 >> 3) + i] for CPU i's TSS descriptor;</span>
	<span class="token comment">//   - You mapped the per-CPU kernel stacks in mem_init_mp()</span>
	<span class="token comment">//   - Initialize cpu_ts.ts_iomb to prevent unauthorized environments</span>
	<span class="token comment">//     from doing IO (0 is not the correct value!)</span>
	<span class="token comment">//</span>
	<span class="token comment">// ltr sets a 'busy' flag in the TSS selector, so if you</span>
	<span class="token comment">// accidentally load the same TSS on more than one CPU, you'll</span>
	<span class="token comment">// get a triple fault.  If you set up an individual CPU's TSS</span>
	<span class="token comment">// wrong, you may not get a fault until you try to return from</span>
	<span class="token comment">// user space on that CPU.</span>
	<span class="token comment">//</span>
	<span class="token comment">// LAB 4: Your code here:</span>

	<span class="token comment">// Setup a TSS so that we get the right stack</span>
	<span class="token comment">// when we trap to the kernel.</span>
	thiscpu<span class="token operator">-></span>cpu_ts<span class="token punctuation">.</span>ts_esp0 <span class="token operator">=</span> KSTACKTOP <span class="token operator">-</span> <span class="token function">cpunum</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span>KSTKSIZE <span class="token operator">+</span> KSTKGAP<span class="token punctuation">)</span><span class="token punctuation">;</span>
	thiscpu<span class="token operator">-></span>cpu_ts<span class="token punctuation">.</span>ts_ss0 <span class="token operator">=</span> GD_KD<span class="token punctuation">;</span>
	thiscpu<span class="token operator">-></span>cpu_ts<span class="token punctuation">.</span>ts_iomb <span class="token operator">=</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token keyword">struct</span> Taskstate<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// Initialize the TSS slot of the gdt.</span>
	gdt<span class="token punctuation">[</span><span class="token punctuation">(</span>GD_TSS0 <span class="token operator">>></span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">cpunum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">SEG16</span><span class="token punctuation">(</span>STS_T32A<span class="token punctuation">,</span> <span class="token punctuation">(</span>uint32_t<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token operator">&amp;</span>thiscpu<span class="token operator">-></span>cpu_ts<span class="token punctuation">)</span><span class="token punctuation">,</span>
					<span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token keyword">struct</span> Taskstate<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	gdt<span class="token punctuation">[</span><span class="token punctuation">(</span>GD_TSS0 <span class="token operator">>></span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">cpunum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">.</span>sd_s <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

	<span class="token comment">// Load the TSS selector (like other segment selectors, the</span>
	<span class="token comment">// bottom three bits are special; we leave them 0)</span>
	<span class="token function">ltr</span><span class="token punctuation">(</span>GD_TSS0 <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token function">cpunum</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// Load the IDT</span>
	<span class="token function">lidt</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>idt_pd<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p></p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">$ <span class="token function">make</span> qemu-nox CPUS<span class="token operator">=</span>4
<span class="token punctuation">..</span>.
Physical memory: 131072K available, base <span class="token operator">=</span> 640K, extended <span class="token operator">=</span> 130432K
check_page_free_list<span class="token punctuation">(</span><span class="token punctuation">)</span> succeeded<span class="token operator">!</span>
check_page_alloc<span class="token punctuation">(</span><span class="token punctuation">)</span> succeeded<span class="token operator">!</span>
check_page<span class="token punctuation">(</span><span class="token punctuation">)</span> succeeded<span class="token operator">!</span>
check_kern_pgdir<span class="token punctuation">(</span><span class="token punctuation">)</span> succeeded<span class="token operator">!</span>
check_page_free_list<span class="token punctuation">(</span><span class="token punctuation">)</span> succeeded<span class="token operator">!</span>
check_page_installed_pgdir<span class="token punctuation">(</span><span class="token punctuation">)</span> succeeded<span class="token operator">!</span>
SMP: CPU 0 found 4 CPU<span class="token punctuation">(</span>s<span class="token punctuation">)</span>
enabled interrupts: 1 2
SMP: CPU 1 starting
SMP: CPU 2 starting
SMP: CPU 3 starting
<span class="token punctuation">[</span>00000000<span class="token punctuation">]</span> new <span class="token function">env</span> 00001000
<span class="token punctuation">..</span>.</code></pre></div>
<h3>Locking</h3>
<p><code class="language-text">mp_main()</code>APspin:</p>
<div class="gatsby-highlight" data-language="c"><pre class="language-c"><code class="language-c"><span class="token comment">// Setup code for APs</span>
<span class="token keyword">void</span>
<span class="token function">mp_main</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token comment">// We are in high EIP now, safe to switch to kern_pgdir </span>
	<span class="token function">lcr3</span><span class="token punctuation">(</span><span class="token function">PADDR</span><span class="token punctuation">(</span>kern_pgdir<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">cprintf</span><span class="token punctuation">(</span><span class="token string">"SMP: CPU %d starting\n"</span><span class="token punctuation">,</span> <span class="token function">cpunum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token function">lapic_init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">env_init_percpu</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">trap_init_percpu</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">xchg</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>thiscpu<span class="token operator">-></span>cpu_status<span class="token punctuation">,</span> CPU_STARTED<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// tell boot_aps() we're up</span>

	<span class="token comment">// Now that we have finished some basic setup, call sched_yield()</span>
	<span class="token comment">// to start running processes on this CPU.  But make sure that</span>
	<span class="token comment">// only one CPU can enter the scheduler at a time!</span>
	<span class="token comment">//</span>
	<span class="token comment">// Your code here:</span>

	<span class="token comment">// Remove this after you finish Exercise 6</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span><span class="token punctuation">;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>APrace<code class="language-text">boot_aps</code>CPUCPUrace...<em>big kernel lock</em>big kernel lockkernel modeuser modeuse modekernel</p>
<p><code class="language-text">kern/spinlock.h</code>big kernel lock<code class="language-text">kernel_lock</code><code class="language-text">lock_kernel()</code><code class="language-text">unlock_kernel()</code>4</p>
<ul>
<li><code class="language-text">i386_init()</code>, BSPCPUsacquire</li>
<li><code class="language-text">mp_main()</code>, APacquire, <code class="language-text">sched_yield()</code>AP</li>
<li><code class="language-text">trap()</code>, trapuser modeacquire</li>
<li><code class="language-text">env_run()</code>, release the lock <em>right before</em> switching to user mode. races or deadlocks.</li>
</ul>
<h3>Exercise 5</h3>
<p>4</p>
<div class="gatsby-highlight" data-language="c"><pre class="language-c"><code class="language-c"><span class="token comment">// i386_init()</span>
	<span class="token comment">// Acquire the big kernel lock before waking up APs</span>
	<span class="token comment">// Your code here:</span>
	<span class="token function">lock_kernel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// Starting non-boot CPUs</span>
	<span class="token function">boot_aps</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// mp_main()</span>
	<span class="token comment">// Now that we have finished some basic setup, call sched_yield()</span>
	<span class="token comment">// to start running processes on this CPU.  But make sure that</span>
	<span class="token comment">// only one CPU can enter the scheduler at a time!</span>
	<span class="token comment">//</span>
	<span class="token comment">// Your code here:</span>
	<span class="token function">lock_kernel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">sched_yield</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">// Remove this after you finish Exercise 6</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span><span class="token punctuation">;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// trap()</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>tf<span class="token operator">-></span>tf_cs <span class="token operator">&amp;</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">// Trapped from user mode.</span>
		<span class="token comment">// Acquire the big kernel lock before doing any</span>
		<span class="token comment">// serious kernel work.</span>
		<span class="token comment">// LAB 4: Your code here.</span>
        <span class="token function">lock_kernel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">assert</span><span class="token punctuation">(</span>curenv<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

<span class="token comment">// env_run()</span>
<span class="token keyword">void</span>
<span class="token function">env_run</span><span class="token punctuation">(</span><span class="token keyword">struct</span> Env <span class="token operator">*</span>e<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token comment">// Step 1: If this is a context switch (a new environment is running):</span>
	<span class="token comment">//	   1. Set the current environment (if any) back to</span>
	<span class="token comment">//	      ENV_RUNNABLE if it is ENV_RUNNING (think about</span>
	<span class="token comment">//	      what other states it can be in),</span>
	<span class="token comment">//	   2. Set 'curenv' to the new environment,</span>
	<span class="token comment">//	   3. Set its status to ENV_RUNNING,</span>
	<span class="token comment">//	   4. Update its 'env_runs' counter,</span>
	<span class="token comment">//	   5. Use lcr3() to switch to its address space.</span>
	<span class="token comment">// Step 2: Use env_pop_tf() to restore the environment's</span>
	<span class="token comment">//	   registers and drop into user mode in the</span>
	<span class="token comment">//	   environment.</span>

	<span class="token comment">// Hint: This function loads the new environment's state from</span>
	<span class="token comment">//	e->env_tf.  Go back through the code you wrote above</span>
	<span class="token comment">//	and make sure you have set the relevant parts of</span>
	<span class="token comment">//	e->env_tf to sensible values.</span>

	<span class="token comment">// LAB 3: Your code here.</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span>curenv <span class="token operator">&amp;&amp;</span> curenv<span class="token operator">-></span>env_status <span class="token operator">==</span> ENV_RUNNING<span class="token punctuation">)</span>
		curenv<span class="token operator">-></span>env_status <span class="token operator">=</span> ENV_RUNNABLE<span class="token punctuation">;</span>
	curenv <span class="token operator">=</span> e<span class="token punctuation">;</span>
	curenv<span class="token operator">-></span>env_status <span class="token operator">=</span> ENV_RUNNING<span class="token punctuation">;</span>
	curenv<span class="token operator">-></span>env_runs<span class="token operator">++</span><span class="token punctuation">;</span>
	<span class="token function">lcr3</span><span class="token punctuation">(</span><span class="token function">PADDR</span><span class="token punctuation">(</span>curenv<span class="token operator">-></span>env_pgdir<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">unlock_kernel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">env_pop_tf</span><span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token punctuation">(</span>curenv<span class="token operator">-></span>env_tf<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">// panic("env_run not yet implemented");</span>
<span class="token punctuation">}</span></code></pre></div>
<p><code class="language-text">env_run</code>step 1step 2</p>
<p>exercise </p>
<ul>
<li>
<p>big kernel lockkernel modekernel stack</p>
<p><code class="language-text">trap</code><code class="language-text">trapentry.S</code><code class="language-text">_alltraps</code><code class="language-text">esp</code>CPUuser modekernel mode<code class="language-text">esp</code>CPU 0CPU 1CPU 0CPU 0<code class="language-text">trap()</code><code class="language-text">trap</code>race</p>
</li>
</ul>
<h3>Round-Robin Scheduling</h3>
<p>Round-RobinROS</p>
<ul>
<li><code class="language-text">kern/sched.c</code><code class="language-text">sched_yield()</code><code class="language-text">envs[]</code><code class="language-text">ENV_RUNNABLE</code><code class="language-text">env_run()</code></li>
<li><code class="language-text">sched_yield()</code>CPU<code class="language-text">ENV_RUNNING</code></li>
<li>system call<code class="language-text">sys_yield()</code><code class="language-text">sched_yield()</code>CPU</li>
</ul>
<h3>Exercise 6</h3>
<p><code class="language-text">sched_yield()</code><code class="language-text">sys_yield()</code><code class="language-text">syscall()</code><code class="language-text">kern/init.c</code>3<code class="language-text">user/yield.c</code></p>
<p><code class="language-text">sched_yield()</code></p>
<div class="gatsby-highlight" data-language="c"><pre class="language-c"><code class="language-c"><span class="token comment">// Choose a user environment to run and run it.</span>
<span class="token keyword">void</span>
<span class="token function">sched_yield</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token keyword">struct</span> Env <span class="token operator">*</span>idle<span class="token punctuation">;</span>

	<span class="token comment">// Implement simple round-robin scheduling.</span>
	<span class="token comment">//</span>
	<span class="token comment">// Search through 'envs' for an ENV_RUNNABLE environment in</span>
	<span class="token comment">// circular fashion starting just after the env this CPU was</span>
	<span class="token comment">// last running.  Switch to the first such environment found.</span>
	<span class="token comment">//</span>
	<span class="token comment">// If no envs are runnable, but the environment previously</span>
	<span class="token comment">// running on this CPU is still ENV_RUNNING, it's okay to</span>
	<span class="token comment">// choose that environment.</span>
	<span class="token comment">//</span>
	<span class="token comment">// Never choose an environment that's currently running on</span>
	<span class="token comment">// another CPU (env_status == ENV_RUNNING). If there are</span>
	<span class="token comment">// no runnable environments, simply drop through to the code</span>
	<span class="token comment">// below to halt the cpu.</span>

	<span class="token comment">// LAB 4: Your code here.</span>
	idle <span class="token operator">=</span> curenv <span class="token operator">==</span> <span class="token constant">NULL</span> <span class="token operator">?</span> envs <span class="token punctuation">:</span> <span class="token punctuation">(</span>curenv <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">int</span> i<span class="token punctuation">;</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">!=</span> NENV<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">struct</span> Env <span class="token operator">*</span>e <span class="token operator">=</span> envs <span class="token operator">+</span> <span class="token punctuation">(</span>idle <span class="token operator">-</span> envs <span class="token operator">+</span> i<span class="token punctuation">)</span> <span class="token operator">%</span> NENV<span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token operator">-></span>env_status <span class="token operator">!=</span> ENV_RUNNABLE<span class="token punctuation">)</span>
			<span class="token keyword">continue</span><span class="token punctuation">;</span>
		<span class="token function">env_run</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">break</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span>i <span class="token operator">==</span> NENV <span class="token operator">&amp;&amp;</span> curenv <span class="token operator">&amp;&amp;</span> curenv<span class="token operator">-></span>env_status <span class="token operator">==</span> ENV_RUNNING<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token function">env_run</span><span class="token punctuation">(</span>curenv<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token comment">// sched_halt never returns</span>
	<span class="token function">sched_halt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p><code class="language-text">syscall()</code><code class="language-text">sys_yield</code><code class="language-text">SYS_yield</code><code class="language-text">inc/syscall.h</code></p>
<div class="gatsby-highlight" data-language="c"><pre class="language-c"><code class="language-c">		<span class="token keyword">case</span> SYS_yield<span class="token punctuation">:</span>
			<span class="token function">sys_yield</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span></code></pre></div>
<p><code class="language-text">init()</code>3yield</p>
<div class="gatsby-highlight" data-language="c"><pre class="language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">if</span> defined(TEST)</span>
	<span class="token comment">// Don't touch -- used by grading script!</span>
	<span class="token function">ENV_CREATE</span><span class="token punctuation">(</span>TEST<span class="token punctuation">,</span> ENV_TYPE_USER<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token macro property">#<span class="token directive keyword">else</span></span>
	<span class="token comment">// Touch all you want.</span>
	<span class="token function">ENV_CREATE</span><span class="token punctuation">(</span>user_yield<span class="token punctuation">,</span> ENV_TYPE_USER<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">ENV_CREATE</span><span class="token punctuation">(</span>user_yield<span class="token punctuation">,</span> ENV_TYPE_USER<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">ENV_CREATE</span><span class="token punctuation">(</span>user_yield<span class="token punctuation">,</span> ENV_TYPE_USER<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//ENV_CREATE(user_primes, ENV_TYPE_USER);</span>
<span class="token macro property">#<span class="token directive keyword">endif</span> </span><span class="token comment">// TEST*</span>
	<span class="token comment">// Schedule and run the first user environment!</span>
	<span class="token function">sched_yield</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p></p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">$ <span class="token function">make</span> qemu-nox
<span class="token punctuation">..</span>.
<span class="token punctuation">[</span>00000000<span class="token punctuation">]</span> new <span class="token function">env</span> 00001000
<span class="token punctuation">[</span>00000000<span class="token punctuation">]</span> new <span class="token function">env</span> 00001001
<span class="token punctuation">[</span>00000000<span class="token punctuation">]</span> new <span class="token function">env</span> 00001002
Hello, I am environment 00001000.
Hello, I am environment 00001001.
Hello, I am environment 00001002.
Back <span class="token keyword">in</span> environment 00001000, iteration 0.
Back <span class="token keyword">in</span> environment 00001001, iteration 0.
Back <span class="token keyword">in</span> environment 00001002, iteration 0.
Back <span class="token keyword">in</span> environment 00001000, iteration 1.
Back <span class="token keyword">in</span> environment 00001001, iteration 1.
Back <span class="token keyword">in</span> environment 00001002, iteration 1.
Back <span class="token keyword">in</span> environment 00001000, iteration 2.
Back <span class="token keyword">in</span> environment 00001001, iteration 2.
Back <span class="token keyword">in</span> environment 00001002, iteration 2.
Back <span class="token keyword">in</span> environment 00001000, iteration 3.
Back <span class="token keyword">in</span> environment 00001001, iteration 3.
Back <span class="token keyword">in</span> environment 00001002, iteration 3.
Back <span class="token keyword">in</span> environment 00001000, iteration 4.
All <span class="token keyword">done</span> <span class="token keyword">in</span> environment 00001000.
<span class="token punctuation">[</span>00001000<span class="token punctuation">]</span> exiting gracefully
<span class="token punctuation">[</span>00001000<span class="token punctuation">]</span> <span class="token function">free</span> <span class="token function">env</span> 00001000
Back <span class="token keyword">in</span> environment 00001001, iteration 4.
All <span class="token keyword">done</span> <span class="token keyword">in</span> environment 00001001.
<span class="token punctuation">[</span>00001001<span class="token punctuation">]</span> exiting gracefully
<span class="token punctuation">[</span>00001001<span class="token punctuation">]</span> <span class="token function">free</span> <span class="token function">env</span> 00001001
Back <span class="token keyword">in</span> environment 00001002, iteration 4.
All <span class="token keyword">done</span> <span class="token keyword">in</span> environment 00001002.
<span class="token punctuation">[</span>00001002<span class="token punctuation">]</span> exiting gracefully
<span class="token punctuation">[</span>00001002<span class="token punctuation">]</span> <span class="token function">free</span> <span class="token function">env</span> 00001002
No runnable environments <span class="token keyword">in</span> the system<span class="token operator">!</span>
<span class="token punctuation">..</span>.</code></pre></div>
<p>CPUS=2</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">$ <span class="token function">make</span> qemu-nox CPUS<span class="token operator">=</span>2
***
*** Use Ctrl-a x to <span class="token keyword">exit</span> qemu
***
<span class="token punctuation">..</span>.
<span class="token punctuation">[</span>00000000<span class="token punctuation">]</span> new <span class="token function">env</span> 00001000
<span class="token punctuation">[</span>00000000<span class="token punctuation">]</span> new <span class="token function">env</span> 00001001
<span class="token punctuation">[</span>00000000<span class="token punctuation">]</span> new <span class="token function">env</span> 00001002
Hello, I am environment 00001000.
Hello, I am environment 00001001.
Back <span class="token keyword">in</span> environment 00001000, iteration 0.
Hello, I am environment 00001002.
Back <span class="token keyword">in</span> environment 00001001, iteration 0.
Back <span class="token keyword">in</span> environment 00001000, iteration 1.
Back <span class="token keyword">in</span> environment 00001002, iteration 0.
Back <span class="token keyword">in</span> environment 00001001, iteration 1.
Back <span class="token keyword">in</span> environment 00001000, iteration 2.
Back <span class="token keyword">in</span> environment 00001002, iteration 1.
Back <span class="token keyword">in</span> environment 00001001, iteration 2.
Back <span class="token keyword">in</span> environment 00001000, iteration 3.
Back <span class="token keyword">in</span> environment 00001001, iteration 3.
Back <span class="token keyword">in</span> environment 00001002, iteration 2.
Back <span class="token keyword">in</span> environment 00001000, iteration 4.
Back <span class="token keyword">in</span> environment 00001001, iteration 4.
All <span class="token keyword">done</span> <span class="token keyword">in</span> environment 00001000.
All <span class="token keyword">done</span> <span class="token keyword">in</span> environment 00001001.
<span class="token punctuation">[</span>00001000<span class="token punctuation">]</span> exiting gracefully
<span class="token punctuation">[</span>00001000<span class="token punctuation">]</span> <span class="token function">free</span> <span class="token function">env</span> 00001000
<span class="token punctuation">[</span>00001001<span class="token punctuation">]</span> exiting gracefully
<span class="token punctuation">[</span>00001001<span class="token punctuation">]</span> <span class="token function">free</span> <span class="token function">env</span> 00001001
Back <span class="token keyword">in</span> environment 00001002, iteration 3.
Back <span class="token keyword">in</span> environment 00001002, iteration 4.
All <span class="token keyword">done</span> <span class="token keyword">in</span> environment 00001002.
<span class="token punctuation">[</span>00001002<span class="token punctuation">]</span> exiting gracefully
<span class="token punctuation">[</span>00001002<span class="token punctuation">]</span> <span class="token function">free</span> <span class="token function">env</span> 00001002
No runnable environments <span class="token keyword">in</span> the system<span class="token operator">!</span>
<span class="token punctuation">..</span>.</code></pre></div>
<ul>
<li>
<p><code class="language-text">env_run()</code>context switchdereference <code class="language-text">e</code></p>
<p><code class="language-text">e</code>kernel</p>
</li>
<li>
<p></p>
<p>...<code class="language-text">_alltraps</code><code class="language-text">env_run</code><code class="language-text">env_pop_tf()</code></p>
</li>
</ul>
<h3>System Calls for Environment Creation</h3>
<p>kernelsystem calls</p>
<p>Unix<code class="language-text">fork()</code>process creation primitiveaddress spaceprocess IDparent process ID<code class="language-text">fork()</code>ID0</p>
<p>primitivesystem callsystem call<code class="language-text">fork</code>system call</p>
<ul>
<li>
<p><code class="language-text">sys_exofork</code></p>
<p>address space<code class="language-text">sys_exofork</code><code class="language-text">envid_t</code>0parentchildrunnable0</p>
</li>
<li>
<p><code class="language-text">sys_env_set_status</code></p>
<p><code class="language-text">ENV_RUNNABLE</code><code class="language-text">ENV_NOT_RUNNABLE</code></p>
</li>
<li>
<p><code class="language-text">sys_page_alloc</code></p>
<p>pageaddress space</p>
</li>
<li>
<p><code class="language-text">sys_page_map</code></p>
<p>pagepagememory sharing arrangement inplace</p>
</li>
<li>
<p><code class="language-text">sys_page_unmap</code></p>
<p>unmap a page mapped at a given VA</p>
</li>
</ul>
<p>environment IDsystem callJOS0<code class="language-text">envid2env()</code></p>
<p><code class="language-text">user/dumbfork.c</code><code class="language-text">fork</code>system call<code class="language-text">sys_yield</code>10parent exit20child</p>
<h3>Exercise 7</h3>
<p><code class="language-text">kern/syscall.c</code>system call</p>
<p><code class="language-text">sys_exofork</code></p>
<div class="gatsby-highlight" data-language="c"><pre class="language-c"><code class="language-c"><span class="token comment">// Allocate a new environment.</span>
<span class="token comment">// Returns envid of new environment, or &lt; 0 on error.  Errors are:</span>
<span class="token comment">//	-E_NO_FREE_ENV if no free environment is available.</span>
<span class="token comment">//	-E_NO_MEM on memory exhaustion.</span>
<span class="token keyword">static</span> envid_t
<span class="token function">sys_exofork</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token comment">// Create the new environment with env_alloc(), from kern/env.c.</span>
	<span class="token comment">// It should be left as env_alloc created it, except that</span>
	<span class="token comment">// status is set to ENV_NOT_RUNNABLE, and the register set is copied</span>
	<span class="token comment">// from the current environment -- but tweaked so sys_exofork</span>
	<span class="token comment">// will appear to return 0.</span>

	<span class="token comment">// LAB 4: Your code here.</span>
	<span class="token keyword">int</span> r<span class="token punctuation">;</span>
	<span class="token keyword">struct</span> Env <span class="token operator">*</span>e <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>
	
	<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">(</span>r <span class="token operator">=</span> <span class="token function">env_alloc</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>e<span class="token punctuation">,</span> curenv<span class="token operator">-></span>env_id<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
		<span class="token keyword">return</span> r<span class="token punctuation">;</span>
	e<span class="token operator">-></span>env_status <span class="token operator">=</span> ENV_NOT_RUNNABLE<span class="token punctuation">;</span>
	e<span class="token operator">-></span>env_tf <span class="token operator">=</span> curenv<span class="token operator">-></span>env_tf<span class="token punctuation">;</span>
	e<span class="token operator">-></span>env_tf<span class="token punctuation">.</span>tf_regs<span class="token punctuation">.</span>reg_eax <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> e<span class="token operator">-></span>env_id<span class="token punctuation">;</span>
	<span class="token comment">//panic("sys_exofork not implemented");</span>
<span class="token punctuation">}</span></code></pre></div>
<p><code class="language-text">sys_env_set_status</code>:</p>
<div class="gatsby-highlight" data-language="c"><pre class="language-c"><code class="language-c"><span class="token comment">// Set envid's env_status to status, which must be ENV_RUNNABLE</span>
<span class="token comment">// or ENV_NOT_RUNNABLE.</span>
<span class="token comment">//</span>
<span class="token comment">// Returns 0 on success, &lt; 0 on error.  Errors are:</span>
<span class="token comment">//	-E_BAD_ENV if environment envid doesn't currently exist,</span>
<span class="token comment">//		or the caller doesn't have permission to change envid.</span>
<span class="token comment">//	-E_INVAL if status is not a valid status for an environment.</span>
<span class="token keyword">static</span> <span class="token keyword">int</span>
<span class="token function">sys_env_set_status</span><span class="token punctuation">(</span>envid_t envid<span class="token punctuation">,</span> <span class="token keyword">int</span> status<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token comment">// Hint: Use the 'envid2env' function from kern/env.c to translate an</span>
	<span class="token comment">// envid to a struct Env.</span>
	<span class="token comment">// You should set envid2env's third argument to 1, which will</span>
	<span class="token comment">// check whether the current environment has permission to set</span>
	<span class="token comment">// envid's status.</span>

	<span class="token comment">// LAB 4: Your code here.</span>
	<span class="token keyword">int</span> r<span class="token punctuation">;</span>
	<span class="token keyword">struct</span> Env <span class="token operator">*</span>e <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>
	
	<span class="token keyword">if</span><span class="token punctuation">(</span>status <span class="token operator">!=</span> ENV_NOT_RUNNABLE <span class="token operator">&amp;&amp;</span> status <span class="token operator">!=</span> ENV_RUNNABLE<span class="token punctuation">)</span>
		<span class="token keyword">return</span> <span class="token operator">-</span>E_INVAL<span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>r <span class="token operator">=</span> <span class="token function">envid2env</span><span class="token punctuation">(</span>envid<span class="token punctuation">,</span> <span class="token operator">&amp;</span>e<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
		<span class="token keyword">return</span> r<span class="token punctuation">;</span>
	e<span class="token operator">-></span>env_status <span class="token operator">=</span> status<span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token comment">//panic("sys_env_set_status not implemented");</span>
<span class="token punctuation">}</span></code></pre></div>
<p><code class="language-text">sys_page_alloc</code>:</p>
<div class="gatsby-highlight" data-language="c"><pre class="language-c"><code class="language-c"><span class="token comment">// Allocate a page of memory and map it at 'va' with permission</span>
<span class="token comment">// 'perm' in the address space of 'envid'.</span>
<span class="token comment">// The page's contents are set to 0.</span>
<span class="token comment">// If a page is already mapped at 'va', that page is unmapped as a</span>
<span class="token comment">// side effect.</span>
<span class="token comment">//</span>
<span class="token comment">// perm -- PTE_U | PTE_P must be set, PTE_AVAIL | PTE_W may or may not be set,</span>
<span class="token comment">//         but no other bits may be set.  See PTE_SYSCALL in inc/mmu.h.</span>
<span class="token comment">//</span>
<span class="token comment">// Return 0 on success, &lt; 0 on error.  Errors are:</span>
<span class="token comment">//	-E_BAD_ENV if environment envid doesn't currently exist,</span>
<span class="token comment">//		or the caller doesn't have permission to change envid.</span>
<span class="token comment">//	-E_INVAL if va >= UTOP, or va is not page-aligned.</span>
<span class="token comment">//	-E_INVAL if perm is inappropriate (see above).</span>
<span class="token comment">//	-E_NO_MEM if there's no memory to allocate the new page,</span>
<span class="token comment">//		or to allocate any necessary page tables.</span>
<span class="token keyword">static</span> <span class="token keyword">int</span>
<span class="token function">sys_page_alloc</span><span class="token punctuation">(</span>envid_t envid<span class="token punctuation">,</span> <span class="token keyword">void</span> <span class="token operator">*</span>va<span class="token punctuation">,</span> <span class="token keyword">int</span> perm<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token comment">// Hint: This function is a wrapper around page_alloc() and</span>
	<span class="token comment">//   page_insert() from kern/pmap.c.</span>
	<span class="token comment">//   Most of the new code you write should be to check the</span>
	<span class="token comment">//   parameters for correctness.</span>
	<span class="token comment">//   If page_insert() fails, remember to free the page you</span>
	<span class="token comment">//   allocated!</span>

	<span class="token comment">// LAB 4: Your code here.</span>
	<span class="token keyword">int</span> r<span class="token punctuation">;</span>
	<span class="token keyword">struct</span> Env <span class="token operator">*</span>e <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>
	<span class="token keyword">struct</span> PageInfo <span class="token operator">*</span>pp <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>
	
	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>uint32_t<span class="token punctuation">)</span>va <span class="token operator">>=</span> UTOP <span class="token operator">||</span> <span class="token function">ROUNDDOWN</span><span class="token punctuation">(</span><span class="token punctuation">(</span>uint32_t<span class="token punctuation">)</span>va<span class="token punctuation">,</span> PGSIZE<span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token punctuation">(</span>uint32_t<span class="token punctuation">)</span>va<span class="token punctuation">)</span>
		<span class="token keyword">return</span> <span class="token operator">-</span>E_INVAL<span class="token punctuation">;</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">(</span>perm <span class="token operator">&amp;</span> <span class="token punctuation">(</span>PTE_U <span class="token operator">|</span> PTE_P<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token punctuation">(</span>PTE_U <span class="token operator">|</span> PTE_P<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token punctuation">(</span>perm <span class="token operator">&amp;</span> <span class="token operator">~</span>PTE_SYSCALL<span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span>
		<span class="token keyword">return</span> <span class="token operator">-</span>E_INVAL<span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>r <span class="token operator">=</span> <span class="token function">envid2env</span><span class="token punctuation">(</span>envid<span class="token punctuation">,</span> <span class="token operator">&amp;</span>e<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
		<span class="token keyword">return</span> r<span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>pp <span class="token operator">=</span> <span class="token function">page_alloc</span><span class="token punctuation">(</span>ALLOC_ZERO<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">==</span> <span class="token constant">NULL</span><span class="token punctuation">)</span>
		<span class="token keyword">return</span> <span class="token operator">-</span>E_NO_MEM<span class="token punctuation">;</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">(</span>r <span class="token operator">=</span> <span class="token function">page_insert</span><span class="token punctuation">(</span>e<span class="token operator">-></span>env_pgdir<span class="token punctuation">,</span> pp<span class="token punctuation">,</span> va<span class="token punctuation">,</span> perm<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token function">page_free</span><span class="token punctuation">(</span>pp<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> r<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token comment">//panic("sys_page_alloc not implemented");</span>
<span class="token punctuation">}</span></code></pre></div>
<p><code class="language-text">sys_page_map</code></p>
<div class="gatsby-highlight" data-language="c"><pre class="language-c"><code class="language-c"><span class="token comment">// Map the page of memory at 'srcva' in srcenvid's address space</span>
<span class="token comment">// at 'dstva' in dstenvid's address space with permission 'perm'.</span>
<span class="token comment">// Perm has the same restrictions as in sys_page_alloc, except</span>
<span class="token comment">// that it also must not grant write access to a read-only</span>
<span class="token comment">// page.</span>
<span class="token comment">//</span>
<span class="token comment">// Return 0 on success, &lt; 0 on error.  Errors are:</span>
<span class="token comment">//	-E_BAD_ENV if srcenvid and/or dstenvid doesn't currently exist,</span>
<span class="token comment">//		or the caller doesn't have permission to change one of them.</span>
<span class="token comment">//	-E_INVAL if srcva >= UTOP or srcva is not page-aligned,</span>
<span class="token comment">//		or dstva >= UTOP or dstva is not page-aligned.</span>
<span class="token comment">//	-E_INVAL is srcva is not mapped in srcenvid's address space.</span>
<span class="token comment">//	-E_INVAL if perm is inappropriate (see sys_page_alloc).</span>
<span class="token comment">//	-E_INVAL if (perm &amp; PTE_W), but srcva is read-only in srcenvid's</span>
<span class="token comment">//		address space.</span>
<span class="token comment">//	-E_NO_MEM if there's no memory to allocate any necessary page tables.</span>
<span class="token keyword">static</span> <span class="token keyword">int</span>
<span class="token function">sys_page_map</span><span class="token punctuation">(</span>envid_t srcenvid<span class="token punctuation">,</span> <span class="token keyword">void</span> <span class="token operator">*</span>srcva<span class="token punctuation">,</span>
	     envid_t dstenvid<span class="token punctuation">,</span> <span class="token keyword">void</span> <span class="token operator">*</span>dstva<span class="token punctuation">,</span> <span class="token keyword">int</span> perm<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token comment">// Hint: This function is a wrapper around page_lookup() and</span>
	<span class="token comment">//   page_insert() from kern/pmap.c.</span>
	<span class="token comment">//   Again, most of the new code you write should be to check the</span>
	<span class="token comment">//   parameters for correctness.</span>
	<span class="token comment">//   Use the third argument to page_lookup() to</span>
	<span class="token comment">//   check the current permissions on the page.</span>

	<span class="token comment">// LAB 4: Your code here.</span>
	<span class="token keyword">int</span> r<span class="token punctuation">;</span>
	<span class="token keyword">struct</span> Env <span class="token operator">*</span>srce <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>
	<span class="token keyword">struct</span> Env <span class="token operator">*</span>dste <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>
	<span class="token keyword">struct</span> PageInfo <span class="token operator">*</span>pp <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>
	pte_t <span class="token operator">*</span>src_pte <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>

	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>r <span class="token operator">=</span> <span class="token function">envid2env</span><span class="token punctuation">(</span>srcenvid<span class="token punctuation">,</span> <span class="token operator">&amp;</span>srce<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
		<span class="token keyword">return</span> r<span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>r <span class="token operator">=</span> <span class="token function">envid2env</span><span class="token punctuation">(</span>dstenvid<span class="token punctuation">,</span> <span class="token operator">&amp;</span>dste<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
		<span class="token keyword">return</span> r<span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>uint32_t<span class="token punctuation">)</span>srcva <span class="token operator">>=</span> UTOP <span class="token operator">||</span> <span class="token function">ROUNDDOWN</span><span class="token punctuation">(</span><span class="token punctuation">(</span>uint32_t<span class="token punctuation">)</span>srcva<span class="token punctuation">,</span> PGSIZE<span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token punctuation">(</span>uint32_t<span class="token punctuation">)</span>srcva<span class="token punctuation">)</span>
		<span class="token keyword">return</span> <span class="token operator">-</span>E_INVAL<span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>uint32_t<span class="token punctuation">)</span>dstva <span class="token operator">>=</span> UTOP <span class="token operator">||</span> <span class="token function">ROUNDDOWN</span><span class="token punctuation">(</span><span class="token punctuation">(</span>uint32_t<span class="token punctuation">)</span>dstva<span class="token punctuation">,</span> PGSIZE<span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token punctuation">(</span>uint32_t<span class="token punctuation">)</span>dstva<span class="token punctuation">)</span>
		<span class="token keyword">return</span> <span class="token operator">-</span>E_INVAL<span class="token punctuation">;</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">(</span>perm <span class="token operator">&amp;</span> <span class="token punctuation">(</span>PTE_U <span class="token operator">|</span> PTE_P<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token punctuation">(</span>PTE_U <span class="token operator">|</span> PTE_P<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token punctuation">(</span>perm <span class="token operator">&amp;</span> <span class="token operator">~</span>PTE_SYSCALL<span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span>
		<span class="token keyword">return</span> <span class="token operator">-</span>E_INVAL<span class="token punctuation">;</span>
	
	<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">(</span>pp <span class="token operator">=</span> <span class="token function">page_lookup</span><span class="token punctuation">(</span>srce<span class="token operator">-></span>env_pgdir<span class="token punctuation">,</span> srcva<span class="token punctuation">,</span> <span class="token operator">&amp;</span>src_pte<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token constant">NULL</span><span class="token punctuation">)</span>
		<span class="token keyword">return</span> <span class="token operator">-</span>E_INVAL<span class="token punctuation">;</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token operator">*</span>src_pte <span class="token operator">&amp;</span> PTE_W<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>perm <span class="token operator">&amp;</span> PTE_W<span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span>
		<span class="token keyword">return</span> <span class="token operator">-</span>E_INVAL<span class="token punctuation">;</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">(</span>r <span class="token operator">=</span> <span class="token function">page_insert</span><span class="token punctuation">(</span>dste<span class="token operator">-></span>env_pgdir<span class="token punctuation">,</span> pp<span class="token punctuation">,</span> dstva<span class="token punctuation">,</span> perm<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
		<span class="token keyword">return</span> r<span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token comment">//panic("sys_page_map not implemented");</span>
<span class="token punctuation">}</span></code></pre></div>
<p><code class="language-text">sys_page_unmap</code></p>
<div class="gatsby-highlight" data-language="c"><pre class="language-c"><code class="language-c"><span class="token comment">// Unmap the page of memory at 'va' in the address space of 'envid'.</span>
<span class="token comment">// If no page is mapped, the function silently succeeds.</span>
<span class="token comment">//</span>
<span class="token comment">// Return 0 on success, &lt; 0 on error.  Errors are:</span>
<span class="token comment">//	-E_BAD_ENV if environment envid doesn't currently exist,</span>
<span class="token comment">//		or the caller doesn't have permission to change envid.</span>
<span class="token comment">//	-E_INVAL if va >= UTOP, or va is not page-aligned.</span>
<span class="token keyword">static</span> <span class="token keyword">int</span>
<span class="token function">sys_page_unmap</span><span class="token punctuation">(</span>envid_t envid<span class="token punctuation">,</span> <span class="token keyword">void</span> <span class="token operator">*</span>va<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token comment">// Hint: This function is a wrapper around page_remove().</span>

	<span class="token comment">// LAB 4: Your code here.</span>
	<span class="token keyword">int</span> r<span class="token punctuation">;</span>
	<span class="token keyword">struct</span> Env <span class="token operator">*</span>e <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>
	
	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>uint32_t<span class="token punctuation">)</span>va <span class="token operator">>=</span> UTOP <span class="token operator">||</span> <span class="token function">ROUNDDOWN</span><span class="token punctuation">(</span><span class="token punctuation">(</span>uint32_t<span class="token punctuation">)</span>va<span class="token punctuation">,</span> PGSIZE<span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token punctuation">(</span>uint32_t<span class="token punctuation">)</span>va<span class="token punctuation">)</span>
		<span class="token keyword">return</span> <span class="token operator">-</span>E_INVAL<span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>r <span class="token operator">=</span> <span class="token function">envid2env</span><span class="token punctuation">(</span>envid<span class="token punctuation">,</span> <span class="token operator">&amp;</span>e<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
		<span class="token keyword">return</span> r<span class="token punctuation">;</span>
	<span class="token function">page_remove</span><span class="token punctuation">(</span>e<span class="token operator">-></span>env_pgdir<span class="token punctuation">,</span> va<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token comment">//panic("sys_page_unmap not implemented");</span>
<span class="token punctuation">}</span></code></pre></div>
<p>system call<code class="language-text">syscall()</code></p>
<div class="gatsby-highlight" data-language="c"><pre class="language-c"><code class="language-c"><span class="token comment">// Dispatches to the correct kernel function, passing the arguments.</span>
int32_t
<span class="token function">syscall</span><span class="token punctuation">(</span>uint32_t syscallno<span class="token punctuation">,</span> uint32_t a1<span class="token punctuation">,</span> uint32_t a2<span class="token punctuation">,</span> uint32_t a3<span class="token punctuation">,</span> uint32_t a4<span class="token punctuation">,</span> uint32_t a5<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token comment">// Call the function corresponding to the 'syscallno' parameter.</span>
	<span class="token comment">// Return any appropriate return value.</span>
	<span class="token comment">// LAB 3: Your code here.</span>
	<span class="token comment">// panic("syscall not implemented");</span>
	<span class="token keyword">switch</span> <span class="token punctuation">(</span>syscallno<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">case</span> SYS_cputs<span class="token punctuation">:</span>
			<span class="token function">sys_cputs</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">char</span> <span class="token operator">*</span><span class="token punctuation">)</span>a1<span class="token punctuation">,</span> <span class="token punctuation">(</span>size_t<span class="token punctuation">)</span>a2<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
		<span class="token keyword">case</span> SYS_cgetc<span class="token punctuation">:</span>
			<span class="token keyword">return</span> <span class="token function">sys_cgetc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">case</span> SYS_getenvid<span class="token punctuation">:</span>
			<span class="token keyword">return</span> <span class="token function">sys_getenvid</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">case</span> SYS_env_destroy<span class="token punctuation">:</span>
			<span class="token keyword">return</span> <span class="token function">sys_env_destroy</span><span class="token punctuation">(</span><span class="token function">sys_getenvid</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">case</span> SYS_yield<span class="token punctuation">:</span>
			<span class="token function">sys_yield</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
		<span class="token keyword">case</span> SYS_page_alloc<span class="token punctuation">:</span>
			<span class="token keyword">return</span> <span class="token function">sys_page_alloc</span><span class="token punctuation">(</span><span class="token punctuation">(</span>envid_t<span class="token punctuation">)</span>a1<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token operator">*</span><span class="token punctuation">)</span>a2<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span>a3<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">case</span> SYS_page_map<span class="token punctuation">:</span>
			<span class="token keyword">return</span> <span class="token function">sys_page_map</span><span class="token punctuation">(</span><span class="token punctuation">(</span>envid_t<span class="token punctuation">)</span>a1<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token operator">*</span><span class="token punctuation">)</span>a2<span class="token punctuation">,</span> <span class="token punctuation">(</span>envid_t<span class="token punctuation">)</span>a3<span class="token punctuation">,</span> 
			                    <span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token operator">*</span><span class="token punctuation">)</span>a4<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span>a5<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">case</span> SYS_page_unmap<span class="token punctuation">:</span>
			<span class="token keyword">return</span> <span class="token function">sys_page_unmap</span><span class="token punctuation">(</span><span class="token punctuation">(</span>envid_t<span class="token punctuation">)</span>a1<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token operator">*</span><span class="token punctuation">)</span>a2<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">case</span> SYS_exofork<span class="token punctuation">:</span>
			<span class="token keyword">return</span> <span class="token function">sys_exofork</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">case</span> SYS_env_set_status<span class="token punctuation">:</span>
			<span class="token keyword">return</span> <span class="token function">sys_env_set_status</span><span class="token punctuation">(</span><span class="token punctuation">(</span>envid_t<span class="token punctuation">)</span>a1<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span>a2<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">default</span><span class="token punctuation">:</span>
			<span class="token keyword">return</span> <span class="token operator">-</span>E_INVAL<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p><code class="language-text">make grade</code></p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">$ <span class="token function">make</span> grade
<span class="token punctuation">..</span>.
dumbfork: OK <span class="token punctuation">(</span>1.1s<span class="token punctuation">)</span>
Part A score: 5/5</code></pre></div>
<h2>Part B: Copy-on-Write Fork</h2>
<p>xv6<code class="language-text">fork()</code><code class="language-text">dumbfork()</code>parentaddress spacechild<code class="language-text">fork</code></p>
<p><code class="language-text">fork</code><code class="language-text">exec</code></p>
<p>Unixvirtual memory hardwareparentchild<em>copy-on-write</em><code class="language-text">fork</code>address space <em>mappings</em> pagepageread-onlypage faultfaultnew, private, writable copy of the page<code class="language-text">fork</code><code class="language-text">exec</code>child1pagethe current page of its stack...</p>
<p><em>copy-on-wirte</em> <code class="language-text">fork</code></p>
<h3>User-level page fault handling</h3>
<p>user-level copy-on-write <code class="language-text">fork</code>write-protected pagespage faultscopy-on-writeuser-level page fault handling</p>
<p>address spacepage faultsUnix kernel1pagestacklazy allocationUnix kernelkeep track of what action to take when a page fault occers in each <em>region</em> of a process's space.stackphysical pageBSSsegmentpage0ystem with demand-paged executables...text regionpagebinary</p>
<p>kerneltrackUnixuser spacepage faultbugs are less damagingdisk-based file systemuser-level page fault handling</p>
<h3>Setting the Page Fault Handler</h3>
<p>handlepage faultJOS kernel<em>page fault handler entrypoint</em><code class="language-text">sys_env_set_pgfault_upcall</code>system callpage fault entrypoint<code class="language-text">Env</code><code class="language-text">env_pgfault_upcall</code></p>
<h3>Exercise 8</h3>
<p><code class="language-text">sys_env_set_pgfault_upcall</code>environment idpermission checking(1)system call</p>
<div class="gatsby-highlight" data-language="c"><pre class="language-c"><code class="language-c"><span class="token comment">// Set the page fault upcall for 'envid' by modifying the corresponding struct</span>
<span class="token comment">// Env's 'env_pgfault_upcall' field.  When 'envid' causes a page fault, the</span>
<span class="token comment">// kernel will push a fault record onto the exception stack, then branch to</span>
<span class="token comment">// 'func'.</span>
<span class="token comment">//</span>
<span class="token comment">// Returns 0 on success, &lt; 0 on error.  Errors are:</span>
<span class="token comment">//	-E_BAD_ENV if environment envid doesn't currently exist,</span>
<span class="token comment">//		or the caller doesn't have permission to change envid.</span>
<span class="token keyword">static</span> <span class="token keyword">int</span>
<span class="token function">sys_env_set_pgfault_upcall</span><span class="token punctuation">(</span>envid_t envid<span class="token punctuation">,</span> <span class="token keyword">void</span> <span class="token operator">*</span>func<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token comment">// LAB 4: Your code here.</span>
	<span class="token keyword">int</span> r<span class="token punctuation">;</span>
	<span class="token keyword">struct</span> Env <span class="token operator">*</span>e <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>
	
	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>r <span class="token operator">=</span> <span class="token function">envid2env</span><span class="token punctuation">(</span>envid<span class="token punctuation">,</span> <span class="token operator">&amp;</span>e<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
		<span class="token keyword">return</span> r<span class="token punctuation">;</span>
	e<span class="token operator">-></span>env_pgfault_upcall <span class="token operator">=</span> func<span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token comment">//panic("sys_env_set_pgfault_upcall not implemented");</span>
<span class="token punctuation">}</span></code></pre></div>
<h3>Normal and Exception Stacks in User Environments</h3>
<p>(normal)JOSuser stack<code class="language-text">ESP</code><code class="language-text">USTACKTOP</code><code class="language-text">USTACKTOP-PGSIZE</code><code class="language-text">USTACKTOP-1</code>page faultkernela designated user-level page fault handlerstack<em>user exception</em> stackJOS"stack switch"x86JOSuser modekernel mode</p>
<p>JOSuser exception stack1 page<code class="language-text">UXSTACKTOP-PGSIZE</code><code class="language-text">USTACKTOP-1</code>user-level page fault handlerJOSregular system callpagepage faultassemble language stubuser-level page fault handler origin stack</p>
<p>user-level page fault handling<code class="language-text">sys-page_alloc()</code>exception stack</p>
<h3>Invoking the User Page Fault Handler</h3>
<p><code class="language-text">kern/trap.c</code>page fault handling codeuser modepage faultfault<em>trap-time</em> state</p>
<p>page fault handlerJOSdestroy the user environmentkernelexception stack<code class="language-text">inc/trap.h</code><code class="language-text">struct UTrapframe</code>trap frame</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">                    &lt;-- UXSTACKTOP
trap-time esp
trap-time eflags
trap-time eip
trap-time eax       start of struct PushRegs
trap-time ecx
trap-time edx
trap-time ebx
trap-time esp
trap-time ebp
trap-time esi
trap-time edi       end of struct PushRegs
tf_err (error code)
fault_va            &lt;-- %esp when handler is run</code></pre></div>
<p><code class="language-text">UTrapframe</code></p>
<div class="gatsby-highlight" data-language="c"><pre class="language-c"><code class="language-c"><span class="token keyword">struct</span> UTrapframe <span class="token punctuation">{</span>
	<span class="token comment">/* information about the fault */</span>
	uint32_t utf_fault_va<span class="token punctuation">;</span>	<span class="token comment">/* va for T_PGFLT, 0 otherwise */</span>
	uint32_t utf_err<span class="token punctuation">;</span>
	<span class="token comment">/* trap-time return state */</span>
	<span class="token keyword">struct</span> PushRegs utf_regs<span class="token punctuation">;</span>
	uintptr_t utf_eip<span class="token punctuation">;</span>
	uint32_t utf_eflags<span class="token punctuation">;</span>
	<span class="token comment">/* the trap-time stack to return to */</span>
	uintptr_t utf_esp<span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token function">__attribute__</span><span class="token punctuation">(</span><span class="token punctuation">(</span>packed<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>kernelstackpage fault handleruser environment<code class="language-text">fault_va</code>VA</p>
<p>exception stackexceptionpage fault handler<code class="language-text">tf-&gt;tf_esp</code>stack frame32-bit word<code class="language-text">struct UTrapframe</code></p>
<p><code class="language-text">tf-&gt;tf_esp</code><code class="language-text">UXSTACKTOP-PGSIZE</code><code class="language-text">USTACKTOP-1</code>exception stack</p>
<h3>Exercise 9</h3>
<p><code class="language-text">kern/trap.c</code><code class="language-text">page_fault_handler</code>exception stack runs out of space</p>
<div class="gatsby-highlight" data-language="c"><pre class="language-c"><code class="language-c"><span class="token keyword">void</span>
<span class="token function">page_fault_handler</span><span class="token punctuation">(</span><span class="token keyword">struct</span> Trapframe <span class="token operator">*</span>tf<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	uint32_t fault_va<span class="token punctuation">;</span>

	<span class="token comment">// Read processor's CR2 register to find the faulting address</span>
	fault_va <span class="token operator">=</span> <span class="token function">rcr2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// Handle kernel-mode page faults.</span>

	<span class="token comment">// LAB 3: Your code here.</span>

	<span class="token comment">// We've already handled kernel-mode exceptions, so if we get here,</span>
	<span class="token comment">// the page fault happened in user mode.</span>

	<span class="token comment">// Call the environment's page fault upcall, if one exists.  Set up a</span>
	<span class="token comment">// page fault stack frame on the user exception stack (below</span>
	<span class="token comment">// UXSTACKTOP), then branch to curenv->env_pgfault_upcall.</span>
	<span class="token comment">//</span>
	<span class="token comment">// The page fault upcall might cause another page fault, in which case</span>
	<span class="token comment">// we branch to the page fault upcall recursively, pushing another</span>
	<span class="token comment">// page fault stack frame on top of the user exception stack.</span>
	<span class="token comment">//</span>
	<span class="token comment">// It is convenient for our code which returns from a page fault</span>
	<span class="token comment">// (lib/pfentry.S) to have one word of scratch space at the top of the</span>
	<span class="token comment">// trap-time stack; it allows us to more easily restore the eip/esp. In</span>
	<span class="token comment">// the non-recursive case, we don't have to worry about this because</span>
	<span class="token comment">// the top of the regular user stack is free.  In the recursive case,</span>
	<span class="token comment">// this means we have to leave an extra word between the current top of</span>
	<span class="token comment">// the exception stack and the new stack frame because the exception</span>
	<span class="token comment">// stack _is_ the trap-time stack.</span>
	<span class="token comment">//</span>
	<span class="token comment">// If there's no page fault upcall, the environment didn't allocate a</span>
	<span class="token comment">// page for its exception stack or can't write to it, or the exception</span>
	<span class="token comment">// stack overflows, then destroy the environment that caused the fault.</span>
	<span class="token comment">// Note that the grade script assumes you will first check for the page</span>
	<span class="token comment">// fault upcall and print the "user fault va" message below if there is</span>
	<span class="token comment">// none.  The remaining three checks can be combined into a single test.</span>
	<span class="token comment">//</span>
	<span class="token comment">// Hints:</span>
	<span class="token comment">//   user_mem_assert() and env_run() are useful here.</span>
	<span class="token comment">//   To change what the user environment runs, modify 'curenv->env_tf'</span>
	<span class="token comment">//   (the 'tf' variable points at 'curenv->env_tf').</span>

	<span class="token comment">// LAB 4: Your code here.</span>
	bool flag <span class="token operator">=</span> true<span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>curenv<span class="token operator">-></span>env_pgfault_upcall <span class="token operator">==</span> <span class="token constant">NULL</span><span class="token punctuation">)</span>
		flag <span class="token operator">=</span> false<span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>fault_va <span class="token operator">&lt;</span> UXSTACKTOP <span class="token operator">&amp;&amp;</span> fault_va <span class="token operator">>=</span> UXSTACKTOP <span class="token operator">-</span> PGSIZE<span class="token punctuation">)</span>
		flag <span class="token operator">=</span> false<span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>flag<span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment">// this makes sure it's from user mode</span>
		<span class="token keyword">struct</span> UTrapframe <span class="token operator">*</span>utf <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>curenv<span class="token operator">-></span>env_tf<span class="token punctuation">.</span>tf_esp <span class="token operator">&lt;</span> UXSTACKTOP <span class="token operator">&amp;&amp;</span> curenv<span class="token operator">-></span>env_tf<span class="token punctuation">.</span>tf_esp <span class="token operator">>=</span> UXSTACKTOP <span class="token operator">-</span> PGSIZE<span class="token punctuation">)</span>
			utf <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">struct</span> UTrapframe <span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">(</span>curenv<span class="token operator">-></span>env_tf<span class="token punctuation">.</span>tf_esp <span class="token operator">-</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token keyword">struct</span> UTrapframe<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">else</span>
			utf <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">struct</span> UTrapframe <span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">(</span>UXSTACKTOP <span class="token operator">-</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token keyword">struct</span> UTrapframe<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">// check the overflow and write permission</span>
		<span class="token function">user_mem_assert</span><span class="token punctuation">(</span>curenv<span class="token punctuation">,</span> utf<span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token keyword">struct</span> UTrapframe<span class="token punctuation">)</span><span class="token punctuation">,</span> PTE_W<span class="token punctuation">)</span><span class="token punctuation">;</span>

		utf<span class="token operator">-></span>utf_fault_va <span class="token operator">=</span> fault_va<span class="token punctuation">;</span>
		utf<span class="token operator">-></span>utf_err <span class="token operator">=</span> tf<span class="token operator">-></span>tf_err<span class="token punctuation">;</span>
		utf<span class="token operator">-></span>utf_regs <span class="token operator">=</span> tf<span class="token operator">-></span>tf_regs<span class="token punctuation">;</span>
		utf<span class="token operator">-></span>utf_eip <span class="token operator">=</span> tf<span class="token operator">-></span>tf_eip<span class="token punctuation">;</span>
		utf<span class="token operator">-></span>utf_eflags <span class="token operator">=</span> tf<span class="token operator">-></span>tf_eflags<span class="token punctuation">;</span>
		utf<span class="token operator">-></span>utf_esp <span class="token operator">=</span> tf<span class="token operator">-></span>tf_esp<span class="token punctuation">;</span>
		tf<span class="token operator">-></span>tf_eip <span class="token operator">=</span> <span class="token punctuation">(</span>uintptr_t<span class="token punctuation">)</span>curenv<span class="token operator">-></span>env_pgfault_upcall<span class="token punctuation">;</span>
		tf<span class="token operator">-></span>tf_esp <span class="token operator">=</span> <span class="token punctuation">(</span>uintptr_t<span class="token punctuation">)</span>utf<span class="token punctuation">;</span>
		<span class="token function">env_run</span><span class="token punctuation">(</span>curenv<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token comment">// Destroy the environment that caused the fault.</span>
	<span class="token function">cprintf</span><span class="token punctuation">(</span><span class="token string">"[%08x] user fault va %08x ip %08x\n"</span><span class="token punctuation">,</span>
		curenv<span class="token operator">-></span>env_id<span class="token punctuation">,</span> fault_va<span class="token punctuation">,</span> tf<span class="token operator">-></span>tf_eip<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">print_trapframe</span><span class="token punctuation">(</span>tf<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">env_destroy</span><span class="token punctuation">(</span>curenv<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<h3>User-mode Page Fault Entrypoint</h3>
<p>Next, you need to implement the assembly routine that will take care of calling the C page fault handler and resume execution at the original faulting instruction. This assembly routine is the handler that will be registered with the kernel using <code class="language-text">sys_env_set_pgfault_upcall()</code>.</p>
<h3>Exercise 10</h3>
<p><code class="language-text">lib/pfentry.S</code><code class="language-text">_pgfault_upcall</code></p>
<div class="gatsby-highlight" data-language="assembly"><pre class="language-assembly"><code class="language-assembly">.text
.globl _pgfault_upcall
_pgfault_upcall:
	// Call the C page fault handler.
	pushl %esp			// function argument: pointer to UTF
	movl _pgfault_handler, %eax
	call *%eax
	addl $4, %esp			// pop function argument
	
	// Now the C page fault handler has returned and you must return
	// to the trap time state.
	// Push trap-time %eip onto the trap-time stack.
	//
	// Explanation:
	//   We must prepare the trap-time stack for our eventual return to
	//   re-execute the instruction that faulted.
	//   Unfortunately, we can&#39;t return directly from the exception stack:
	//   We can&#39;t call &#39;jmp&#39;, since that requires that we load the address
	//   into a register, and all registers must have their trap-time
	//   values after the return.
	//   We can&#39;t call &#39;ret&#39; from the exception stack either, since if we
	//   did, %esp would have the wrong value.
	//   So instead, we push the trap-time %eip onto the *trap-time* stack!
	//   Below we&#39;ll switch to that stack and call &#39;ret&#39;, which will
	//   restore %eip to its pre-fault value.
	//
	//   In the case of a recursive fault on the exception stack,
	//   note that the word we&#39;re pushing now will fit in the
	//   blank word that the kernel reserved for us.
	//
	// Throughout the remaining code, think carefully about what
	// registers are available for intermediate calculations.  You
	// may find that you have to rearrange your code in non-obvious
	// ways as registers become unavailable as scratch space.
	//
	// LAB 4: Your code here.
	movl 0x28(%esp), %edx # trap-time eip
	subl $0x4, 0x30(%esp) # we have to use subl now because we can&#39;t use after popfl
	movl 0x30(%esp), %eax # trap-time esp-4
	movl %edx, (%eax)
	addl $0x8, %esp

	// Restore the trap-time registers.  After you do this, you
	// can no longer modify any general-purpose registers.
	// LAB 4: Your code here.
	popal

	// Restore eflags from the stack.  After you do this, you can
	// no longer use arithmetic operations or anything else that
	// modifies eflags.
	// LAB 4: Your code here.
	addl $0x4, %esp #eip
	popfl

	// Switch back to the adjusted trap-time stack.
	// LAB 4: Your code here.
	popl %esp

	// Return to re-execute the instruction that faulted.
	// LAB 4: Your code here.
	ret</code></pre></div>
<p><code class="language-text">lib/pgfault.c</code><code class="language-text">set_pgfault_handler()</code></p>
<div class="gatsby-highlight" data-language="c"><pre class="language-c"><code class="language-c"><span class="token comment">//</span>
<span class="token comment">// Set the page fault handler function.</span>
<span class="token comment">// If there isn't one yet, _pgfault_handler will be 0.</span>
<span class="token comment">// The first time we register a handler, we need to</span>
<span class="token comment">// allocate an exception stack (one page of memory with its top</span>
<span class="token comment">// at UXSTACKTOP), and tell the kernel to call the assembly-language</span>
<span class="token comment">// _pgfault_upcall routine when a page fault occurs.</span>
<span class="token comment">//</span>
<span class="token keyword">void</span>
<span class="token function">set_pgfault_handler</span><span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token punctuation">(</span><span class="token operator">*</span>handler<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">struct</span> UTrapframe <span class="token operator">*</span>utf<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token keyword">int</span> r<span class="token punctuation">;</span>

	<span class="token keyword">if</span> <span class="token punctuation">(</span>_pgfault_handler <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">// First time through!</span>
		<span class="token comment">// LAB 4: Your code here.</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>r <span class="token operator">=</span> <span class="token function">sys_page_alloc</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">(</span>UXSTACKTOP <span class="token operator">-</span> PGSIZE<span class="token punctuation">)</span><span class="token punctuation">,</span> PTE_W <span class="token operator">|</span> PTE_U <span class="token operator">|</span> PTE_P<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
			<span class="token function">panic</span><span class="token punctuation">(</span><span class="token string">"fail to allocate exception stack"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">sys_env_set_pgfault_upcall</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> _pgfault_upcall<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">//panic("set_pgfault_handler not implemented");</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// Save handler pointer for assembly to call.</span>
	_pgfault_handler <span class="token operator">=</span> handler<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p></p>
<p><code class="language-text">user_faultread</code>:</p>
<div class="gatsby-highlight" data-language="c"><pre class="language-c"><code class="language-c"><span class="token keyword">void</span>
<span class="token function">umain</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span><span class="token operator">*</span>argv<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token function">cprintf</span><span class="token punctuation">(</span><span class="token string">"I read %08x from location 0!\n"</span><span class="token punctuation">,</span> <span class="token operator">*</span><span class="token punctuation">(</span><span class="token keyword">unsigned</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p><code class="language-text">_pgfault_upcall</code>destroy</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">$ <span class="token function">make</span> run-faultread-nox
<span class="token punctuation">..</span>.
<span class="token punctuation">[</span>00000000<span class="token punctuation">]</span> new <span class="token function">env</span> 00001000
<span class="token punctuation">[</span>00001000<span class="token punctuation">]</span> user fault va 00000000 ip 00800039
TRAP frame at 0xf02b0000 from CPU 0
  edi  0x00000000
  esi  0x00000000
  ebp  0xeebfdfd0
  oesp 0xf0235fdc
  ebx  0x00000000
  edx  0x00000000
  ecx  0x00000000
  eax  0xeec00000
  es   0x----0023
  ds   0x----0023
  <span class="token function">trap</span> 0x0000000e Page Fault
  cr2  0x00000000
  err  0x00000004 <span class="token punctuation">[</span>user, read, not-present<span class="token punctuation">]</span>
  eip  0x00800039
  cs   0x----001b
  flag 0x00000086
  esp  0xeebfdfc0
  ss   0x----0023
<span class="token punctuation">[</span>00001000<span class="token punctuation">]</span> <span class="token function">free</span> <span class="token function">env</span> 00001000
No runnable environments <span class="token keyword">in</span> the system<span class="token operator">!</span>
<span class="token punctuation">..</span>.</code></pre></div>
<p><code class="language-text">user_faultdie</code>:</p>
<div class="gatsby-highlight" data-language="c"><pre class="language-c"><code class="language-c"><span class="token keyword">void</span>
<span class="token function">handler</span><span class="token punctuation">(</span><span class="token keyword">struct</span> UTrapframe <span class="token operator">*</span>utf<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token keyword">void</span> <span class="token operator">*</span>addr <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token operator">*</span><span class="token punctuation">)</span>utf<span class="token operator">-></span>utf_fault_va<span class="token punctuation">;</span>
	uint32_t err <span class="token operator">=</span> utf<span class="token operator">-></span>utf_err<span class="token punctuation">;</span>
	<span class="token function">cprintf</span><span class="token punctuation">(</span><span class="token string">"i faulted at va %x, err %x\n"</span><span class="token punctuation">,</span> addr<span class="token punctuation">,</span> err <span class="token operator">&amp;</span> <span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">sys_env_destroy</span><span class="token punctuation">(</span><span class="token function">sys_getenvid</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span>
<span class="token function">umain</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span><span class="token operator">*</span>argv<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token function">set_pgfault_handler</span><span class="token punctuation">(</span>handler<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token operator">*</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token number">0xDeadBeef</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>destroy</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">$ <span class="token function">make</span> run-faultdie-nox
<span class="token punctuation">..</span>.
<span class="token punctuation">[</span>00000000<span class="token punctuation">]</span> new <span class="token function">env</span> 00001000
i faulted at va deadbeef, err 6
<span class="token punctuation">[</span>00001000<span class="token punctuation">]</span> exiting gracefully
<span class="token punctuation">[</span>00001000<span class="token punctuation">]</span> <span class="token function">free</span> <span class="token function">env</span> 00001000
No runnable environments <span class="token keyword">in</span> the system<span class="token operator">!</span>
<span class="token punctuation">..</span>.</code></pre></div>
<p><code class="language-text">user_faultalloc</code></p>
<div class="gatsby-highlight" data-language="c"><pre class="language-c"><code class="language-c"><span class="token keyword">void</span>
<span class="token function">handler</span><span class="token punctuation">(</span><span class="token keyword">struct</span> UTrapframe <span class="token operator">*</span>utf<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token keyword">int</span> r<span class="token punctuation">;</span>
	<span class="token keyword">void</span> <span class="token operator">*</span>addr <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token operator">*</span><span class="token punctuation">)</span>utf<span class="token operator">-></span>utf_fault_va<span class="token punctuation">;</span>

	<span class="token function">cprintf</span><span class="token punctuation">(</span><span class="token string">"fault %x\n"</span><span class="token punctuation">,</span> addr<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>r <span class="token operator">=</span> <span class="token function">sys_page_alloc</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token function">ROUNDDOWN</span><span class="token punctuation">(</span>addr<span class="token punctuation">,</span> PGSIZE<span class="token punctuation">)</span><span class="token punctuation">,</span>
				PTE_P<span class="token operator">|</span>PTE_U<span class="token operator">|</span>PTE_W<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
		<span class="token function">panic</span><span class="token punctuation">(</span><span class="token string">"allocating at %x in page fault handler: %e"</span><span class="token punctuation">,</span> addr<span class="token punctuation">,</span> r<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">snprintf</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">char</span><span class="token operator">*</span><span class="token punctuation">)</span> addr<span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token string">"this string was faulted in at %x"</span><span class="token punctuation">,</span> addr<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span>
<span class="token function">umain</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span><span class="token operator">*</span>argv<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token function">set_pgfault_handler</span><span class="token punctuation">(</span>handler<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">cprintf</span><span class="token punctuation">(</span><span class="token string">"%s\n"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">char</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token number">0xDeadBeef</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">cprintf</span><span class="token punctuation">(</span><span class="token string">"%s\n"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">char</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token number">0xCafeBffe</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>page<code class="language-text">snprintf</code></p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">$ <span class="token function">make</span> run-faultalloc-nox
<span class="token punctuation">..</span>.
<span class="token punctuation">[</span>00000000<span class="token punctuation">]</span> new <span class="token function">env</span> 00001000
fault deadbeef
this string was faulted <span class="token keyword">in</span> at deadbeef
fault cafebffe
fault cafec000
this string was faulted <span class="token keyword">in</span> at cafebffe
<span class="token punctuation">[</span>00001000<span class="token punctuation">]</span> exiting gracefully
<span class="token punctuation">[</span>00001000<span class="token punctuation">]</span> <span class="token function">free</span> <span class="token function">env</span> 00001000
No runnable environments <span class="token keyword">in</span> the system<span class="token operator">!</span>
<span class="token punctuation">..</span>.</code></pre></div>
<p><code class="language-text">snprintf</code>exception stackbuffer100 byte<code class="language-text">0xcafebffe + 100</code>page</p>
<p><code class="language-text">user_faultallocbad</code></p>
<div class="gatsby-highlight" data-language="c"><pre class="language-c"><code class="language-c"><span class="token keyword">void</span>
<span class="token function">handler</span><span class="token punctuation">(</span><span class="token keyword">struct</span> UTrapframe <span class="token operator">*</span>utf<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token keyword">int</span> r<span class="token punctuation">;</span>
	<span class="token keyword">void</span> <span class="token operator">*</span>addr <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token operator">*</span><span class="token punctuation">)</span>utf<span class="token operator">-></span>utf_fault_va<span class="token punctuation">;</span>

	<span class="token function">cprintf</span><span class="token punctuation">(</span><span class="token string">"fault %x\n"</span><span class="token punctuation">,</span> addr<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>r <span class="token operator">=</span> <span class="token function">sys_page_alloc</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token function">ROUNDDOWN</span><span class="token punctuation">(</span>addr<span class="token punctuation">,</span> PGSIZE<span class="token punctuation">)</span><span class="token punctuation">,</span>
				PTE_P<span class="token operator">|</span>PTE_U<span class="token operator">|</span>PTE_W<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
		<span class="token function">panic</span><span class="token punctuation">(</span><span class="token string">"allocating at %x in page fault handler: %e"</span><span class="token punctuation">,</span> addr<span class="token punctuation">,</span> r<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">snprintf</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">char</span><span class="token operator">*</span><span class="token punctuation">)</span> addr<span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token string">"this string was faulted in at %x"</span><span class="token punctuation">,</span> addr<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span>
<span class="token function">umain</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span><span class="token operator">*</span>argv<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token function">set_pgfault_handler</span><span class="token punctuation">(</span>handler<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">sys_cputs</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">char</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token number">0xDEADBEEF</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p><code class="language-text">cprintf</code><code class="language-text">sys_cputs</code>system call</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">$ make run-faultallocbad-nox
...
[00000000] new env 00001000
[00001000] user_mem_check assertion failure for va deadbeef
[00001000] free env 00001000
No runnable environments in the system!
...</code></pre></div>
<p><code class="language-text">cprintf</code><code class="language-text">sys_cputs</code><code class="language-text">cprintf</code>user lib<code class="language-text">vprintfmt</code><code class="language-text">vprintfmt</code><code class="language-text">0xdeadbeef</code>bufferuser modepage fault<code class="language-text">sys_cputs</code>page faultsystem call<code class="language-text">sys_cputs</code><code class="language-text">user_mem_assert</code>destroy</p>
<h3>Implementing Copy-on-Write Fork</h3>
<p>copy-on-write fork<code class="language-text">lib/fork.c</code></p>
<ol>
<li>
<p>parent<code class="language-text">pgfault()</code>page fault handler</p>
</li>
<li>
<p>parent<code class="language-text">set_exofork</code>child environment</p>
</li>
<li>
<p><code class="language-text">UTOP</code>writablecopy-on-write pageparent<code class="language-text">duppage</code>mappagechildmapcopy-on-write<code class="language-text">PTE_COW</code>copy-on-write page</p>
<p>exception stackmapchildpageexception stackpage fault handler</p>
</li>
<li>
<p>parentchildpage fault entry point</p>
</li>
<li>
<p>childparentchild<code class="language-text">ENV_RUNNABLE</code></p>
</li>
</ol>
<p>copy-on-write pagepage fault handler</p>
<ol>
<li>kernel<code class="language-text">_pgfault_upcall</code><code class="language-text">pgfault()</code></li>
<li><code class="language-text">pgfault</code>page faultpage<code class="language-text">PTE_COW</code></li>
<li><code class="language-text">pgfault</code>pagepagepagepage mapread/writeunmap</li>
</ol>
<h3>Exercise 12</h3>
<p><code class="language-text">lib/fork.c</code></p>
<p><code class="language-text">dumbfork</code><code class="language-text">pgfault</code><code class="language-text">dumbfork</code></p>
<div class="gatsby-highlight" data-language="c"><pre class="language-c"><code class="language-c"><span class="token comment">// implement fork from user space</span>

<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;inc/string.h></span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;inc/lib.h></span></span>

<span class="token comment">// PTE_COW marks copy-on-write page table entries.</span>
<span class="token comment">// It is one of the bits explicitly allocated to user processes (PTE_AVAIL).</span>
<span class="token macro property">#<span class="token directive keyword">define</span> PTE_COW		0x800</span>
<span class="token keyword">extern</span> <span class="token keyword">void</span> <span class="token function">_pgfault_upcall</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//</span>
<span class="token comment">// Custom page fault handler - if faulting page is copy-on-write,</span>
<span class="token comment">// map in our own private writable copy.</span>
<span class="token comment">//</span>
<span class="token keyword">static</span> <span class="token keyword">void</span>
<span class="token function">pgfault</span><span class="token punctuation">(</span><span class="token keyword">struct</span> UTrapframe <span class="token operator">*</span>utf<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token keyword">void</span> <span class="token operator">*</span>addr <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token operator">*</span><span class="token punctuation">)</span> utf<span class="token operator">-></span>utf_fault_va<span class="token punctuation">;</span>
	uint32_t err <span class="token operator">=</span> utf<span class="token operator">-></span>utf_err<span class="token punctuation">;</span>
	<span class="token keyword">int</span> r<span class="token punctuation">;</span>

	<span class="token comment">// Check that the faulting access was (1) a write, and (2) to a</span>
	<span class="token comment">// copy-on-write page.  If not, panic.</span>
	<span class="token comment">// Hint:</span>
	<span class="token comment">//   Use the read-only page table mappings at uvpt</span>
	<span class="token comment">//   (see &lt;inc/memlayout.h>).</span>

	<span class="token comment">// LAB 4: Your code here.</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span><span class="token punctuation">(</span>err <span class="token operator">&amp;</span> FEC_WR<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> 
	     <span class="token punctuation">(</span>uvpd<span class="token punctuation">[</span><span class="token function">PDX</span><span class="token punctuation">(</span>addr<span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">&amp;</span> PTE_P<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span>
		   <span class="token punctuation">(</span>uvpt<span class="token punctuation">[</span><span class="token function">PGNUM</span><span class="token punctuation">(</span>addr<span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">&amp;</span> PTE_P<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span>
		   <span class="token punctuation">(</span>uvpt<span class="token punctuation">[</span><span class="token function">PGNUM</span><span class="token punctuation">(</span>addr<span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">&amp;</span> PTE_COW<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
		<span class="token function">panic</span><span class="token punctuation">(</span><span class="token string">"fault not on copy-on-write"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">// Allocate a new page, map it at a temporary location (PFTEMP),</span>
	<span class="token comment">// copy the data from the old page to the new page, then move the new</span>
	<span class="token comment">// page to the old page's address.</span>
	<span class="token comment">// Hint:</span>
	<span class="token comment">//   You should make three system calls.</span>

	<span class="token comment">// LAB 4: Your code here.</span>
	addr <span class="token operator">=</span> <span class="token function">ROUNDDOWN</span><span class="token punctuation">(</span>addr<span class="token punctuation">,</span> PGSIZE<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">(</span>r <span class="token operator">=</span> <span class="token function">sys_page_alloc</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> PFTEMP<span class="token punctuation">,</span> PTE_W <span class="token operator">|</span> PTE_U <span class="token operator">|</span> PTE_P<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
		<span class="token function">panic</span><span class="token punctuation">(</span><span class="token string">"fail to alloc"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">memmove</span><span class="token punctuation">(</span>PFTEMP<span class="token punctuation">,</span> addr<span class="token punctuation">,</span> PGSIZE<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">(</span>r <span class="token operator">=</span> <span class="token function">sys_page_map</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> PFTEMP<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> addr<span class="token punctuation">,</span> PTE_W <span class="token operator">|</span> PTE_U <span class="token operator">|</span> PTE_P<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
		<span class="token function">panic</span><span class="token punctuation">(</span><span class="token string">"fail to map"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">(</span>r <span class="token operator">=</span> <span class="token function">sys_page_unmap</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> PFTEMP<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
		<span class="token function">panic</span><span class="token punctuation">(</span><span class="token string">"fail to umap"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//panic("pgfault not implemented");</span>
<span class="token punctuation">}</span>

<span class="token comment">//</span>
<span class="token comment">// Map our virtual page pn (address pn*PGSIZE) into the target envid</span>
<span class="token comment">// at the same virtual address.  If the page is writable or copy-on-write,</span>
<span class="token comment">// the new mapping must be created copy-on-write, and then our mapping must be</span>
<span class="token comment">// marked copy-on-write as well.  (Exercise: Why do we need to mark ours</span>
<span class="token comment">// copy-on-write again if it was already copy-on-write at the beginning of</span>
<span class="token comment">// this function?)</span>
<span class="token comment">//</span>
<span class="token comment">// Returns: 0 on success, &lt; 0 on error.</span>
<span class="token comment">// It is also OK to panic on error.</span>
<span class="token comment">//</span>
<span class="token keyword">static</span> <span class="token keyword">int</span>
<span class="token function">duppage</span><span class="token punctuation">(</span>envid_t envid<span class="token punctuation">,</span> <span class="token keyword">unsigned</span> pn<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token keyword">int</span> r<span class="token punctuation">;</span>

	<span class="token comment">// LAB 4: Your code here.</span>
	<span class="token keyword">void</span> <span class="token operator">*</span>addr <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">(</span>pn <span class="token operator">*</span> PGSIZE<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span>uvpd<span class="token punctuation">[</span><span class="token function">PDX</span><span class="token punctuation">(</span>addr<span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">&amp;</span> PTE_P<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token operator">!</span><span class="token punctuation">(</span>uvpt<span class="token punctuation">[</span>pn<span class="token punctuation">]</span> <span class="token operator">&amp;</span> PTE_P<span class="token punctuation">)</span><span class="token punctuation">)</span>
		<span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span>uvpt<span class="token punctuation">[</span>pn<span class="token punctuation">]</span> <span class="token operator">&amp;</span> <span class="token punctuation">(</span>PTE_W <span class="token operator">|</span> PTE_COW<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>r <span class="token operator">=</span> <span class="token function">sys_page_map</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> addr<span class="token punctuation">,</span> envid<span class="token punctuation">,</span> addr<span class="token punctuation">,</span> PTE_COW <span class="token operator">|</span> PTE_U <span class="token operator">|</span> PTE_P<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
			<span class="token keyword">return</span> r<span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>r <span class="token operator">=</span> <span class="token function">sys_page_map</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> addr<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> addr<span class="token punctuation">,</span> PTE_COW <span class="token operator">|</span> PTE_U <span class="token operator">|</span> PTE_P<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
			<span class="token keyword">return</span> r<span class="token punctuation">;</span>
	<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>r <span class="token operator">=</span> <span class="token function">sys_page_map</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> addr<span class="token punctuation">,</span> envid<span class="token punctuation">,</span> addr<span class="token punctuation">,</span> PTE_U <span class="token operator">|</span> PTE_P<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
			<span class="token keyword">return</span> r<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token comment">//panic("duppage not implemented");</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//</span>
<span class="token comment">// User-level fork with copy-on-write.</span>
<span class="token comment">// Set up our page fault handler appropriately.</span>
<span class="token comment">// Create a child.</span>
<span class="token comment">// Copy our address space and page fault handler setup to the child.</span>
<span class="token comment">// Then mark the child as runnable and return.</span>
<span class="token comment">//</span>
<span class="token comment">// Returns: child's envid to the parent, 0 to the child, &lt; 0 on error.</span>
<span class="token comment">// It is also OK to panic on error.</span>
<span class="token comment">//</span>
<span class="token comment">// Hint:</span>
<span class="token comment">//   Use uvpd, uvpt, and duppage.</span>
<span class="token comment">//   Remember to fix "thisenv" in the child process.</span>
<span class="token comment">//   Neither user exception stack should ever be marked copy-on-write,</span>
<span class="token comment">//   so you must allocate a new page for the child's user exception stack.</span>
<span class="token comment">//</span>
envid_t
<span class="token function">fork</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token comment">// LAB 4: Your code here.</span>
	envid_t envid<span class="token punctuation">;</span>
	uint8_t <span class="token operator">*</span>addr<span class="token punctuation">;</span>
	<span class="token keyword">int</span> r<span class="token punctuation">;</span>
	
	<span class="token function">set_pgfault_handler</span><span class="token punctuation">(</span>pgfault<span class="token punctuation">)</span><span class="token punctuation">;</span>
	envid <span class="token operator">=</span> <span class="token function">sys_exofork</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>envid <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
		<span class="token function">panic</span><span class="token punctuation">(</span><span class="token string">"sys_exofork: %e"</span><span class="token punctuation">,</span> envid<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>envid <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		thisenv <span class="token operator">=</span> <span class="token operator">&amp;</span>envs<span class="token punctuation">[</span><span class="token function">ENVX</span><span class="token punctuation">(</span><span class="token function">sys_getenvid</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">(</span>r <span class="token operator">=</span> <span class="token function">sys_page_alloc</span><span class="token punctuation">(</span>envid<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">(</span>UXSTACKTOP <span class="token operator">-</span> PGSIZE<span class="token punctuation">)</span><span class="token punctuation">,</span> PTE_U <span class="token operator">|</span> PTE_W <span class="token operator">|</span> PTE_P<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
		<span class="token function">panic</span><span class="token punctuation">(</span><span class="token string">"fail to alloc for exception stack"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span>addr <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token punctuation">(</span>uint32_t<span class="token punctuation">)</span>addr <span class="token operator">&lt;</span> UTOP<span class="token punctuation">;</span> addr <span class="token operator">+</span><span class="token operator">=</span> PGSIZE<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>uint32_t<span class="token punctuation">)</span>addr <span class="token operator">==</span> UXSTACKTOP <span class="token operator">-</span> PGSIZE<span class="token punctuation">)</span>
			<span class="token keyword">continue</span><span class="token punctuation">;</span>
		<span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">(</span>uvpd<span class="token punctuation">[</span><span class="token function">PDX</span><span class="token punctuation">(</span>addr<span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">&amp;</span> PTE_P<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>uvpt<span class="token punctuation">[</span><span class="token function">PGNUM</span><span class="token punctuation">(</span>addr<span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">&amp;</span> <span class="token punctuation">(</span>PTE_P<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">(</span>r <span class="token operator">=</span> <span class="token function">duppage</span><span class="token punctuation">(</span>envid<span class="token punctuation">,</span> <span class="token function">PGNUM</span><span class="token punctuation">(</span>addr<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
				<span class="token function">panic</span><span class="token punctuation">(</span><span class="token string">"duppage failed"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	<span class="token function">sys_env_set_pgfault_upcall</span><span class="token punctuation">(</span>envid<span class="token punctuation">,</span> _pgfault_upcall<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>r <span class="token operator">=</span> <span class="token function">sys_env_set_status</span><span class="token punctuation">(</span>envid<span class="token punctuation">,</span> ENV_RUNNABLE<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
		<span class="token function">panic</span><span class="token punctuation">(</span><span class="token string">"sys_env_set_status: %e"</span><span class="token punctuation">,</span> r<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> envid<span class="token punctuation">;</span>
	<span class="token comment">//panic("fork not implemented");</span>
<span class="token punctuation">}</span></code></pre></div>
<p></p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">$ <span class="token function">make</span> run-forktree-nox
<span class="token punctuation">..</span>.
<span class="token punctuation">[</span>00000000<span class="token punctuation">]</span> new <span class="token function">env</span> 00001000
1000: I am <span class="token string">''</span>
<span class="token punctuation">[</span>00001000<span class="token punctuation">]</span> new <span class="token function">env</span> 00001001
<span class="token punctuation">[</span>00001000<span class="token punctuation">]</span> new <span class="token function">env</span> 00001002
<span class="token punctuation">[</span>00001000<span class="token punctuation">]</span> exiting gracefully
<span class="token punctuation">[</span>00001000<span class="token punctuation">]</span> <span class="token function">free</span> <span class="token function">env</span> 00001000
1001: I am <span class="token string">'0'</span>
<span class="token punctuation">[</span>00001001<span class="token punctuation">]</span> new <span class="token function">env</span> 00002000
<span class="token punctuation">[</span>00001001<span class="token punctuation">]</span> new <span class="token function">env</span> 00001003
<span class="token punctuation">[</span>00001001<span class="token punctuation">]</span> exiting gracefully
<span class="token punctuation">[</span>00001001<span class="token punctuation">]</span> <span class="token function">free</span> <span class="token function">env</span> 00001001
2000: I am <span class="token string">'00'</span>
<span class="token punctuation">[</span>00002000<span class="token punctuation">]</span> new <span class="token function">env</span> 00002001
<span class="token punctuation">[</span>00002000<span class="token punctuation">]</span> new <span class="token function">env</span> 00001004
<span class="token punctuation">[</span>00002000<span class="token punctuation">]</span> exiting gracefully
<span class="token punctuation">[</span>00002000<span class="token punctuation">]</span> <span class="token function">free</span> <span class="token function">env</span> 00002000
2001: I am <span class="token string">'000'</span>
<span class="token punctuation">[</span>00002001<span class="token punctuation">]</span> exiting gracefully
<span class="token punctuation">[</span>00002001<span class="token punctuation">]</span> <span class="token function">free</span> <span class="token function">env</span> 00002001
1002: I am <span class="token string">'1'</span>
<span class="token punctuation">[</span>00001002<span class="token punctuation">]</span> new <span class="token function">env</span> 00003001
<span class="token punctuation">[</span>00001002<span class="token punctuation">]</span> new <span class="token function">env</span> 00003000
<span class="token punctuation">[</span>00001002<span class="token punctuation">]</span> exiting gracefully
<span class="token punctuation">[</span>00001002<span class="token punctuation">]</span> <span class="token function">free</span> <span class="token function">env</span> 00001002
3000: I am <span class="token string">'11'</span>
<span class="token punctuation">[</span>00003000<span class="token punctuation">]</span> new <span class="token function">env</span> 00002002
<span class="token punctuation">[</span>00003000<span class="token punctuation">]</span> new <span class="token function">env</span> 00001005
<span class="token punctuation">[</span>00003000<span class="token punctuation">]</span> exiting gracefully
<span class="token punctuation">[</span>00003000<span class="token punctuation">]</span> <span class="token function">free</span> <span class="token function">env</span> 00003000
3001: I am <span class="token string">'10'</span>
<span class="token punctuation">[</span>00003001<span class="token punctuation">]</span> new <span class="token function">env</span> 00004000
<span class="token punctuation">[</span>00003001<span class="token punctuation">]</span> new <span class="token function">env</span> 00001006
<span class="token punctuation">[</span>00003001<span class="token punctuation">]</span> exiting gracefully
<span class="token punctuation">[</span>00003001<span class="token punctuation">]</span> <span class="token function">free</span> <span class="token function">env</span> 00003001
4000: I am <span class="token string">'100'</span>
<span class="token punctuation">[</span>00004000<span class="token punctuation">]</span> exiting gracefully
<span class="token punctuation">[</span>00004000<span class="token punctuation">]</span> <span class="token function">free</span> <span class="token function">env</span> 00004000
2002: I am <span class="token string">'110'</span>
<span class="token punctuation">[</span>00002002<span class="token punctuation">]</span> exiting gracefully
<span class="token punctuation">[</span>00002002<span class="token punctuation">]</span> <span class="token function">free</span> <span class="token function">env</span> 00002002
1003: I am <span class="token string">'01'</span>
<span class="token punctuation">[</span>00001003<span class="token punctuation">]</span> new <span class="token function">env</span> 00003002
<span class="token punctuation">[</span>00001003<span class="token punctuation">]</span> new <span class="token function">env</span> 00005000
<span class="token punctuation">[</span>00001003<span class="token punctuation">]</span> exiting gracefully
<span class="token punctuation">[</span>00001003<span class="token punctuation">]</span> <span class="token function">free</span> <span class="token function">env</span> 00001003
5000: I am <span class="token string">'011'</span>
<span class="token punctuation">[</span>00005000<span class="token punctuation">]</span> exiting gracefully
<span class="token punctuation">[</span>00005000<span class="token punctuation">]</span> <span class="token function">free</span> <span class="token function">env</span> 00005000
3002: I am <span class="token string">'010'</span>
<span class="token punctuation">[</span>00003002<span class="token punctuation">]</span> exiting gracefully
<span class="token punctuation">[</span>00003002<span class="token punctuation">]</span> <span class="token function">free</span> <span class="token function">env</span> 00003002
1004: I am <span class="token string">'001'</span>
<span class="token punctuation">[</span>00001004<span class="token punctuation">]</span> exiting gracefully
<span class="token punctuation">[</span>00001004<span class="token punctuation">]</span> <span class="token function">free</span> <span class="token function">env</span> 00001004
1005: I am <span class="token string">'111'</span>
<span class="token punctuation">[</span>00001005<span class="token punctuation">]</span> exiting gracefully
<span class="token punctuation">[</span>00001005<span class="token punctuation">]</span> <span class="token function">free</span> <span class="token function">env</span> 00001005
1006: I am <span class="token string">'101'</span>
<span class="token punctuation">[</span>00001006<span class="token punctuation">]</span> exiting gracefully
<span class="token punctuation">[</span>00001006<span class="token punctuation">]</span> <span class="token function">free</span> <span class="token function">env</span> 00001006
<span class="token punctuation">..</span>.</code></pre></div>
<p>Part B</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">$ <span class="token function">make</span> grade
<span class="token punctuation">..</span>.
dumbfork: OK <span class="token punctuation">(</span>1.4s<span class="token punctuation">)</span>
Part A score: 5/5

faultread: OK <span class="token punctuation">(</span>0.9s<span class="token punctuation">)</span>
faultwrite: OK <span class="token punctuation">(</span>1.0s<span class="token punctuation">)</span>
faultdie: OK <span class="token punctuation">(</span>1.0s<span class="token punctuation">)</span>
faultregs: OK <span class="token punctuation">(</span>2.0s<span class="token punctuation">)</span>
faultalloc: OK <span class="token punctuation">(</span>1.0s<span class="token punctuation">)</span>
faultallocbad: OK <span class="token punctuation">(</span>1.9s<span class="token punctuation">)</span>
faultnostack: OK <span class="token punctuation">(</span>2.1s<span class="token punctuation">)</span>
faultbadhandler: OK <span class="token punctuation">(</span>2.0s<span class="token punctuation">)</span>
faultevilhandler: OK <span class="token punctuation">(</span>1.9s<span class="token punctuation">)</span>
forktree: OK <span class="token punctuation">(</span>2.1s<span class="token punctuation">)</span>
Part B score: 50/50</code></pre></div>
<h2>Part C Preemptive Multitasking and Inter-Process communication (IPC)</h2>
<p>preempty uncooperative environmentenvironment</p>
<h3>Clock Interrupts and Preemption</h3>
<p><code class="language-text">user/spin</code>childCPUparentkernel</p>
<div class="gatsby-highlight" data-language="c"><pre class="language-c"><code class="language-c"><span class="token comment">// user/spin.c</span>
<span class="token keyword">void</span>
<span class="token function">umain</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span><span class="token operator">*</span>argv<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	envid_t env<span class="token punctuation">;</span>

	<span class="token function">cprintf</span><span class="token punctuation">(</span><span class="token string">"I am the parent.  Forking the child...\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>env <span class="token operator">=</span> <span class="token function">fork</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token function">cprintf</span><span class="token punctuation">(</span><span class="token string">"I am the child.  Spinning...\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
			<span class="token comment">/* do nothing */</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token function">cprintf</span><span class="token punctuation">(</span><span class="token string">"I am the parent.  Running the child...\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">sys_yield</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">sys_yield</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">sys_yield</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">sys_yield</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">sys_yield</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">sys_yield</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">sys_yield</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">sys_yield</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">cprintf</span><span class="token punctuation">(</span><span class="token string">"I am the parent.  Killing the child...\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">sys_env_destroy</span><span class="token punctuation">(</span>env<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>user-mode environmenthaltkernelpreempt a running environmentJOS kernelexternal hardware interrupt from the clock hardware</p>
<h3>Interrupt discipline</h3>
<p>External interruptsIRQ16IRQ015IRQ numberIDT entry</p>
<p><code class="language-text">inc/trap.c</code><code class="language-text">IRQ_OFFSET</code>32IDT32~47IRQ0~15<code class="language-text">IDT[IRQ_OFFSET + 0]</code>handler<code class="language-text">IRQ_OFFSET</code>device interruptprocessor exceptionMS-DOS...</p>
<p>JOSxv6kernelexternel device interruptJOSexternel device interrupt<code class="language-text">%eflags</code><code class="language-text">FL_IF</code>1user mode<code class="language-text">%eflags</code></p>
<p><code class="language-text">FL_IF</code>1bootloader</p>
<h3>Exercise 13</h3>
<p><code class="language-text">kern/trapentry.S</code>, <code class="language-text">kern/trap.c</code>IRQ 0~15<code class="language-text">env_alloc()</code><code class="language-text">sched_halt</code><code class="language-text">sti</code>idle CPU</p>
<p><code class="language-text">trapentry.S</code>the processor never pushes an error code when invoking a hardware interrupt handler<code class="language-text">TRAPHANDLER_NOEC</code>...</p>
<div class="gatsby-highlight" data-language="assembly"><pre class="language-assembly"><code class="language-assembly">TRAPHANDLER_NOEC(IRQ_0, IRQ_OFFSET + 0)
TRAPHANDLER_NOEC(IRQ_1, IRQ_OFFSET + 1)
TRAPHANDLER_NOEC(IRQ_2, IRQ_OFFSET + 2)
TRAPHANDLER_NOEC(IRQ_3, IRQ_OFFSET + 3)
TRAPHANDLER_NOEC(IRQ_4, IRQ_OFFSET + 4)
TRAPHANDLER_NOEC(IRQ_5, IRQ_OFFSET + 5)
TRAPHANDLER_NOEC(IRQ_6, IRQ_OFFSET + 6)
TRAPHANDLER_NOEC(IRQ_7, IRQ_OFFSET + 7)
TRAPHANDLER_NOEC(IRQ_8, IRQ_OFFSET + 8)
TRAPHANDLER_NOEC(IRQ_9, IRQ_OFFSET + 9)
TRAPHANDLER_NOEC(IRQ_10, IRQ_OFFSET + 10)
TRAPHANDLER_NOEC(IRQ_11, IRQ_OFFSET + 11)
TRAPHANDLER_NOEC(IRQ_12, IRQ_OFFSET + 12)
TRAPHANDLER_NOEC(IRQ_13, IRQ_OFFSET + 13)
TRAPHANDLER_NOEC(IRQ_14, IRQ_OFFSET + 14)
TRAPHANDLER_NOEC(IRQ_15, IRQ_OFFSET + 15)</code></pre></div>
<p><code class="language-text">kern/trap.c</code></p>
<div class="gatsby-highlight" data-language="c"><pre class="language-c"><code class="language-c">	<span class="token comment">// IRQ</span>
	<span class="token keyword">void</span> <span class="token function">IRQ_0</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">void</span> <span class="token function">IRQ_1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">void</span> <span class="token function">IRQ_2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">void</span> <span class="token function">IRQ_3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">void</span> <span class="token function">IRQ_4</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">void</span> <span class="token function">IRQ_5</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">void</span> <span class="token function">IRQ_6</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">void</span> <span class="token function">IRQ_7</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">void</span> <span class="token function">IRQ_8</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">void</span> <span class="token function">IRQ_9</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">void</span> <span class="token function">IRQ_10</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">void</span> <span class="token function">IRQ_11</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">void</span> <span class="token function">IRQ_12</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">void</span> <span class="token function">IRQ_13</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">void</span> <span class="token function">IRQ_14</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">void</span> <span class="token function">IRQ_15</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">SETGATE</span><span class="token punctuation">(</span>idt<span class="token punctuation">[</span>IRQ_OFFSET <span class="token operator">+</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> GD_KT<span class="token punctuation">,</span> IRQ_0<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">SETGATE</span><span class="token punctuation">(</span>idt<span class="token punctuation">[</span>IRQ_OFFSET <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> GD_KT<span class="token punctuation">,</span> IRQ_1<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">SETGATE</span><span class="token punctuation">(</span>idt<span class="token punctuation">[</span>IRQ_OFFSET <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> GD_KT<span class="token punctuation">,</span> IRQ_2<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">SETGATE</span><span class="token punctuation">(</span>idt<span class="token punctuation">[</span>IRQ_OFFSET <span class="token operator">+</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> GD_KT<span class="token punctuation">,</span> IRQ_3<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">SETGATE</span><span class="token punctuation">(</span>idt<span class="token punctuation">[</span>IRQ_OFFSET <span class="token operator">+</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> GD_KT<span class="token punctuation">,</span> IRQ_4<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">SETGATE</span><span class="token punctuation">(</span>idt<span class="token punctuation">[</span>IRQ_OFFSET <span class="token operator">+</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> GD_KT<span class="token punctuation">,</span> IRQ_5<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">SETGATE</span><span class="token punctuation">(</span>idt<span class="token punctuation">[</span>IRQ_OFFSET <span class="token operator">+</span> <span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> GD_KT<span class="token punctuation">,</span> IRQ_6<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">SETGATE</span><span class="token punctuation">(</span>idt<span class="token punctuation">[</span>IRQ_OFFSET <span class="token operator">+</span> <span class="token number">7</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> GD_KT<span class="token punctuation">,</span> IRQ_7<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">SETGATE</span><span class="token punctuation">(</span>idt<span class="token punctuation">[</span>IRQ_OFFSET <span class="token operator">+</span> <span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> GD_KT<span class="token punctuation">,</span> IRQ_8<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">SETGATE</span><span class="token punctuation">(</span>idt<span class="token punctuation">[</span>IRQ_OFFSET <span class="token operator">+</span> <span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> GD_KT<span class="token punctuation">,</span> IRQ_9<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">SETGATE</span><span class="token punctuation">(</span>idt<span class="token punctuation">[</span>IRQ_OFFSET <span class="token operator">+</span> <span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> GD_KT<span class="token punctuation">,</span> IRQ_10<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">SETGATE</span><span class="token punctuation">(</span>idt<span class="token punctuation">[</span>IRQ_OFFSET <span class="token operator">+</span> <span class="token number">11</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> GD_KT<span class="token punctuation">,</span> IRQ_11<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">SETGATE</span><span class="token punctuation">(</span>idt<span class="token punctuation">[</span>IRQ_OFFSET <span class="token operator">+</span> <span class="token number">12</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> GD_KT<span class="token punctuation">,</span> IRQ_12<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">SETGATE</span><span class="token punctuation">(</span>idt<span class="token punctuation">[</span>IRQ_OFFSET <span class="token operator">+</span> <span class="token number">13</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> GD_KT<span class="token punctuation">,</span> IRQ_13<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">SETGATE</span><span class="token punctuation">(</span>idt<span class="token punctuation">[</span>IRQ_OFFSET <span class="token operator">+</span> <span class="token number">14</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> GD_KT<span class="token punctuation">,</span> IRQ_14<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">SETGATE</span><span class="token punctuation">(</span>idt<span class="token punctuation">[</span>IRQ_OFFSET <span class="token operator">+</span> <span class="token number">15</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> GD_KT<span class="token punctuation">,</span> IRQ_15<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p><code class="language-text">trap()</code></p>
<div class="gatsby-highlight" data-language="c"><pre class="language-c"><code class="language-c"><span class="token function">assert</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span><span class="token function">read_eflags</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span> FL_IF<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>trap<code class="language-text">FL_IF</code>lab 3<code class="language-text">SETGATE</code></p>
<div class="gatsby-highlight" data-language="c"><pre class="language-c"><code class="language-c"><span class="token comment">// Set up a normal interrupt/trap gate descriptor.</span>
<span class="token comment">// - istrap: 1 for a trap (= exception) gate, 0 for an interrupt gate.</span>
    <span class="token comment">//   see section 9.6.1.3 of the i386 reference: "The difference between</span>
    <span class="token comment">//   an interrupt gate and a trap gate is in the effect on IF (the</span>
    <span class="token comment">//   interrupt-enable flag). An interrupt that vectors through an</span>
    <span class="token comment">//   interrupt gate resets IF, thereby preventing other interrupts from</span>
    <span class="token comment">//   interfering with the current interrupt handler. A subsequent IRET</span>
    <span class="token comment">//   instruction restores IF to the value in the EFLAGS image on the</span>
    <span class="token comment">//   stack. An interrupt through a trap gate does not change IF."</span>
<span class="token comment">// - sel: Code segment selector for interrupt/trap handler</span>
<span class="token comment">// - off: Offset in code segment for interrupt/trap handler</span>
<span class="token comment">// - dpl: Descriptor Privilege Level -</span>
<span class="token comment">//	  the privilege level required for software to invoke</span>
<span class="token comment">//	  this interrupt/trap gate explicitly using an int instruction.</span>
<span class="token macro property">#<span class="token directive keyword">define</span> SETGATE(gate, istrap, sel, off, dpl)			\
{								\
	(gate).gd_off_15_0 = (uint32_t) (off) &amp; 0xffff;		\
	(gate).gd_sel = (sel);					\
	(gate).gd_args = 0;					\
	(gate).gd_rsv1 = 0;					\
	(gate).gd_type = (istrap) ? STS_TG32 : STS_IG32;	\
	(gate).gd_s = 0;					\
	(gate).gd_dpl = (dpl);					\
	(gate).gd_p = 1;					\
	(gate).gd_off_31_16 = (uint32_t) (off) >> 16;		\
}</span></code></pre></div>
<p><code class="language-text">SETGATE</code><code class="language-text">istrap</code>0JOSxv6<code class="language-text">SETGATE</code>lab3<code class="language-text">istrap=0</code></p>
<p><code class="language-text">env_alloc()</code></p>
<div class="gatsby-highlight" data-language="c"><pre class="language-c"><code class="language-c">	<span class="token comment">// Enable interrupts while in user mode.</span>
	<span class="token comment">// LAB 4: Your code here.</span>
	e<span class="token operator">-></span>env_tf<span class="token punctuation">.</span>tf_eflags <span class="token operator">|</span><span class="token operator">=</span> FL_IF<span class="token punctuation">;</span></code></pre></div>
<p><code class="language-text">sched_halt()</code></p>
<div class="gatsby-highlight" data-language="c"><pre class="language-c"><code class="language-c">	<span class="token comment">// Reset stack pointer, enable interrupts and then halt.</span>
	<span class="token keyword">asm</span> <span class="token keyword">volatile</span> <span class="token punctuation">(</span>
		<span class="token string">"movl $0, %%ebp\n"</span>
		<span class="token string">"movl %0, %%esp\n"</span>
		<span class="token string">"pushl $0\n"</span>
		<span class="token string">"pushl $0\n"</span>
		<span class="token comment">// Uncomment the following line after completing exercise 13</span>
		<span class="token string">"sti\n"</span>
		<span class="token string">"1:\n"</span>
		<span class="token string">"hlt\n"</span>
		<span class="token string">"jmp 1b\n"</span>
	<span class="token punctuation">:</span> <span class="token punctuation">:</span> <span class="token string">"a"</span> <span class="token punctuation">(</span>thiscpu<span class="token operator">-></span>cpu_ts<span class="token punctuation">.</span>ts_esp0<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p><code class="language-text">user/spin</code></p>
<div class="gatsby-highlight" data-language="c"><pre class="language-c"><code class="language-c">$ make run<span class="token operator">-</span>spin<span class="token operator">-</span>nox
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">[</span><span class="token number">00000000</span><span class="token punctuation">]</span> new env <span class="token number">00001000</span>
I am the parent<span class="token punctuation">.</span>  Forking the child<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">[</span><span class="token number">00001000</span><span class="token punctuation">]</span> new env <span class="token number">00001001</span>
I am the parent<span class="token punctuation">.</span>  Running the child<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
I am the child<span class="token punctuation">.</span>  Spinning<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
TRAP frame at <span class="token number">0xf02b707c</span> from CPU <span class="token number">0</span>
  edi  <span class="token number">0x00000000</span>
  esi  <span class="token number">0x00000000</span>
  ebp  <span class="token number">0xeebfdfd0</span>
  oesp <span class="token number">0xf023cfdc</span>
  ebx  <span class="token number">0x00000000</span>
  edx  <span class="token number">0xeebfde88</span>
  ecx  <span class="token number">0x0000001d</span>
  eax  <span class="token number">0x0000001d</span>
  es   <span class="token number">0</span>x<span class="token operator">--</span><span class="token operator">--</span><span class="token number">0023</span>
  ds   <span class="token number">0</span>x<span class="token operator">--</span><span class="token operator">--</span><span class="token number">0023</span>
  trap <span class="token number">0x00000020</span> Hardware Interrupt
  err  <span class="token number">0x00000000</span>
  eip  <span class="token number">0x00800060</span>
  cs   <span class="token number">0</span>x<span class="token operator">--</span><span class="token operator">--</span><span class="token number">001</span>b
  flag <span class="token number">0x00000282</span>
  esp  <span class="token number">0xeebfdfc8</span>
  ss   <span class="token number">0</span>x<span class="token operator">--</span><span class="token operator">--</span><span class="token number">0023</span>
<span class="token punctuation">[</span><span class="token number">00001001</span><span class="token punctuation">]</span> free env <span class="token number">00001001</span>
I am the parent<span class="token punctuation">.</span>  Killing the child<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">[</span><span class="token number">00001000</span><span class="token punctuation">]</span> exiting gracefully
<span class="token punctuation">[</span><span class="token number">00001000</span><span class="token punctuation">]</span> free env <span class="token number">00001000</span>
No runnable environments in the system<span class="token operator">!</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span></code></pre></div>
<h3>Handling Clock Interrupts</h3>
<p>handler<code class="language-text">lapic_init</code><code class="language-text">pic_init</code>handler</p>
<h3>Exercise 14</h3>
<p><code class="language-text">trap_dispatch</code>timer interrupt handler</p>
<div class="gatsby-highlight" data-language="c"><pre class="language-c"><code class="language-c">		<span class="token comment">// Handle clock interrupts. Don't forget to acknowledge the</span>
		<span class="token comment">// interrupt using lapic_eoi() before calling the scheduler!</span>
		<span class="token comment">// LAB 4: Your code here.</span>
		<span class="token keyword">case</span> IRQ_OFFSET <span class="token operator">+</span> IRQ_TIMER<span class="token punctuation">:</span>
			<span class="token function">lapic_eoi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token function">sched_yield</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p><code class="language-text">user/spin</code></p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">$ <span class="token function">make</span> run-spin-nox
<span class="token punctuation">..</span>.
<span class="token punctuation">[</span>00000000<span class="token punctuation">]</span> new <span class="token function">env</span> 00001000
I am the parent.  Forking the child<span class="token punctuation">..</span>.
<span class="token punctuation">[</span>00001000<span class="token punctuation">]</span> new <span class="token function">env</span> 00001001
I am the parent.  Running the child<span class="token punctuation">..</span>.
I am the child.  Spinning<span class="token punctuation">..</span>.
I am the parent.  Killing the child<span class="token punctuation">..</span>.
<span class="token punctuation">[</span>00001000<span class="token punctuation">]</span> destroying 00001001
<span class="token punctuation">[</span>00001000<span class="token punctuation">]</span> <span class="token function">free</span> <span class="token function">env</span> 00001001
<span class="token punctuation">[</span>00001000<span class="token punctuation">]</span> exiting gracefully
<span class="token punctuation">[</span>00001000<span class="token punctuation">]</span> <span class="token function">free</span> <span class="token function">env</span> 00001000
No runnable environments <span class="token keyword">in</span> the system<span class="token operator">!</span>
<span class="token punctuation">..</span>.</code></pre></div>
<h3>Inter-Process communication (IPC)</h3>
<p>isolationinterprocess communication</p>
<h3>IPC in JOS</h3>
<p>system callinterprocess communication mechanismsystem call<code class="language-text">sys_ipc_recv</code><code class="language-text">sys_ipc_try_send</code><code class="language-text">ipc_recv</code><code class="language-text">ipc_send</code></p>
<p>JOSIPC32single page mappingpage mapping</p>
<h3>Sending and Receiving Messages</h3>
<p><code class="language-text">sys_ipc_recv</code>system callde-schedulesIPCparent child</p>
<p><code class="language-text">sys_ipc_try_send</code>0<code class="language-text">-E_IPC_NOT_RECV</code></p>
<p>User space<code class="language-text">ipc_recv</code><code class="language-text">sys_ipc_recv</code><code class="language-text">struct Env</code></p>
<p><code class="language-text">ipc_send</code><code class="language-text">sys_ipc_try_send</code></p>
<h3>Transferring Pages</h3>
<p><code class="language-text">dstva</code><code class="language-text">UTOP</code><code class="language-text">sys_ipc_recv</code>mappingsenderpagepagemap<code class="language-text">dstva</code><code class="language-text">dstva</code>mappingmappingunmap</p>
<p><code class="language-text">srcva</code><code class="language-text">UTOP</code><code class="language-text">sys_ipc_try_send</code>map<code class="language-text">srcva</code>pagepermission<code class="language-text">perm</code>IPCsendermappingreceiversharepage</p>
<p>senderreceivepagepageIPC<code class="language-text">Env</code><code class="language-text">env_ipc_perm</code>pagepermission0</p>
<h3>Implementing IPC</h3>
<h3>Exercise 15</h3>
<p><code class="language-text">sys_ipc_recv</code>, <code class="language-text">sys_ipc_try_send</code><code class="language-text">ipc_recv</code><code class="language-text">ipc_send</code><code class="language-text">envid2env</code><code class="language-text">checkperm</code>0</p>
<p><code class="language-text">sys_ipc_recv</code></p>
<div class="gatsby-highlight" data-language="c"><pre class="language-c"><code class="language-c"><span class="token comment">// Block until a value is ready.  Record that you want to receive</span>
<span class="token comment">// using the env_ipc_recving and env_ipc_dstva fields of struct Env,</span>
<span class="token comment">// mark yourself not runnable, and then give up the CPU.</span>
<span class="token comment">//</span>
<span class="token comment">// If 'dstva' is &lt; UTOP, then you are willing to receive a page of data.</span>
<span class="token comment">// 'dstva' is the virtual address at which the sent page should be mapped.</span>
<span class="token comment">//</span>
<span class="token comment">// This function only returns on error, but the system call will eventually</span>
<span class="token comment">// return 0 on success.</span>
<span class="token comment">// Return &lt; 0 on error.  Errors are:</span>
<span class="token comment">//	-E_INVAL if dstva &lt; UTOP but dstva is not page-aligned.</span>
<span class="token keyword">static</span> <span class="token keyword">int</span>
<span class="token function">sys_ipc_recv</span><span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token operator">*</span>dstva<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token comment">// LAB 4: Your code here.</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">(</span>uint32_t<span class="token punctuation">)</span>dstva <span class="token operator">&lt;</span> UTOP<span class="token punctuation">)</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">ROUNDDOWN</span><span class="token punctuation">(</span><span class="token punctuation">(</span>uint32_t<span class="token punctuation">)</span>dstva<span class="token punctuation">,</span> PGSIZE<span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token punctuation">(</span>uint32_t<span class="token punctuation">)</span>dstva<span class="token punctuation">)</span>
			<span class="token keyword">return</span> <span class="token operator">-</span>E_INVAL<span class="token punctuation">;</span>
	curenv<span class="token operator">-></span>env_ipc_recving <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
	curenv<span class="token operator">-></span>env_ipc_dstva <span class="token operator">=</span> dstva<span class="token punctuation">;</span>
	curenv<span class="token operator">-></span>env_status <span class="token operator">=</span> ENV_NOT_RUNNABLE<span class="token punctuation">;</span>
	<span class="token function">sched_yield</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//panic("sys_ipc_recv not implemented");</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p><code class="language-text">sys_ipc_try_send</code></p>
<div class="gatsby-highlight" data-language="c"><pre class="language-c"><code class="language-c"><span class="token comment">// Try to send 'value' to the target env 'envid'.</span>
<span class="token comment">// If srcva &lt; UTOP, then also send page currently mapped at 'srcva',</span>
<span class="token comment">// so that receiver gets a duplicate mapping of the same page.</span>
<span class="token comment">//</span>
<span class="token comment">// The send fails with a return value of -E_IPC_NOT_RECV if the</span>
<span class="token comment">// target is not blocked, waiting for an IPC.</span>
<span class="token comment">//</span>
<span class="token comment">// The send also can fail for the other reasons listed below.</span>
<span class="token comment">//</span>
<span class="token comment">// Otherwise, the send succeeds, and the target's ipc fields are</span>
<span class="token comment">// updated as follows:</span>
<span class="token comment">//    env_ipc_recving is set to 0 to block future sends;</span>
<span class="token comment">//    env_ipc_from is set to the sending envid;</span>
<span class="token comment">//    env_ipc_value is set to the 'value' parameter;</span>
<span class="token comment">//    env_ipc_perm is set to 'perm' if a page was transferred, 0 otherwise.</span>
<span class="token comment">// The target environment is marked runnable again, returning 0</span>
<span class="token comment">// from the paused sys_ipc_recv system call.  (Hint: does the</span>
<span class="token comment">// sys_ipc_recv function ever actually return?)</span>
<span class="token comment">//</span>
<span class="token comment">// If the sender wants to send a page but the receiver isn't asking for one,</span>
<span class="token comment">// then no page mapping is transferred, but no error occurs.</span>
<span class="token comment">// The ipc only happens when no errors occur.</span>
<span class="token comment">//</span>
<span class="token comment">// Returns 0 on success, &lt; 0 on error.</span>
<span class="token comment">// Errors are:</span>
<span class="token comment">//	-E_BAD_ENV if environment envid doesn't currently exist.</span>
<span class="token comment">//		(No need to check permissions.)</span>
<span class="token comment">//	-E_IPC_NOT_RECV if envid is not currently blocked in sys_ipc_recv,</span>
<span class="token comment">//		or another environment managed to send first.</span>
<span class="token comment">//	-E_INVAL if srcva &lt; UTOP but srcva is not page-aligned.</span>
<span class="token comment">//	-E_INVAL if srcva &lt; UTOP and perm is inappropriate</span>
<span class="token comment">//		(see sys_page_alloc).</span>
<span class="token comment">//	-E_INVAL if srcva &lt; UTOP but srcva is not mapped in the caller's</span>
<span class="token comment">//		address space.</span>
<span class="token comment">//	-E_INVAL if (perm &amp; PTE_W), but srcva is read-only in the</span>
<span class="token comment">//		current environment's address space.</span>
<span class="token comment">//	-E_NO_MEM if there's not enough memory to map srcva in envid's</span>
<span class="token comment">//		address space.</span>
<span class="token keyword">static</span> <span class="token keyword">int</span>
<span class="token function">sys_ipc_try_send</span><span class="token punctuation">(</span>envid_t envid<span class="token punctuation">,</span> uint32_t value<span class="token punctuation">,</span> <span class="token keyword">void</span> <span class="token operator">*</span>srcva<span class="token punctuation">,</span> <span class="token keyword">unsigned</span> perm<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token comment">// LAB 4: Your code here.</span>
	<span class="token keyword">int</span> r<span class="token punctuation">;</span>
	<span class="token keyword">struct</span> Env <span class="token operator">*</span>e<span class="token punctuation">;</span>
	<span class="token keyword">struct</span> PageInfo <span class="token operator">*</span>pp <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>
	pte_t <span class="token operator">*</span>pte <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>r <span class="token operator">=</span> <span class="token function">envid2env</span><span class="token punctuation">(</span>envid<span class="token punctuation">,</span> <span class="token operator">&amp;</span>e<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
		<span class="token keyword">return</span> r<span class="token punctuation">;</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>e<span class="token operator">-></span>env_ipc_recving<span class="token punctuation">)</span>
		<span class="token keyword">return</span> <span class="token operator">-</span>E_IPC_NOT_RECV<span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>uint32_t<span class="token punctuation">)</span>srcva <span class="token operator">&lt;</span> UTOP <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>uint32_t<span class="token punctuation">)</span>e<span class="token operator">-></span>env_ipc_dstva <span class="token operator">&lt;</span> UTOP<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">ROUNDDOWN</span><span class="token punctuation">(</span><span class="token punctuation">(</span>uint32_t<span class="token punctuation">)</span>srcva<span class="token punctuation">,</span> PGSIZE<span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token punctuation">(</span>uint32_t<span class="token punctuation">)</span>srcva<span class="token punctuation">)</span>
			<span class="token keyword">return</span> <span class="token operator">-</span>E_INVAL<span class="token punctuation">;</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">(</span>perm <span class="token operator">&amp;</span> <span class="token punctuation">(</span>PTE_U <span class="token operator">|</span> PTE_P<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token punctuation">(</span>PTE_U <span class="token operator">|</span> PTE_P<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token punctuation">(</span>perm <span class="token operator">&amp;</span> <span class="token operator">~</span>PTE_SYSCALL<span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span>
			<span class="token keyword">return</span> <span class="token operator">-</span>E_INVAL<span class="token punctuation">;</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">(</span>pp <span class="token operator">=</span> <span class="token function">page_lookup</span><span class="token punctuation">(</span>curenv<span class="token operator">-></span>env_pgdir<span class="token punctuation">,</span> srcva<span class="token punctuation">,</span> <span class="token operator">&amp;</span>pte<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token constant">NULL</span><span class="token punctuation">)</span>
			<span class="token keyword">return</span> <span class="token operator">-</span>E_INVAL<span class="token punctuation">;</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token operator">*</span>pte <span class="token operator">&amp;</span> perm<span class="token punctuation">)</span> <span class="token operator">!=</span> perm<span class="token punctuation">)</span>
			<span class="token keyword">return</span> <span class="token operator">-</span>E_INVAL<span class="token punctuation">;</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">(</span>perm <span class="token operator">&amp;</span> PTE_W<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token punctuation">(</span><span class="token operator">*</span>pte <span class="token operator">&amp;</span> PTE_W<span class="token punctuation">)</span><span class="token punctuation">)</span>
			<span class="token keyword">return</span> <span class="token operator">-</span>E_INVAL<span class="token punctuation">;</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">(</span>r <span class="token operator">=</span> <span class="token function">page_insert</span><span class="token punctuation">(</span>e<span class="token operator">-></span>env_pgdir<span class="token punctuation">,</span> pp<span class="token punctuation">,</span> e<span class="token operator">-></span>env_ipc_dstva<span class="token punctuation">,</span> perm<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
			<span class="token keyword">return</span> r<span class="token punctuation">;</span>
		e<span class="token operator">-></span>env_ipc_perm <span class="token operator">=</span> perm<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	e<span class="token operator">-></span>env_ipc_recving <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	e<span class="token operator">-></span>env_ipc_from <span class="token operator">=</span> curenv<span class="token operator">-></span>env_id<span class="token punctuation">;</span>
	e<span class="token operator">-></span>env_ipc_value <span class="token operator">=</span> value<span class="token punctuation">;</span>
	e<span class="token operator">-></span>env_status <span class="token operator">=</span> ENV_RUNNABLE<span class="token punctuation">;</span>
	e<span class="token operator">-></span>env_tf<span class="token punctuation">.</span>tf_regs<span class="token punctuation">.</span>reg_eax <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token comment">//panic("sys_ipc_try_send not implemented");</span>
<span class="token punctuation">}</span></code></pre></div>
<p><code class="language-text">syscall()</code></p>
<p><code class="language-text">ipc_recv</code></p>
<div class="gatsby-highlight" data-language="c"><pre class="language-c"><code class="language-c"><span class="token comment">// Receive a value via IPC and return it.</span>
<span class="token comment">// If 'pg' is nonnull, then any page sent by the sender will be mapped at</span>
<span class="token comment">//	that address.</span>
<span class="token comment">// If 'from_env_store' is nonnull, then store the IPC sender's envid in</span>
<span class="token comment">//	*from_env_store.</span>
<span class="token comment">// If 'perm_store' is nonnull, then store the IPC sender's page permission</span>
<span class="token comment">//	in *perm_store (this is nonzero iff a page was successfully</span>
<span class="token comment">//	transferred to 'pg').</span>
<span class="token comment">// If the system call fails, then store 0 in *fromenv and *perm (if</span>
<span class="token comment">//	they're nonnull) and return the error.</span>
<span class="token comment">// Otherwise, return the value sent by the sender</span>
<span class="token comment">//</span>
<span class="token comment">// Hint:</span>
<span class="token comment">//   Use 'thisenv' to discover the value and who sent it.</span>
<span class="token comment">//   If 'pg' is null, pass sys_ipc_recv a value that it will understand</span>
<span class="token comment">//   as meaning "no page".  (Zero is not the right value, since that's</span>
<span class="token comment">//   a perfectly valid place to map a page.)</span>
int32_t
<span class="token function">ipc_recv</span><span class="token punctuation">(</span>envid_t <span class="token operator">*</span>from_env_store<span class="token punctuation">,</span> <span class="token keyword">void</span> <span class="token operator">*</span>pg<span class="token punctuation">,</span> <span class="token keyword">int</span> <span class="token operator">*</span>perm_store<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token comment">// LAB 4: Your code here.</span>
	<span class="token keyword">int</span> r<span class="token punctuation">;</span>
	<span class="token keyword">void</span> <span class="token operator">*</span>dstva <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token operator">*</span><span class="token punctuation">)</span>UTOP<span class="token punctuation">;</span>

	<span class="token keyword">if</span><span class="token punctuation">(</span>pg<span class="token punctuation">)</span>
		dstva <span class="token operator">=</span> pg<span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>from_env_store<span class="token punctuation">)</span>
			<span class="token operator">*</span>from_env_store <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>perm_store<span class="token punctuation">)</span>
		<span class="token operator">*</span>perm_store <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">(</span>r <span class="token operator">=</span> <span class="token function">sys_ipc_recv</span><span class="token punctuation">(</span>dstva<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
		<span class="token keyword">return</span> r<span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>from_env_store<span class="token punctuation">)</span>
		<span class="token operator">*</span>from_env_store <span class="token operator">=</span> thisenv<span class="token operator">-></span>env_ipc_from<span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>perm_store<span class="token punctuation">)</span>
		<span class="token operator">*</span>perm_store <span class="token operator">=</span> thisenv<span class="token operator">-></span>env_ipc_perm<span class="token punctuation">;</span>
	<span class="token keyword">return</span> thisenv<span class="token operator">-></span>env_ipc_value<span class="token punctuation">;</span>
	<span class="token comment">//panic("ipc_recv not implemented");</span>
<span class="token punctuation">}</span></code></pre></div>
<p><code class="language-text">ipc_send</code></p>
<div class="gatsby-highlight" data-language="c"><pre class="language-c"><code class="language-c"><span class="token comment">// Send 'val' (and 'pg' with 'perm', if 'pg' is nonnull) to 'toenv'.</span>
<span class="token comment">// This function keeps trying until it succeeds.</span>
<span class="token comment">// It should panic() on any error other than -E_IPC_NOT_RECV.</span>
<span class="token comment">//</span>
<span class="token comment">// Hint:</span>
<span class="token comment">//   Use sys_yield() to be CPU-friendly.</span>
<span class="token comment">//   If 'pg' is null, pass sys_ipc_try_send a value that it will understand</span>
<span class="token comment">//   as meaning "no page".  (Zero is not the right value.)</span>
<span class="token keyword">void</span>
<span class="token function">ipc_send</span><span class="token punctuation">(</span>envid_t to_env<span class="token punctuation">,</span> uint32_t val<span class="token punctuation">,</span> <span class="token keyword">void</span> <span class="token operator">*</span>pg<span class="token punctuation">,</span> <span class="token keyword">int</span> perm<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token comment">// LAB 4: Your code here.</span>
	<span class="token keyword">int</span> r<span class="token punctuation">;</span>
	<span class="token keyword">void</span> <span class="token operator">*</span>srcva <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token operator">*</span><span class="token punctuation">)</span>UTOP<span class="token punctuation">;</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span>pg<span class="token punctuation">)</span>
		srcva <span class="token operator">=</span> pg<span class="token punctuation">;</span>

	<span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>r <span class="token operator">=</span> <span class="token function">sys_ipc_try_send</span><span class="token punctuation">(</span>to_env<span class="token punctuation">,</span> val<span class="token punctuation">,</span> pg<span class="token punctuation">,</span> perm<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>r <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>
			<span class="token keyword">break</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>r <span class="token operator">!=</span> <span class="token operator">-</span>E_IPC_NOT_RECV<span class="token punctuation">)</span>
			<span class="token function">panic</span><span class="token punctuation">(</span><span class="token string">"ipc send fail"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">sys_yield</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token comment">//panic("ipc_send not implemented");</span>
<span class="token punctuation">}</span></code></pre></div>
<p><code class="language-text">user/pingpong</code><code class="language-text">user/primes</code></p>
<p><code class="language-text">make grade</code></p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">$ <span class="token function">make</span> grade
<span class="token punctuation">..</span>.
dumbfork: OK <span class="token punctuation">(</span>2.5s<span class="token punctuation">)</span>
Part A score: 5/5

faultread: OK <span class="token punctuation">(</span>1.9s<span class="token punctuation">)</span>
faultwrite: OK <span class="token punctuation">(</span>2.1s<span class="token punctuation">)</span>
faultdie: OK <span class="token punctuation">(</span>2.0s<span class="token punctuation">)</span>
faultregs: OK <span class="token punctuation">(</span>2.1s<span class="token punctuation">)</span>
faultalloc: OK <span class="token punctuation">(</span>0.9s<span class="token punctuation">)</span>
faultallocbad: OK <span class="token punctuation">(</span>1.9s<span class="token punctuation">)</span>
faultnostack: OK <span class="token punctuation">(</span>2.0s<span class="token punctuation">)</span>
faultbadhandler: OK <span class="token punctuation">(</span>2.2s<span class="token punctuation">)</span>
faultevilhandler: OK <span class="token punctuation">(</span>1.9s<span class="token punctuation">)</span>
forktree: OK <span class="token punctuation">(</span>2.2s<span class="token punctuation">)</span>
Part B score: 50/50

spin: OK <span class="token punctuation">(</span>2.0s<span class="token punctuation">)</span>
stresssched: OK <span class="token punctuation">(</span>2.2s<span class="token punctuation">)</span>
sendpage: OK <span class="token punctuation">(</span>1.7s<span class="token punctuation">)</span>
pingpong: OK <span class="token punctuation">(</span>2.0s<span class="token punctuation">)</span>
primes: OK <span class="token punctuation">(</span>4.4s<span class="token punctuation">)</span>
Part C score: 25/25

Score: 80/80</code></pre></div>
<p>lab4</p></div></div></div></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.page={"componentChunkName":"component---src-templates-blog-post-js","jsonName":"6-828-lab-4-174","path":"/6.828-lab4/"};window.dataPath="877/path---6-828-lab-4-174-a74-02MUZ1PR2ANgvxnYI42vgCvPWg";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app.56c9a2e0f17d43243a15.css","/app-17a2b7494f03f49a9dcf.js"],"component---src-templates-blog-post-js":["/component---src-templates-blog-post-js-65b797d13e45e636650e.js"],"component---src-pages-about-js":["/component---src-pages-about-js-b7e605a420cb05f94eac.js"],"component---src-pages-index-js":["/component---src-pages-index-js-eb479f5e0016a9aace40.js"],"component---src-pages-my-files-js":["/component---src-pages-my-files-js-58870154137a9e9562aa.js"],"pages-manifest":["/pages-manifest-d5d99b68dfaff5a6f4c2.js"]};/*]]>*/</script><script src="/webpack-runtime-def10263602bee66fbcd.js" async=""></script><script src="/app-17a2b7494f03f49a9dcf.js" async=""></script><script src="/0-d6413646fc65cc1ae06b.js" async=""></script><script src="/8-6c1aaf91193d336a5639.js" async=""></script><script src="/component---src-templates-blog-post-js-65b797d13e45e636650e.js" async=""></script></body></html>